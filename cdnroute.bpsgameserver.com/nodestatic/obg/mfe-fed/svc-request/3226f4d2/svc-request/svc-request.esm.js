var L=(e=>(e.IsAuthenticated="appAccount.isAuthenticated",e.SessionToken="appAccount.sessionToken",e))(L||{}),d=(e=>(e.Config="config.value",e.Jurisdiction="config.jurisdiction",e.AppVersion="config.appVersion",e.BrandId="config.brandId",e.CountryCode="config.countryCode",e.DeviceType="config.deviceType",e.DeviceExperience="config.deviceExperience",e.IsBot="config.isBot",e.IsInternal="config.isInternal",e.IsSearchEngine="config.isSearchEngine",e.MarketCode="config.marketCode",e.AllowedFeatures="config.allowedFeatures",e))(d||{}),P=(e=>(e[e.Continue=100]="Continue",e[e.SwitchingProtocols=101]="SwitchingProtocols",e[e.Ok=200]="Ok",e[e.Created=201]="Created",e[e.Accepted=202]="Accepted",e[e.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",e[e.NoContent=204]="NoContent",e[e.ResetContent=205]="ResetContent",e[e.PartialContent=206]="PartialContent",e[e.MultipleChoices=300]="MultipleChoices",e[e.MovedPermanently=301]="MovedPermanently",e[e.Found=302]="Found",e[e.SeeOther=303]="SeeOther",e[e.NotModified=304]="NotModified",e[e.UseProxy=305]="UseProxy",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.BadRequest=400]="BadRequest",e[e.Unauthorized=401]="Unauthorized",e[e.PaymentRequired=402]="PaymentRequired",e[e.Forbidden=403]="Forbidden",e[e.NotFound=404]="NotFound",e[e.MethodNotAllowed=405]="MethodNotAllowed",e[e.NotAcceptable=406]="NotAcceptable",e[e.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",e[e.RequestTimeout=408]="RequestTimeout",e[e.Conflict=409]="Conflict",e[e.Gone=410]="Gone",e[e.LengthRequired=411]="LengthRequired",e[e.PreconditionFailed=412]="PreconditionFailed",e[e.PayloadTooLarge=413]="PayloadTooLarge",e[e.UriTooLong=414]="UriTooLong",e[e.UnsupportedMediaType=415]="UnsupportedMediaType",e[e.RangeNotSatisfiable=416]="RangeNotSatisfiable",e[e.ExpectationFailed=417]="ExpectationFailed",e[e.ImATeapot=418]="ImATeapot",e[e.UpgradeRequired=426]="UpgradeRequired",e[e.InternalServerError=500]="InternalServerError",e[e.NotImplemented=501]="NotImplemented",e[e.BadGateway=502]="BadGateway",e[e.ServiceUnavailable=503]="ServiceUnavailable",e[e.GatewayTimeout=504]="GatewayTimeout",e[e.HttpVersionNotSupported=505]="HttpVersionNotSupported",e[e.Processing=102]="Processing",e[e.MultiStatus=207]="MultiStatus",e[e.ImUsed=226]="ImUsed",e[e.PermanentRedirect=308]="PermanentRedirect",e[e.UnprocessableEntry=422]="UnprocessableEntry",e[e.Locked=423]="Locked",e[e.FailedDependency=424]="FailedDependency",e[e.PreconditionRequired=428]="PreconditionRequired",e[e.TooManyRequests=429]="TooManyRequests",e[e.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",e[e.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",e[e.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",e[e.InsufficientStorage=507]="InsufficientStorage",e[e.LoopDetected=508]="LoopDetected",e[e.NotExtended=510]="NotExtended",e[e.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",e[e.UnhandledError=800]="UnhandledError",e))(P||{}),j=(e=>(e.MakeRequest="request:makeRequest",e.RequestSuccess="request:requestSuccess",e))(j||{}),D=(e=>(e.none="none",e.latest="latest",e.all="all",e))(D||{});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var x=function(e,r){return x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},x(e,r)};function b(e,r){x(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}function A(e){return typeof e=="function"}var O=!1,l={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e){var r=new Error;""+r.stack}O=e},get useDeprecatedSynchronousErrorHandling(){return O}};function v(e){setTimeout(function(){throw e},0)}var T={closed:!0,next:function(e){},error:function(e){if(l.useDeprecatedSynchronousErrorHandling)throw e;v(e)},complete:function(){}},N=function(){return Array.isArray||function(e){return e&&typeof e.length=="number"}}();function B(e){return e!==null&&typeof e=="object"}var S=function(){function e(r){return Error.call(this),this.message=r?r.length+` errors occurred during unsubscription:
`+r.map(function(n,t){return t+1+") "+n.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=r,this}return e.prototype=Object.create(Error.prototype),e}(),_=S,w=function(){function e(r){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,r&&(this._unsubscribe=r)}return e.prototype.unsubscribe=function(){var r;if(!this.closed){var n=this,t=n._parentOrParents,i=n._unsubscribe,o=n._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,t instanceof e)t.remove(this);else if(t!==null)for(var c=0;c<t.length;++c){var u=t[c];u.remove(this)}if(A(i))try{i.call(this)}catch(f){r=f instanceof _?U(f.errors):[f]}if(N(o))for(var c=-1,s=o.length;++c<s;){var h=o[c];if(B(h))try{h.unsubscribe()}catch(E){r=r||[],E instanceof _?r=r.concat(U(E.errors)):r.push(E)}}if(r)throw new _(r)}},e.prototype.add=function(r){var n=r;if(!r)return e.EMPTY;switch(typeof r){case"function":n=new e(r);case"object":if(n===this||n.closed||typeof n.unsubscribe!="function")return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){var t=n;n=new e,n._subscriptions=[t]}break;default:throw new Error("unrecognized teardown "+r+" added to Subscription.")}var i=n._parentOrParents;if(i===null)n._parentOrParents=this;else if(i instanceof e){if(i===this)return n;n._parentOrParents=[i,this]}else if(i.indexOf(this)===-1)i.push(this);else return n;var o=this._subscriptions;return o===null?this._subscriptions=[n]:o.push(n),n},e.prototype.remove=function(r){var n=this._subscriptions;if(n){var t=n.indexOf(r);t!==-1&&n.splice(t,1)}},e.EMPTY=function(r){return r.closed=!0,r}(new e),e}();function U(e){return e.reduce(function(r,n){return r.concat(n instanceof _?n.errors:n)},[])}var I=function(){return typeof Symbol=="function"?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),p=function(e){b(r,e);function r(n,t,i){var o=e.call(this)||this;switch(o.syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,arguments.length){case 0:o.destination=T;break;case 1:if(!n){o.destination=T;break}if(typeof n=="object"){n instanceof r?(o.syncErrorThrowable=n.syncErrorThrowable,o.destination=n,n.add(o)):(o.syncErrorThrowable=!0,o.destination=new M(o,n));break}default:o.syncErrorThrowable=!0,o.destination=new M(o,n,t,i);break}return o}return r.prototype[I]=function(){return this},r.create=function(n,t,i){var o=new r(n,t,i);return o.syncErrorThrowable=!1,o},r.prototype.next=function(n){this.isStopped||this._next(n)},r.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},r.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},r.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},r.prototype._next=function(n){this.destination.next(n)},r.prototype._error=function(n){this.destination.error(n),this.unsubscribe()},r.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},r.prototype._unsubscribeAndRecycle=function(){var n=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=n,this},r}(w),M=function(e){b(r,e);function r(n,t,i,o){var c=e.call(this)||this;c._parentSubscriber=n;var u,s=c;return A(t)?u=t:t&&(u=t.next,i=t.error,o=t.complete,t!==T&&(s=Object.create(t),A(s.unsubscribe)&&c.add(s.unsubscribe.bind(s)),s.unsubscribe=c.unsubscribe.bind(c))),c._context=s,c._next=u,c._error=i,c._complete=o,c}return r.prototype.next=function(n){if(!this.isStopped&&this._next){var t=this._parentSubscriber;!l.useDeprecatedSynchronousErrorHandling||!t.syncErrorThrowable?this.__tryOrUnsub(this._next,n):this.__tryOrSetError(t,this._next,n)&&this.unsubscribe()}},r.prototype.error=function(n){if(!this.isStopped){var t=this._parentSubscriber,i=l.useDeprecatedSynchronousErrorHandling;if(this._error)!i||!t.syncErrorThrowable?(this.__tryOrUnsub(this._error,n),this.unsubscribe()):(this.__tryOrSetError(t,this._error,n),this.unsubscribe());else if(t.syncErrorThrowable)i?(t.syncErrorValue=n,t.syncErrorThrown=!0):v(n),this.unsubscribe();else{if(this.unsubscribe(),i)throw n;v(n)}}},r.prototype.complete=function(){var n=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var i=function(){return n._complete.call(n._context)};!l.useDeprecatedSynchronousErrorHandling||!t.syncErrorThrowable?(this.__tryOrUnsub(i),this.unsubscribe()):(this.__tryOrSetError(t,i),this.unsubscribe())}else this.unsubscribe()}},r.prototype.__tryOrUnsub=function(n,t){try{n.call(this._context,t)}catch(i){if(this.unsubscribe(),l.useDeprecatedSynchronousErrorHandling)throw i;v(i)}},r.prototype.__tryOrSetError=function(n,t,i){if(!l.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,i)}catch(o){return l.useDeprecatedSynchronousErrorHandling?(n.syncErrorValue=o,n.syncErrorThrown=!0,!0):(v(o),!0)}return!1},r.prototype._unsubscribe=function(){var n=this._parentSubscriber;this._context=null,this._parentSubscriber=null,n.unsubscribe()},r}(p);function C(e){for(;e;){var r=e,n=r.closed,t=r.destination,i=r.isStopped;if(n||i)return!1;t&&t instanceof p?e=t:e=null}return!0}function ee(e,r,n){if(e){if(e instanceof p)return e;if(e[I])return e[I]()}return!e&&!r&&!n?new p(T):new p(e,r,n)}var g=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function re(e){return e}function ne(e){return e.length===0?re:e.length===1?e[0]:function(n){return e.reduce(function(t,i){return i(t)},n)}}var a=function(){function e(r){this._isScalar=!1,r&&(this._subscribe=r)}return e.prototype.lift=function(r){var n=new e;return n.source=this,n.operator=r,n},e.prototype.subscribe=function(r,n,t){var i=this.operator,o=ee(r,n,t);if(i?o.add(i.call(o,this.source)):o.add(this.source||l.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),l.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},e.prototype._trySubscribe=function(r){try{return this._subscribe(r)}catch(n){l.useDeprecatedSynchronousErrorHandling&&(r.syncErrorThrown=!0,r.syncErrorValue=n),C(r)?r.error(n):console.warn(n)}},e.prototype.forEach=function(r,n){var t=this;return n=q(n),new n(function(i,o){var c;c=t.subscribe(function(u){try{r(u)}catch(s){o(s),c&&c.unsubscribe()}},o,i)})},e.prototype._subscribe=function(r){var n=this.source;return n&&n.subscribe(r)},e.prototype[g]=function(){return this},e.prototype.pipe=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return r.length===0?this:ne(r)(this)},e.prototype.toPromise=function(r){var n=this;return r=q(r),new r(function(t,i){var o;n.subscribe(function(c){return o=c},function(c){return i(c)},function(){return t(o)})})},e.create=function(r){return new e(r)},e}();function q(e){if(e||(e=Promise),!e)throw new Error("no Promise impl found");return e}var te=new a(function(e){return e.complete()});function ie(e){return e?oe(e):te}function oe(e){return new a(function(r){return e.schedule(function(){return r.complete()})})}function ce(e){return e&&typeof e.schedule=="function"}var F=function(e){return function(r){for(var n=0,t=e.length;n<t&&!r.closed;n++)r.next(e[n]);r.complete()}};function $(e,r){return new a(function(n){var t=new w,i=0;return t.add(r.schedule(function(){if(i===e.length){n.complete();return}n.next(e[i++]),n.closed||t.add(this.schedule())})),t})}function ue(e,r){return r?$(e,r):new a(F(e))}var se=function(){function e(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return e.prototype=Object.create(Error.prototype),e}(),ae=se;function H(e,r){return function(t){if(typeof e!="function")throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return t.lift(new fe(e,r))}}var fe=function(){function e(r,n){this.project=r,this.thisArg=n}return e.prototype.call=function(r,n){return n.subscribe(new le(r,this.project,this.thisArg))},e}(),le=function(e){b(r,e);function r(n,t,i){var o=e.call(this,n)||this;return o.project=t,o.count=0,o.thisArg=i||o,o}return r.prototype._next=function(n){var t;try{t=this.project.call(this.thisArg,n,this.count++)}catch(i){this.destination.error(i);return}this.destination.next(t)},r}(p),G=function(e){b(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.notifyNext=function(n,t,i,o,c){this.destination.next(t)},r.prototype.notifyError=function(n,t){this.destination.error(n)},r.prototype.notifyComplete=function(n){this.destination.complete()},r}(p),V=function(e){b(r,e);function r(n,t,i){var o=e.call(this)||this;return o.parent=n,o.outerValue=t,o.outerIndex=i,o.index=0,o}return r.prototype._next=function(n){this.parent.notifyNext(this.outerValue,n,this.outerIndex,this.index++,this)},r.prototype._error=function(n){this.parent.notifyError(n,this),this.unsubscribe()},r.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},r}(p),he=function(e){return function(r){return e.then(function(n){r.closed||(r.next(n),r.complete())},function(n){return r.error(n)}).then(null,v),r}};function pe(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var R=pe(),be=function(e){return function(r){var n=e[R]();do{var t=n.next();if(t.done){r.complete();break}if(r.next(t.value),r.closed)break}while(!0);return typeof n.return=="function"&&r.add(function(){n.return&&n.return()}),r}},ye=function(e){return function(r){var n=e[g]();if(typeof n.subscribe!="function")throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(r)}},X=function(e){return e&&typeof e.length=="number"&&typeof e!="function"};function Y(e){return!!e&&typeof e.subscribe!="function"&&typeof e.then=="function"}var z=function(e){if(e&&typeof e[g]=="function")return ye(e);if(X(e))return F(e);if(Y(e))return he(e);if(e&&typeof e[R]=="function")return be(e);var r=B(e)?"an invalid object":"'"+e+"'",n="You provided "+r+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";throw new TypeError(n)};function J(e,r,n,t,i){if(i===void 0&&(i=new V(e,n,t)),!i.closed)return r instanceof a?r.subscribe(i):z(r)(i)}var k={};function de(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=null,t=null;return ce(e[e.length-1])&&(t=e.pop()),typeof e[e.length-1]=="function"&&(n=e.pop()),e.length===1&&N(e[0])&&(e=e[0]),ue(e,t).lift(new ve(n))}var ve=function(){function e(r){this.resultSelector=r}return e.prototype.call=function(r,n){return n.subscribe(new me(r,this.resultSelector))},e}(),me=function(e){b(r,e);function r(n,t){var i=e.call(this,n)||this;return i.resultSelector=t,i.active=0,i.values=[],i.observables=[],i}return r.prototype._next=function(n){this.values.push(k),this.observables.push(n)},r.prototype._complete=function(){var n=this.observables,t=n.length;if(t===0)this.destination.complete();else{this.active=t,this.toRespond=t;for(var i=0;i<t;i++){var o=n[i];this.add(J(this,o,o,i))}}},r.prototype.notifyComplete=function(n){(this.active-=1)===0&&this.destination.complete()},r.prototype.notifyNext=function(n,t,i,o,c){var u=this.values,s=u[i],h=this.toRespond?s===k?--this.toRespond:this.toRespond:0;u[i]=t,h===0&&(this.resultSelector?this._tryResultSelector(u):this.destination.next(u.slice()))},r.prototype._tryResultSelector=function(n){var t;try{t=this.resultSelector.apply(this,n)}catch(i){this.destination.error(i);return}this.destination.next(t)},r}(G);function we(e,r){return new a(function(n){var t=new w;return t.add(r.schedule(function(){var i=e[g]();t.add(i.subscribe({next:function(o){t.add(r.schedule(function(){return n.next(o)}))},error:function(o){t.add(r.schedule(function(){return n.error(o)}))},complete:function(){t.add(r.schedule(function(){return n.complete()}))}}))})),t})}function ge(e,r){return new a(function(n){var t=new w;return t.add(r.schedule(function(){return e.then(function(i){t.add(r.schedule(function(){n.next(i),t.add(r.schedule(function(){return n.complete()}))}))},function(i){t.add(r.schedule(function(){return n.error(i)}))})})),t})}function Ee(e,r){if(!e)throw new Error("Iterable cannot be null");return new a(function(n){var t=new w,i;return t.add(function(){i&&typeof i.return=="function"&&i.return()}),t.add(r.schedule(function(){i=e[R](),t.add(r.schedule(function(){if(!n.closed){var o,c;try{var u=i.next();o=u.value,c=u.done}catch(s){n.error(s);return}c?n.complete():(n.next(o),this.schedule())}}))})),t})}function _e(e){return e&&typeof e[g]=="function"}function Te(e){return e&&typeof e[R]=="function"}function Re(e,r){if(e!=null){if(_e(e))return we(e,r);if(Y(e))return ge(e,r);if(X(e))return $(e,r);if(Te(e)||typeof e=="string")return Ee(e,r)}throw new TypeError((e!==null&&typeof e||e)+" is not observable")}function W(e,r){return r?Re(e,r):e instanceof a?e:new a(z(e))}function y(e){return function(r){return e===0?ie():r.lift(new Pe(e))}}var Pe=function(){function e(r){if(this.total=r,this.total<0)throw new ae}return e.prototype.call=function(r,n){return n.subscribe(new xe(r,this.total))},e}(),xe=function(e){b(r,e);function r(n,t){var i=e.call(this,n)||this;return i.total=t,i.count=0,i}return r.prototype._next=function(n){var t=this.total,i=++this.count;i<=t&&(this.destination.next(n),i===t&&(this.destination.complete(),this.unsubscribe()))},r}(p);function K(e,r){return typeof r=="function"?function(n){return n.pipe(K(function(t,i){return W(e(t,i)).pipe(H(function(o,c){return r(t,o,i,c)}))}))}:function(n){return n.lift(new Ae(e))}}var Ae=function(){function e(r){this.project=r}return e.prototype.call=function(r,n){return n.subscribe(new Ie(r,this.project))},e}(),Ie=function(e){b(r,e);function r(n,t){var i=e.call(this,n)||this;return i.project=t,i.index=0,i}return r.prototype._next=function(n){var t,i=this.index++;try{t=this.project(n,i)}catch(o){this.destination.error(o);return}this._innerSub(t,n,i)},r.prototype._innerSub=function(n,t,i){var o=this.innerSubscription;o&&o.unsubscribe();var c=new V(this,t,i),u=this.destination;u.add(c),this.innerSubscription=J(this,n,void 0,void 0,c),this.innerSubscription!==c&&u.add(this.innerSubscription)},r.prototype._complete=function(){var n=this.innerSubscription;(!n||n.closed)&&e.prototype._complete.call(this),this.unsubscribe()},r.prototype._unsubscribe=function(){this.innerSubscription=null},r.prototype.notifyComplete=function(n){var t=this.destination;t.remove(n),this.innerSubscription=null,this.isStopped&&e.prototype._complete.call(this)},r.prototype.notifyNext=function(n,t,i,o,c){this.destination.next(t)},r}(G);function Oe(){const e=((Q()*16|0)&3|8).toString(16);return`${m(8)}-${m(4)}-4${m(3)}-${e}${m(3)}-${m(12)}`}function m(e){return Array.from({length:e},()=>(Q()*16|0).toString(16)).join("")}function Q(){return window.crypto.getRandomValues(new Uint32Array(1))[0]/2**32}const Ue=e=>e==null;function Me(e,r){if(Ue(r)||Object.keys(r).length===0)return e;const n=new URLSearchParams(r).toString(),t=e.includes("?")?"&":"?";return`${e}${t}${n}`}function qe(e,r){const n=ke(e,r);return Me(n,e.searchParams)}function ke(e,r){const n=!Le(e.url),t=e.url!==r,i=r&&n&&t;let{url:o,params:c}=e;return c&&Object.entries(c).forEach(([u,s])=>{o=o.replace(`:${u}`,encodeURIComponent(s.toString()))}),i?o.startsWith("/")?`${r}${o}`:`${r}/${o}`:o}function Le(e){return/^(http:|https:)?\/\//i.test(e)}const je=e=>e>=P.Ok&&e<=P.MultipleChoices;class De{static get Instance(){return this._instance||(this._instance=new this)}constructor(){document.obgEventBus.listen(j.MakeRequest,async r=>{await de([new a(document.obgEventBus.retrieve(d.Config)).pipe(H(n=>n["svc-request"].baseUrl),y(1)),new a(document.obgEventBus.retrieve(d.BrandId)).pipe(y(1)),new a(document.obgEventBus.retrieve(d.MarketCode)).pipe(y(1)),new a(document.obgEventBus.retrieve(d.DeviceExperience)).pipe(y(1)),new a(document.obgEventBus.retrieve(d.CountryCode)).pipe(y(1)),new a(document.obgEventBus.retrieve(d.DeviceType)).pipe(y(1)),new a(document.obgEventBus.retrieve(L.SessionToken)).pipe(y(1))]).pipe(K(([n,t,i,o,c,u,s])=>{const h={method:r.method||"GET",headers:{"Content-Type":"application/json",brandId:t,marketCode:i,"X-OBG-Device":u,"X-OBG-Channel":o,"X-OBG-Country-Code":c,correlationId:Oe(),...r.headers||{}}};return s&&(h.headers.sessionToken=s),r.body&&(h.body=JSON.stringify(r.body)),r.credentials&&(h.credentials=r.credentials),W(fetch(qe(r,n),h).then(f=>{je(f.status)?r.onSuccess(f):(r.onError(f),f.json().then(Z=>console.error(Z)))}).catch(f=>{console.error(f),r.onError(f)}))})).toPromise()},{replay:D.all})}}document.obgEventBus&&De.Instance;
