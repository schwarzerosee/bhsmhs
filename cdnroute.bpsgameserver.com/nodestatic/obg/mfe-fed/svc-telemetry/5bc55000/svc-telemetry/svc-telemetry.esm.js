var Wi=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var Cc=Wi((Rc,ye)=>{var _e=(t=>(t.LogDebug="telemetry:logging:logDebug",t.LogInfo="telemetry:logging:logInfo",t.LogWarn="telemetry:logging:logWarn",t.LogError="telemetry:logging:logError",t.Track="telemetry:track",t.TrackWithCallback="telemetry:trackWithCallback",t))(_e||{}),ne=(t=>(t.HandleGlobalError="telemetry:globalExceptionHandler:handleGlobalError",t.TrackVirtualPageView="telemetry:trackVirtualPageView",t.ExperimentActivation="telemetry:experimentActivation",t.GetExperimentVariant="telemetry:getExperimentVariant",t.FrontendLogDebug="telemetry:frontendLogging:logDebug",t.FrontendLogInfo="telemetry:frontendLogging:logInfo",t.FrontendLogWarn="telemetry:frontendLogging:logWarn",t.FrontendLogError="telemetry:frontendLogging:logError",t.ConfigureGlobalTags="telemetry:frontendLogging:configureGlobalTags",t.StartTransaction="telemetry:frontendLogging:startTransaction",t))(ne||{});class Qr{static get Instance(){return this._instance||(this._instance=new this)}constructor(){document.obgEventBus.listen(ne.HandleGlobalError,this.handleError)}handleError(){return e=>{let r;const n=e.error;if(typeof n=="string"||n instanceof Error)r=n;else{const i=[];r=JSON.stringify(n,(s,a)=>{if(typeof a=="object"&&a!==null){if(i.indexOf(a)!==-1)return;i.push(a)}return a})}document.obgEventBus.dispatch(_e.LogError,{sourceId:Qr.name,method:"handleError",message:r,data:{error:n}})}}}class Gr extends Error{constructor(e,r){super(e),this.stack=r,Object.setPrototypeOf(this,Gr.prototype)}}var Y=(t=>(t.Debug="debug",t.Error="error",t.Info="info",t.Warn="warn",t))(Y||{});class qi{static get Instance(){return this._instance||(this._instance=new this)}constructor(){document.obgEventBus.listen(_e.LogDebug,e=>this.debug(e)),document.obgEventBus.listen(_e.LogError,e=>this.error(e)),document.obgEventBus.listen(_e.LogInfo,e=>this.info(e)),document.obgEventBus.listen(_e.LogWarn,e=>this.warn(e))}debug(e){this.log(Y.Debug,e)}error(e){this.log(Y.Error,e)}info(e){this.log(Y.Info,e)}warn(e){this.log(Y.Warn,e)}log(e,r){const n=console[e],i=this.getFormattedMessage(r);r.data?n(i,r.data):n(i)}getFormattedMessage(e){return e.message instanceof Error?new Gr(this.buildLogMessage(e),e.message.stack):this.buildLogMessage(e)}buildLogMessage({message:e,sourceId:r,method:n}){return e?`[${r}::${n}] ${e}`:`[${r}::${n}]`}}var Q=(t=>(t.Config="config.value",t.Jurisdiction="config.jurisdiction",t.AppVersion="config.appVersion",t.BrandId="config.brandId",t.BrandName="config.brandName",t.CountryCode="config.countryCode",t.DeviceType="config.deviceType",t.DeviceExperience="config.deviceExperience",t.IsBot="config.isBot",t.IsInternal="config.isInternal",t.IsSearchEngine="config.isSearchEngine",t.MarketCode="config.marketCode",t.AllowedFeatures="config.allowedFeatures",t.Environment="config.environment",t.FeatureFlags="config.featureFlags",t.IsServer="config.IsServer",t.IsBrowser="config.IsBrowser",t))(Q||{});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Fr=function(t,e){return Fr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},Fr(t,e)};function fr(t,e){Fr(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var R=function(){return R=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},R.apply(this,arguments)};function mn(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function er(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(o){a={error:o}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return s}function Be(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(er(arguments[e]));return t}var be;(function(t){t.Ok="ok",t.Exited="exited",t.Crashed="crashed",t.Abnormal="abnormal"})(be||(be={}));var vn;(function(t){t.Ok="ok",t.Errored="errored",t.Crashed="crashed"})(vn||(vn={}));var Z;(function(t){t.Fatal="fatal",t.Error="error",t.Warning="warning",t.Log="log",t.Info="info",t.Debug="debug",t.Critical="critical"})(Z||(Z={}));(function(t){function e(r){switch(r){case"debug":return t.Debug;case"info":return t.Info;case"warn":case"warning":return t.Warning;case"error":return t.Error;case"fatal":return t.Fatal;case"critical":return t.Critical;case"log":default:return t.Log}}t.fromString=e})(Z||(Z={}));var Re;(function(t){t.Unknown="unknown",t.Skipped="skipped",t.Success="success",t.RateLimit="rate_limit",t.Invalid="invalid",t.Failed="failed"})(Re||(Re={}));(function(t){function e(r){return r>=200&&r<300?t.Success:r===429?t.RateLimit:r>=400&&r<500?t.Invalid:r>=500?t.Failed:t.Unknown}t.fromHttpCode=e})(Re||(Re={}));var Ke;(function(t){t.Explicit="explicitly_set",t.Sampler="client_sampler",t.Rate="client_rate",t.Inheritance="inheritance"})(Ke||(Ke={}));var re;(function(t){t.BeforeSend="before_send",t.EventProcessor="event_processor",t.NetworkError="network_error",t.QueueOverflow="queue_overflow",t.RateLimitBackoff="ratelimit_backoff",t.SampleRate="sample_rate"})(re||(re={}));/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var tr=function(){return tr=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},tr.apply(this,arguments)};function zi(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(o){a={error:o}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return s}function Yi(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(zi(arguments[e]));return t}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var y=function(){return y=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},y.apply(this,arguments)};function Vi(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(o){a={error:o}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return s}function Ye(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Vi(arguments[e]));return t}function Ji(t){t.then(null,function(e){console.error(e)})}function qn(t){switch(Object.prototype.toString.call(t)){case"[object Error]":return!0;case"[object Exception]":return!0;case"[object DOMException]":return!0;default:return fe(t,Error)}}function zn(t){return Object.prototype.toString.call(t)==="[object ErrorEvent]"}function _n(t){return Object.prototype.toString.call(t)==="[object DOMError]"}function Ki(t){return Object.prototype.toString.call(t)==="[object DOMException]"}function tt(t){return Object.prototype.toString.call(t)==="[object String]"}function pr(t){return t===null||typeof t!="object"&&typeof t!="function"}function rt(t){return Object.prototype.toString.call(t)==="[object Object]"}function en(t){return typeof Event<"u"&&fe(t,Event)}function yn(t){return typeof Element<"u"&&fe(t,Element)}function Xi(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function jt(t){return!!(t&&t.then&&typeof t.then=="function")}function Qi(t){return rt(t)&&"nativeEvent"in t&&"preventDefault"in t&&"stopPropagation"in t}function fe(t,e){try{return t instanceof e}catch{return!1}}function nt(t,e){try{for(var r=t,n=5,i=80,s=[],a=0,o=0,u=" > ",c=u.length,l=void 0;r&&a++<n&&(l=Gi(r,e),!(l==="html"||a>1&&o+s.length*c+l.length>=i));)s.push(l),o+=l.length,r=r.parentNode;return s.reverse().join(u)}catch{return"<unknown>"}}function Gi(t,e){var r,n,i=t,s=[],a,o,u,c,l;if(!i||!i.tagName)return"";s.push(i.tagName.toLowerCase());var d=!((r=e)===null||r===void 0)&&r.length?e.filter(function(v){return i.getAttribute(v)}).map(function(v){return[v,i.getAttribute(v)]}):null;if(!((n=d)===null||n===void 0)&&n.length)d.forEach(function(v){s.push("["+v[0]+'="'+v[1]+'"]')});else if(i.id&&s.push("#"+i.id),a=i.className,a&&tt(a))for(o=a.split(/\s+/),l=0;l<o.length;l++)s.push("."+o[l]);var p=["type","name","title","alt"];for(l=0;l<p.length;l++)u=p[l],c=i.getAttribute(u),c&&s.push("["+u+'="'+c+'"]');return s.join("")}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Mr=function(t,e){return Mr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},Mr(t,e)};function es(t,e){Mr(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Ae=function(){return Ae=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Ae.apply(this,arguments)};function Yn(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ts(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(o){a={error:o}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return s}var rs=Object.setPrototypeOf||({__proto__:[]}instanceof Array?ns:is);function ns(t,e){return t.__proto__=e,t}function is(t,e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r]);return t}var A=function(t){es(e,t);function e(r){var n=this.constructor,i=t.call(this,r)||this;return i.message=r,i.name=n.prototype.constructor.name,rs(i,n.prototype),i}return e}(Error),ss=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+))?@)([\w.-]+)(?::(\d+))?\/(.+)/,lt="Invalid Dsn",Vn=function(){function t(e){typeof e=="string"?this._fromString(e):this._fromComponents(e),this._validate()}return t.prototype.toString=function(e){e===void 0&&(e=!1);var r=this,n=r.host,i=r.path,s=r.pass,a=r.port,o=r.projectId,u=r.protocol,c=r.publicKey;return u+"://"+c+(e&&s?":"+s:"")+("@"+n+(a?":"+a:"")+"/"+(i&&i+"/")+o)},t.prototype._fromString=function(e){var r=ss.exec(e);if(!r)throw new A(lt);var n=ts(r.slice(1),6),i=n[0],s=n[1],a=n[2],o=a===void 0?"":a,u=n[3],c=n[4],l=c===void 0?"":c,d=n[5],p="",v=d,T=v.split("/");if(T.length>1&&(p=T.slice(0,-1).join("/"),v=T.pop()),v){var x=v.match(/^\d+/);x&&(v=x[0])}this._fromComponents({host:u,pass:o,path:p,projectId:v,port:l,protocol:i,publicKey:s})},t.prototype._fromComponents=function(e){"user"in e&&!("publicKey"in e)&&(e.publicKey=e.user),this.user=e.publicKey||"",this.protocol=e.protocol,this.publicKey=e.publicKey||"",this.pass=e.pass||"",this.host=e.host,this.port=e.port||"",this.path=e.path||"",this.projectId=e.projectId},t.prototype._validate=function(){var e=this;if(["protocol","publicKey","host","projectId"].forEach(function(r){if(!e[r])throw new A(lt+": "+r+" missing")}),!this.projectId.match(/^\d+$/))throw new A(lt+": Invalid projectId "+this.projectId);if(this.protocol!=="http"&&this.protocol!=="https")throw new A(lt+": Invalid protocol "+this.protocol);if(this.port&&isNaN(parseInt(this.port,10)))throw new A(lt+": Invalid port "+this.port)},t}();function Bt(){return Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]"}function xe(t,e){return t.require(e)}function hr(t){var e;try{e=xe(ye,t)}catch{}try{var r=xe(ye,"process").cwd;e=xe(ye,r()+"/node_modules/"+t)}catch{}return e}function gt(t,e){return e===void 0&&(e=0),typeof t!="string"||e===0||t.length<=e?t:t.substr(0,e)+"..."}function bn(t,e){if(!Array.isArray(t))return"";for(var r=[],n=0;n<t.length;n++){var i=t[n];try{r.push(String(i))}catch{r.push("[value cannot be serialized]")}}return r.join(e)}function mt(t,e){return tt(t)?Xi(e)?e.test(t):typeof e=="string"?t.indexOf(e)!==-1:!1:!1}var as={};function I(){return Bt()?global:typeof window<"u"?window:typeof self<"u"?self:as}function Ce(){var t=I(),e=t.crypto||t.msCrypto;if(e!==void 0&&e.getRandomValues){var r=new Uint16Array(8);e.getRandomValues(r),r[3]=r[3]&4095|16384,r[4]=r[4]&16383|32768;var n=function(i){for(var s=i.toString(16);s.length<4;)s="0"+s;return s};return n(r[0])+n(r[1])+n(r[2])+n(r[3])+n(r[4])+n(r[5])+n(r[6])+n(r[7])}return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(i){var s=Math.random()*16|0,a=i==="x"?s:s&3|8;return a.toString(16)})}function wr(t){if(!t)return{};var e=t.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!e)return{};var r=e[6]||"",n=e[8]||"";return{host:e[4],path:e[5],protocol:e[2],relative:e[5]+r+n}}function je(t){if(t.message)return t.message;if(t.exception&&t.exception.values&&t.exception.values[0]){var e=t.exception.values[0];return e.type&&e.value?e.type+": "+e.value:e.type||e.value||t.event_id||"<unknown>"}return t.event_id||"<unknown>"}function Kt(t){var e=I(),r=["debug","info","warn","error","log","assert"];if(!("console"in e))return t();var n=e.console,i={};r.forEach(function(a){a in e.console&&n[a].__sentry_original__&&(i[a]=n[a],n[a]=n[a].__sentry_original__)});var s=t();return Object.keys(i).forEach(function(a){n[a]=i[a]}),s}function jr(t,e,r){t.exception=t.exception||{},t.exception.values=t.exception.values||[],t.exception.values[0]=t.exception.values[0]||{},t.exception.values[0].value=t.exception.values[0].value||e||"",t.exception.values[0].type=t.exception.values[0].type||r||"Error"}function it(t,e){e===void 0&&(e={});try{t.exception.values[0].mechanism=t.exception.values[0].mechanism||{},Object.keys(e).forEach(function(r){t.exception.values[0].mechanism[r]=e[r]})}catch{}}function os(){var t=I();try{return t.document.location.href}catch{return""}}var Sn=60*1e3;function us(t,e){if(!e)return Sn;var r=parseInt(""+e,10);if(!isNaN(r))return r*1e3;var n=Date.parse(""+e);return isNaN(n)?Sn:n-t}var Le=I(),Tr="Sentry Logger ",cs=function(){function t(){this._enabled=!1}return t.prototype.disable=function(){this._enabled=!1},t.prototype.enable=function(){this._enabled=!0},t.prototype.log=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this._enabled&&Kt(function(){Le.console.log(Tr+"[Log]: "+e.join(" "))})},t.prototype.warn=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this._enabled&&Kt(function(){Le.console.warn(Tr+"[Warn]: "+e.join(" "))})},t.prototype.error=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this._enabled&&Kt(function(){Le.console.error(Tr+"[Error]: "+e.join(" "))})},t}();Le.__SENTRY__=Le.__SENTRY__||{};var h=Le.__SENTRY__.logger||(Le.__SENTRY__.logger=new cs),ls=function(){function t(){this._hasWeakSet=typeof WeakSet=="function",this._inner=this._hasWeakSet?new WeakSet:[]}return t.prototype.memoize=function(e){if(this._hasWeakSet)return this._inner.has(e)?!0:(this._inner.add(e),!1);for(var r=0;r<this._inner.length;r++){var n=this._inner[r];if(n===e)return!0}return this._inner.push(e),!1},t.prototype.unmemoize=function(e){if(this._hasWeakSet)this._inner.delete(e);else for(var r=0;r<this._inner.length;r++)if(this._inner[r]===e){this._inner.splice(r,1);break}},t}(),Er="<anonymous>";function Ee(t){try{return!t||typeof t!="function"?Er:t.name||Er}catch{return Er}}function D(t,e,r){if(e in t){var n=t[e],i=r(n);if(typeof i=="function")try{i.prototype=i.prototype||{},Object.defineProperties(i,{__sentry_original__:{enumerable:!1,value:n}})}catch{}t[e]=i}}function ds(t){return Object.keys(t).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])}).join("&")}function Jn(t){if(qn(t)){var e=t,r={message:e.message,name:e.name,stack:e.stack};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}if(en(t)){var i=t,s={};s.type=i.type;try{s.target=yn(i.target)?nt(i.target):Object.prototype.toString.call(i.target)}catch{s.target="<unknown>"}try{s.currentTarget=yn(i.currentTarget)?nt(i.currentTarget):Object.prototype.toString.call(i.currentTarget)}catch{s.currentTarget="<unknown>"}typeof CustomEvent<"u"&&fe(t,CustomEvent)&&(s.detail=i.detail);for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(s[a]=i[a]);return s}return t}function fs(t){return~-encodeURI(t).split(/%..|./).length}function ps(t){return fs(JSON.stringify(t))}function Kn(t,e,r){e===void 0&&(e=3),r===void 0&&(r=100*1024);var n=Ve(t,e);return ps(n)>r?Kn(t,e-1,r):n}function hs(t){var e=Object.prototype.toString.call(t);if(typeof t=="string")return t;if(e==="[object Object]")return"[Object]";if(e==="[object Array]")return"[Array]";var r=Xn(t);return pr(r)?r:e}function Xn(t,e){return e==="domain"&&t&&typeof t=="object"&&t._events?"[Domain]":e==="domainEmitter"?"[DomainEmitter]":typeof global<"u"&&t===global?"[Global]":typeof window<"u"&&t===window?"[Window]":typeof document<"u"&&t===document?"[Document]":Qi(t)?"[SyntheticEvent]":typeof t=="number"&&t!==t?"[NaN]":t===void 0?"[undefined]":typeof t=="function"?"[Function: "+Ee(t)+"]":typeof t=="symbol"?"["+String(t)+"]":typeof t=="bigint"?"[BigInt: "+String(t)+"]":t}function Qn(t,e,r,n){if(r===void 0&&(r=1/0),n===void 0&&(n=new ls),r===0)return hs(e);if(e!=null&&typeof e.toJSON=="function")return e.toJSON();var i=Xn(e,t);if(pr(i))return i;var s=Jn(e),a=Array.isArray(e)?[]:{};if(n.memoize(e))return"[Circular ~]";for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(a[o]=Qn(o,s[o],r-1,n));return n.unmemoize(e),a}function Ve(t,e){try{return JSON.parse(JSON.stringify(t,function(r,n){return Qn(r,n,e)}))}catch{return"**non-serializable**"}}function gs(t,e){e===void 0&&(e=40);var r=Object.keys(Jn(t));if(r.sort(),!r.length)return"[object has no keys]";if(r[0].length>=e)return gt(r[0],e);for(var n=r.length;n>0;n--){var i=r.slice(0,n).join(", ");if(!(i.length>e))return n===r.length?i:gt(i,e)}return""}function Ie(t){var e,r;if(rt(t)){var n=t,i={};try{for(var s=Yn(Object.keys(n)),a=s.next();!a.done;a=s.next()){var o=a.value;typeof n[o]<"u"&&(i[o]=Ie(n[o]))}}catch(u){e={error:u}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return i}return Array.isArray(t)?t.map(Ie):t}function gr(){if(!("fetch"in I()))return!1;try{return new Headers,new Request(""),new Response,!0}catch{return!1}}function Br(t){return t&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(t.toString())}function ms(){if(!gr())return!1;var t=I();if(Br(t.fetch))return!0;var e=!1,r=t.document;if(r&&typeof r.createElement=="function")try{var n=r.createElement("iframe");n.hidden=!0,r.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(e=Br(n.contentWindow.fetch)),r.head.removeChild(n)}catch(i){h.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",i)}return e}function vs(){if(!gr())return!1;try{return new Request("_",{referrerPolicy:"origin"}),!0}catch{return!1}}function _s(){var t=I(),e=t.chrome,r=e&&e.app&&e.app.runtime,n="history"in t&&!!t.history.pushState&&!!t.history.replaceState;return!r&&n}var j=I(),vt={},kn={};function ys(t){if(!kn[t])switch(kn[t]=!0,t){case"console":bs();break;case"dom":Is();break;case"xhr":Ts();break;case"fetch":Ss();break;case"history":Es();break;case"error":Rs();break;case"unhandledrejection":Ps();break;default:h.warn("unknown instrumentation type:",t)}}function G(t){!t||typeof t.type!="string"||typeof t.callback!="function"||(vt[t.type]=vt[t.type]||[],vt[t.type].push(t.callback),ys(t.type))}function ae(t,e){var r,n;if(!(!t||!vt[t]))try{for(var i=Yn(vt[t]||[]),s=i.next();!s.done;s=i.next()){var a=s.value;try{a(e)}catch(o){h.error(`Error while triggering instrumentation handler.
Type: `+t+`
Name: `+Ee(a)+`
Error: `+o)}}}catch(o){r={error:o}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}}function bs(){"console"in j&&["debug","info","warn","error","log","assert"].forEach(function(t){t in j.console&&D(j.console,t,function(e){return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];ae("console",{args:r,level:t}),e&&Function.prototype.apply.call(e,j.console,r)}})})}function Ss(){ms()&&D(j,"fetch",function(t){return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n={args:e,fetchData:{method:ks(e),url:ws(e)},startTimestamp:Date.now()};return ae("fetch",Ae({},n)),t.apply(j,e).then(function(i){return ae("fetch",Ae(Ae({},n),{endTimestamp:Date.now(),response:i})),i},function(i){throw ae("fetch",Ae(Ae({},n),{endTimestamp:Date.now(),error:i})),i})}})}function ks(t){return t===void 0&&(t=[]),"Request"in j&&fe(t[0],Request)&&t[0].method?String(t[0].method).toUpperCase():t[1]&&t[1].method?String(t[1].method).toUpperCase():"GET"}function ws(t){return t===void 0&&(t=[]),typeof t[0]=="string"?t[0]:"Request"in j&&fe(t[0],Request)?t[0].url:String(t[0])}function Ts(){if("XMLHttpRequest"in j){var t=[],e=[],r=XMLHttpRequest.prototype;D(r,"open",function(n){return function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];var a=this,o=i[1];a.__sentry_xhr__={method:tt(i[0])?i[0].toUpperCase():i[0],url:i[1]},tt(o)&&a.__sentry_xhr__.method==="POST"&&o.match(/sentry_key/)&&(a.__sentry_own_request__=!0);var u=function(){if(a.readyState===4){try{a.__sentry_xhr__&&(a.__sentry_xhr__.status_code=a.status)}catch{}try{var c=t.indexOf(a);if(c!==-1){t.splice(c);var l=e.splice(c)[0];a.__sentry_xhr__&&l[0]!==void 0&&(a.__sentry_xhr__.body=l[0])}}catch{}ae("xhr",{args:i,endTimestamp:Date.now(),startTimestamp:Date.now(),xhr:a})}};return"onreadystatechange"in a&&typeof a.onreadystatechange=="function"?D(a,"onreadystatechange",function(c){return function(){for(var l=[],d=0;d<arguments.length;d++)l[d]=arguments[d];return u(),c.apply(a,l)}}):a.addEventListener("readystatechange",u),n.apply(a,i)}}),D(r,"send",function(n){return function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];return t.push(this),e.push(i),ae("xhr",{args:i,startTimestamp:Date.now(),xhr:this}),n.apply(this,i)}})}}var Zt;function Es(){if(!_s())return;var t=j.onpopstate;j.onpopstate=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var i=j.location.href,s=Zt;if(Zt=i,ae("history",{from:s,to:i}),t)try{return t.apply(this,r)}catch{}};function e(r){return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var s=n.length>2?n[2]:void 0;if(s){var a=Zt,o=String(s);Zt=o,ae("history",{from:a,to:o})}return r.apply(this,n)}}D(j.history,"pushState",e),D(j.history,"replaceState",e)}var Os=1e3,$t,Wt;function xs(t,e){if(!t||t.type!==e.type)return!0;try{if(t.target!==e.target)return!0}catch{}return!1}function Cs(t){if(t.type!=="keypress")return!1;try{var e=t.target;if(!e||!e.tagName)return!0;if(e.tagName==="INPUT"||e.tagName==="TEXTAREA"||e.isContentEditable)return!1}catch{}return!0}function wn(t,e){return e===void 0&&(e=!1),function(r){if(!(!r||Wt===r)&&!Cs(r)){var n=r.type==="keypress"?"input":r.type;$t===void 0?(t({event:r,name:n,global:e}),Wt=r):xs(Wt,r)&&(t({event:r,name:n,global:e}),Wt=r),clearTimeout($t),$t=j.setTimeout(function(){$t=void 0},Os)}}}function Is(){if("document"in j){var t=ae.bind(null,"dom"),e=wn(t,!0);j.document.addEventListener("click",e,!1),j.document.addEventListener("keypress",e,!1),["EventTarget","Node"].forEach(function(r){var n=j[r]&&j[r].prototype;!n||!n.hasOwnProperty||!n.hasOwnProperty("addEventListener")||(D(n,"addEventListener",function(i){return function(s,a,o){if(s==="click"||s=="keypress")try{var u=this,c=u.__sentry_instrumentation_handlers__=u.__sentry_instrumentation_handlers__||{},l=c[s]=c[s]||{refCount:0};if(!l.handler){var d=wn(t);l.handler=d,i.call(this,s,d,o)}l.refCount+=1}catch{}return i.call(this,s,a,o)}}),D(n,"removeEventListener",function(i){return function(s,a,o){if(s==="click"||s=="keypress")try{var u=this,c=u.__sentry_instrumentation_handlers__||{},l=c[s];l&&(l.refCount-=1,l.refCount<=0&&(i.call(this,s,l.handler,o),l.handler=void 0,delete c[s]),Object.keys(c).length===0&&delete u.__sentry_instrumentation_handlers__)}catch{}return i.call(this,s,a,o)}}))})}}var Or=null;function Rs(){Or=j.onerror,j.onerror=function(t,e,r,n,i){return ae("error",{column:n,error:i,line:r,msg:t,url:e}),Or?Or.apply(this,arguments):!1}}var xr=null;function Ps(){xr=j.onunhandledrejection,j.onunhandledrejection=function(t){return ae("unhandledrejection",t),xr?xr.apply(this,arguments):!0}}var me;(function(t){t.PENDING="PENDING",t.RESOLVED="RESOLVED",t.REJECTED="REJECTED"})(me||(me={}));var $=function(){function t(e){var r=this;this._state=me.PENDING,this._handlers=[],this._resolve=function(n){r._setResult(me.RESOLVED,n)},this._reject=function(n){r._setResult(me.REJECTED,n)},this._setResult=function(n,i){if(r._state===me.PENDING){if(jt(i)){i.then(r._resolve,r._reject);return}r._state=n,r._value=i,r._executeHandlers()}},this._attachHandler=function(n){r._handlers=r._handlers.concat(n),r._executeHandlers()},this._executeHandlers=function(){if(r._state!==me.PENDING){var n=r._handlers.slice();r._handlers=[],n.forEach(function(i){i.done||(r._state===me.RESOLVED&&i.onfulfilled&&i.onfulfilled(r._value),r._state===me.REJECTED&&i.onrejected&&i.onrejected(r._value),i.done=!0)})}};try{e(this._resolve,this._reject)}catch(n){this._reject(n)}}return t.resolve=function(e){return new t(function(r){r(e)})},t.reject=function(e){return new t(function(r,n){n(e)})},t.all=function(e){return new t(function(r,n){if(!Array.isArray(e)){n(new TypeError("Promise.all requires an array as input."));return}if(e.length===0){r([]);return}var i=e.length,s=[];e.forEach(function(a,o){t.resolve(a).then(function(u){s[o]=u,i-=1,i===0&&r(s)}).then(null,n)})})},t.prototype.then=function(e,r){var n=this;return new t(function(i,s){n._attachHandler({done:!1,onfulfilled:function(a){if(!e){i(a);return}try{i(e(a));return}catch(o){s(o);return}},onrejected:function(a){if(!r){s(a);return}try{i(r(a));return}catch(o){s(o);return}}})})},t.prototype.catch=function(e){return this.then(function(r){return r},e)},t.prototype.finally=function(e){var r=this;return new t(function(n,i){var s,a;return r.then(function(o){a=!1,s=o,e&&e()},function(o){a=!0,s=o,e&&e()}).then(function(){if(a){i(s);return}n(s)})})},t.prototype.toString=function(){return"[object SyncPromise]"},t}(),Ns=function(){function t(e){this._limit=e,this._buffer=[]}return t.prototype.isReady=function(){return this._limit===void 0||this.length()<this._limit},t.prototype.add=function(e){var r=this;if(!this.isReady())return $.reject(new A("Not adding Promise due to buffer limit reached."));var n=e();return this._buffer.indexOf(n)===-1&&this._buffer.push(n),n.then(function(){return r.remove(n)}).then(null,function(){return r.remove(n).then(null,function(){})}),n},t.prototype.remove=function(e){var r=this._buffer.splice(this._buffer.indexOf(e),1)[0];return r},t.prototype.length=function(){return this._buffer.length},t.prototype.drain=function(e){var r=this;return new $(function(n){var i=setTimeout(function(){e&&e>0&&n(!1)},e);$.all(r._buffer).then(function(){clearTimeout(i),n(!0)}).then(null,function(){n(!0)})})},t}(),Ar={nowSeconds:function(){return Date.now()/1e3}};function Fs(){var t=I().performance;if(!(!t||!t.now)){var e=Date.now()-t.now();return{now:function(){return t.now()},timeOrigin:e}}}function Ms(){try{var t=xe(ye,"perf_hooks");return t.performance}catch{return}}var Cr=Bt()?Ms():Fs(),Tn=Cr===void 0?Ar:{nowSeconds:function(){return(Cr.timeOrigin+Cr.now())/1e3}},mr=Ar.nowSeconds.bind(Ar),Dr=Tn.nowSeconds.bind(Tn),_t=Dr,dt=function(){var t=I().performance;if(!(!t||!t.now)){var e=3600*1e3,r=t.now(),n=Date.now(),i=t.timeOrigin?Math.abs(t.timeOrigin+r-n):e,s=i<e,a=t.timing&&t.timing.navigationStart,o=typeof a=="number",u=o?Math.abs(a+r-n):e,c=u<e;return s||c?i<=u?t.timeOrigin:a:n}}(),En=100,yt=function(){function t(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._user={},this._tags={},this._extra={},this._contexts={}}return t.clone=function(e){var r=new t;return e&&(r._breadcrumbs=Ye(e._breadcrumbs),r._tags=y({},e._tags),r._extra=y({},e._extra),r._contexts=y({},e._contexts),r._user=e._user,r._level=e._level,r._span=e._span,r._session=e._session,r._transactionName=e._transactionName,r._fingerprint=e._fingerprint,r._eventProcessors=Ye(e._eventProcessors),r._requestSession=e._requestSession),r},t.prototype.addScopeListener=function(e){this._scopeListeners.push(e)},t.prototype.addEventProcessor=function(e){return this._eventProcessors.push(e),this},t.prototype.setUser=function(e){return this._user=e||{},this._session&&this._session.update({user:e}),this._notifyScopeListeners(),this},t.prototype.getUser=function(){return this._user},t.prototype.getRequestSession=function(){return this._requestSession},t.prototype.setRequestSession=function(e){return this._requestSession=e,this},t.prototype.setTags=function(e){return this._tags=y(y({},this._tags),e),this._notifyScopeListeners(),this},t.prototype.setTag=function(e,r){var n;return this._tags=y(y({},this._tags),(n={},n[e]=r,n)),this._notifyScopeListeners(),this},t.prototype.setExtras=function(e){return this._extra=y(y({},this._extra),e),this._notifyScopeListeners(),this},t.prototype.setExtra=function(e,r){var n;return this._extra=y(y({},this._extra),(n={},n[e]=r,n)),this._notifyScopeListeners(),this},t.prototype.setFingerprint=function(e){return this._fingerprint=e,this._notifyScopeListeners(),this},t.prototype.setLevel=function(e){return this._level=e,this._notifyScopeListeners(),this},t.prototype.setTransactionName=function(e){return this._transactionName=e,this._notifyScopeListeners(),this},t.prototype.setTransaction=function(e){return this.setTransactionName(e)},t.prototype.setContext=function(e,r){var n;return r===null?delete this._contexts[e]:this._contexts=y(y({},this._contexts),(n={},n[e]=r,n)),this._notifyScopeListeners(),this},t.prototype.setSpan=function(e){return this._span=e,this._notifyScopeListeners(),this},t.prototype.getSpan=function(){return this._span},t.prototype.getTransaction=function(){var e,r,n,i,s=this.getSpan();if(!((e=s)===null||e===void 0)&&e.transaction)return(r=s)===null||r===void 0?void 0:r.transaction;if(!((i=(n=s)===null||n===void 0?void 0:n.spanRecorder)===null||i===void 0)&&i.spans[0])return s.spanRecorder.spans[0]},t.prototype.setSession=function(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this},t.prototype.getSession=function(){return this._session},t.prototype.update=function(e){if(!e)return this;if(typeof e=="function"){var r=e(this);return r instanceof t?r:this}return e instanceof t?(this._tags=y(y({},this._tags),e._tags),this._extra=y(y({},this._extra),e._extra),this._contexts=y(y({},this._contexts),e._contexts),e._user&&Object.keys(e._user).length&&(this._user=e._user),e._level&&(this._level=e._level),e._fingerprint&&(this._fingerprint=e._fingerprint),e._requestSession&&(this._requestSession=e._requestSession)):rt(e)&&(e=e,this._tags=y(y({},this._tags),e.tags),this._extra=y(y({},this._extra),e.extra),this._contexts=y(y({},this._contexts),e.contexts),e.user&&(this._user=e.user),e.level&&(this._level=e.level),e.fingerprint&&(this._fingerprint=e.fingerprint),e.requestSession&&(this._requestSession=e.requestSession)),this},t.prototype.clear=function(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this},t.prototype.addBreadcrumb=function(e,r){var n=typeof r=="number"?Math.min(r,En):En;if(n<=0)return this;var i=y({timestamp:mr()},e);return this._breadcrumbs=Ye(this._breadcrumbs,[i]).slice(-n),this._notifyScopeListeners(),this},t.prototype.clearBreadcrumbs=function(){return this._breadcrumbs=[],this._notifyScopeListeners(),this},t.prototype.applyToEvent=function(e,r){var n;if(this._extra&&Object.keys(this._extra).length&&(e.extra=y(y({},this._extra),e.extra)),this._tags&&Object.keys(this._tags).length&&(e.tags=y(y({},this._tags),e.tags)),this._user&&Object.keys(this._user).length&&(e.user=y(y({},this._user),e.user)),this._contexts&&Object.keys(this._contexts).length&&(e.contexts=y(y({},this._contexts),e.contexts)),this._level&&(e.level=this._level),this._transactionName&&(e.transaction=this._transactionName),this._span){e.contexts=y({trace:this._span.getTraceContext()},e.contexts);var i=(n=this._span.transaction)===null||n===void 0?void 0:n.name;i&&(e.tags=y({transaction:i},e.tags))}return this._applyFingerprint(e),e.breadcrumbs=Ye(e.breadcrumbs||[],this._breadcrumbs),e.breadcrumbs=e.breadcrumbs.length>0?e.breadcrumbs:void 0,this._notifyEventProcessors(Ye(Gn(),this._eventProcessors),e,r)},t.prototype._notifyEventProcessors=function(e,r,n,i){var s=this;return i===void 0&&(i=0),new $(function(a,o){var u=e[i];if(r===null||typeof u!="function")a(r);else{var c=u(y({},r),n);jt(c)?c.then(function(l){return s._notifyEventProcessors(e,l,n,i+1).then(a)}).then(null,o):s._notifyEventProcessors(e,c,n,i+1).then(a).then(null,o)}})},t.prototype._notifyScopeListeners=function(){var e=this;this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(function(r){r(e)}),this._notifyingListeners=!1)},t.prototype._applyFingerprint=function(e){e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[],this._fingerprint&&(e.fingerprint=e.fingerprint.concat(this._fingerprint)),e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint},t}();function Gn(){var t=I();return t.__SENTRY__=t.__SENTRY__||{},t.__SENTRY__.globalEventProcessors=t.__SENTRY__.globalEventProcessors||[],t.__SENTRY__.globalEventProcessors}function At(t){Gn().push(t)}var js=function(){function t(e){this.errors=0,this.sid=Ce(),this.duration=0,this.status=be.Ok,this.init=!0,this.ignoreDuration=!1;var r=Dr();this.timestamp=r,this.started=r,e&&this.update(e)}return t.prototype.update=function(e){if(e===void 0&&(e={}),e.user&&(!this.ipAddress&&e.user.ip_address&&(this.ipAddress=e.user.ip_address),!this.did&&!e.did&&(this.did=e.user.id||e.user.email||e.user.username)),this.timestamp=e.timestamp||Dr(),e.ignoreDuration&&(this.ignoreDuration=e.ignoreDuration),e.sid&&(this.sid=e.sid.length===32?e.sid:Ce()),e.init!==void 0&&(this.init=e.init),!this.did&&e.did&&(this.did=""+e.did),typeof e.started=="number"&&(this.started=e.started),this.ignoreDuration)this.duration=void 0;else if(typeof e.duration=="number")this.duration=e.duration;else{var r=this.timestamp-this.started;this.duration=r>=0?r:0}e.release&&(this.release=e.release),e.environment&&(this.environment=e.environment),!this.ipAddress&&e.ipAddress&&(this.ipAddress=e.ipAddress),!this.userAgent&&e.userAgent&&(this.userAgent=e.userAgent),typeof e.errors=="number"&&(this.errors=e.errors),e.status&&(this.status=e.status)},t.prototype.close=function(e){e?this.update({status:e}):this.status===be.Ok?this.update({status:be.Exited}):this.update()},t.prototype.toJSON=function(){return Ie({sid:""+this.sid,init:this.init,started:new Date(this.started*1e3).toISOString(),timestamp:new Date(this.timestamp*1e3).toISOString(),status:this.status,errors:this.errors,did:typeof this.did=="number"||typeof this.did=="string"?""+this.did:void 0,duration:this.duration,attrs:Ie({release:this.release,environment:this.environment,ip_address:this.ipAddress,user_agent:this.userAgent})})},t}(),tn=4,Bs=100,Dt=function(){function t(e,r,n){r===void 0&&(r=new yt),n===void 0&&(n=tn),this._version=n,this._stack=[{}],this.getStackTop().scope=r,e&&this.bindClient(e)}return t.prototype.isOlderThan=function(e){return this._version<e},t.prototype.bindClient=function(e){var r=this.getStackTop();r.client=e,e&&e.setupIntegrations&&e.setupIntegrations()},t.prototype.pushScope=function(){var e=yt.clone(this.getScope());return this.getStack().push({client:this.getClient(),scope:e}),e},t.prototype.popScope=function(){return this.getStack().length<=1?!1:!!this.getStack().pop()},t.prototype.withScope=function(e){var r=this.pushScope();try{e(r)}finally{this.popScope()}},t.prototype.getClient=function(){return this.getStackTop().client},t.prototype.getScope=function(){return this.getStackTop().scope},t.prototype.getStack=function(){return this._stack},t.prototype.getStackTop=function(){return this._stack[this._stack.length-1]},t.prototype.captureException=function(e,r){var n=this._lastEventId=Ce(),i=r;if(!r){var s=void 0;try{throw new Error("Sentry syntheticException")}catch(a){s=a}i={originalException:e,syntheticException:s}}return this._invokeClient("captureException",e,y(y({},i),{event_id:n})),n},t.prototype.captureMessage=function(e,r,n){var i=this._lastEventId=Ce(),s=n;if(!n){var a=void 0;try{throw new Error(e)}catch(o){a=o}s={originalException:e,syntheticException:a}}return this._invokeClient("captureMessage",e,r,y(y({},s),{event_id:i})),i},t.prototype.captureEvent=function(e,r){var n=Ce();return e.type!=="transaction"&&(this._lastEventId=n),this._invokeClient("captureEvent",e,y(y({},r),{event_id:n})),n},t.prototype.lastEventId=function(){return this._lastEventId},t.prototype.addBreadcrumb=function(e,r){var n=this.getStackTop(),i=n.scope,s=n.client;if(!(!i||!s)){var a=s.getOptions&&s.getOptions()||{},o=a.beforeBreadcrumb,u=o===void 0?null:o,c=a.maxBreadcrumbs,l=c===void 0?Bs:c;if(!(l<=0)){var d=mr(),p=y({timestamp:d},e),v=u?Kt(function(){return u(p,r)}):p;v!==null&&i.addBreadcrumb(v,l)}}},t.prototype.setUser=function(e){var r=this.getScope();r&&r.setUser(e)},t.prototype.setTags=function(e){var r=this.getScope();r&&r.setTags(e)},t.prototype.setExtras=function(e){var r=this.getScope();r&&r.setExtras(e)},t.prototype.setTag=function(e,r){var n=this.getScope();n&&n.setTag(e,r)},t.prototype.setExtra=function(e,r){var n=this.getScope();n&&n.setExtra(e,r)},t.prototype.setContext=function(e,r){var n=this.getScope();n&&n.setContext(e,r)},t.prototype.configureScope=function(e){var r=this.getStackTop(),n=r.scope,i=r.client;n&&i&&e(n)},t.prototype.run=function(e){var r=Ur(this);try{e(this)}finally{Ur(r)}},t.prototype.getIntegration=function(e){var r=this.getClient();if(!r)return null;try{return r.getIntegration(e)}catch{return h.warn("Cannot retrieve integration "+e.id+" from the current Hub"),null}},t.prototype.startSpan=function(e){return this._callExtensionMethod("startSpan",e)},t.prototype.startTransaction=function(e,r){return this._callExtensionMethod("startTransaction",e,r)},t.prototype.traceHeaders=function(){return this._callExtensionMethod("traceHeaders")},t.prototype.captureSession=function(e){if(e===void 0&&(e=!1),e)return this.endSession();this._sendSessionUpdate()},t.prototype.endSession=function(){var e,r,n,i,s;(n=(r=(e=this.getStackTop())===null||e===void 0?void 0:e.scope)===null||r===void 0?void 0:r.getSession())===null||n===void 0||n.close(),this._sendSessionUpdate(),(s=(i=this.getStackTop())===null||i===void 0?void 0:i.scope)===null||s===void 0||s.setSession()},t.prototype.startSession=function(e){var r=this.getStackTop(),n=r.scope,i=r.client,s=i&&i.getOptions()||{},a=s.release,o=s.environment,u=I(),c=(u.navigator||{}).userAgent,l=new js(y(y(y({release:a,environment:o},n&&{user:n.getUser()}),c&&{userAgent:c}),e));if(n){var d=n.getSession&&n.getSession();d&&d.status===be.Ok&&d.update({status:be.Exited}),this.endSession(),n.setSession(l)}return l},t.prototype._sendSessionUpdate=function(){var e=this.getStackTop(),r=e.scope,n=e.client;if(r){var i=r.getSession&&r.getSession();i&&n&&n.captureSession&&n.captureSession(i)}},t.prototype._invokeClient=function(e){for(var r,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var s=this.getStackTop(),a=s.scope,o=s.client;o&&o[e]&&(r=o)[e].apply(r,Ye(n,[a]))},t.prototype._callExtensionMethod=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var i=ut(),s=i.__SENTRY__;if(s&&s.extensions&&typeof s.extensions[e]=="function")return s.extensions[e].apply(this,r);h.warn("Extension method "+e+" couldn't be found, doing nothing.")},t}();function ut(){var t=I();return t.__SENTRY__=t.__SENTRY__||{extensions:{},hub:void 0},t}function Ur(t){var e=ut(),r=ve(e);return rn(e,t),r}function M(){var t=ut();return(!ei(t)||ve(t).isOlderThan(tn))&&rn(t,new Dt),Bt()?As(t):ve(t)}function As(t){var e,r,n;try{var i=(n=(r=(e=ut().__SENTRY__)===null||e===void 0?void 0:e.extensions)===null||r===void 0?void 0:r.domain)===null||n===void 0?void 0:n.active;if(!i)return ve(t);if(!ei(i)||ve(i).isOlderThan(tn)){var s=ve(t).getStackTop();rn(i,new Dt(s.client,yt.clone(s.scope)))}return ve(i)}catch{return ve(t)}}function ei(t){return!!(t&&t.__SENTRY__&&t.__SENTRY__.hub)}function ve(t){return t&&t.__SENTRY__&&t.__SENTRY__.hub||(t.__SENTRY__=t.__SENTRY__||{},t.__SENTRY__.hub=new Dt),t.__SENTRY__.hub}function rn(t,e){return t?(t.__SENTRY__=t.__SENTRY__||{},t.__SENTRY__.hub=e,!0):!1}function te(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var n=M();if(n&&n[t])return n[t].apply(n,Yi(e));throw new Error("No hub defined or "+t+" was not found on the hub, please open a bug report.")}function ti(t,e){var r;try{throw new Error("Sentry syntheticException")}catch(n){r=n}return te("captureException",t,{captureContext:e,originalException:t,syntheticException:r})}function Ds(t,e){var r;try{throw new Error(t)}catch(s){r=s}var n=typeof e=="string"?e:void 0,i=typeof e!="string"?{captureContext:e}:void 0;return te("captureMessage",t,n,tr({originalException:t,syntheticException:r},i))}function Us(t){return te("captureEvent",t)}function Ls(t){te("configureScope",t)}function Hs(t){te("addBreadcrumb",t)}function Zs(t,e){te("setContext",t,e)}function $s(t){te("setExtras",t)}function Ws(t){te("setTags",t)}function qs(t,e){te("setExtra",t,e)}function zs(t,e){te("setTag",t,e)}function Ys(t){te("setUser",t)}function ri(t){te("withScope",t)}function Vs(t,e){return te("startTransaction",tr({},t),e)}var On="7",ni=function(){function t(e,r,n){r===void 0&&(r={}),this.dsn=e,this._dsnObject=new Vn(e),this.metadata=r,this._tunnel=n}return t.prototype.getDsn=function(){return this._dsnObject},t.prototype.forceEnvelope=function(){return!!this._tunnel},t.prototype.getBaseApiEndpoint=function(){var e=this.getDsn(),r=e.protocol?e.protocol+":":"",n=e.port?":"+e.port:"";return r+"//"+e.host+n+(e.path?"/"+e.path:"")+"/api/"},t.prototype.getStoreEndpoint=function(){return this._getIngestEndpoint("store")},t.prototype.getStoreEndpointWithUrlEncodedAuth=function(){return this.getStoreEndpoint()+"?"+this._encodedAuth()},t.prototype.getEnvelopeEndpointWithUrlEncodedAuth=function(){return this.forceEnvelope()?this._tunnel:this._getEnvelopeEndpoint()+"?"+this._encodedAuth()},t.prototype.getStoreEndpointPath=function(){var e=this.getDsn();return(e.path?"/"+e.path:"")+"/api/"+e.projectId+"/store/"},t.prototype.getRequestHeaders=function(e,r){var n=this.getDsn(),i=["Sentry sentry_version="+On];return i.push("sentry_client="+e+"/"+r),i.push("sentry_key="+n.publicKey),n.pass&&i.push("sentry_secret="+n.pass),{"Content-Type":"application/json","X-Sentry-Auth":i.join(", ")}},t.prototype.getReportDialogEndpoint=function(e){e===void 0&&(e={});var r=this.getDsn(),n=this.getBaseApiEndpoint()+"embed/error-page/",i=[];i.push("dsn="+r.toString());for(var s in e)if(s!=="dsn")if(s==="user"){if(!e.user)continue;e.user.name&&i.push("name="+encodeURIComponent(e.user.name)),e.user.email&&i.push("email="+encodeURIComponent(e.user.email))}else i.push(encodeURIComponent(s)+"="+encodeURIComponent(e[s]));return i.length?n+"?"+i.join("&"):n},t.prototype._getEnvelopeEndpoint=function(){return this._getIngestEndpoint("envelope")},t.prototype._getIngestEndpoint=function(e){if(this._tunnel)return this._tunnel;var r=this.getBaseApiEndpoint(),n=this.getDsn();return""+r+n.projectId+"/"+e+"/"},t.prototype._encodedAuth=function(){var e=this.getDsn(),r={sentry_key:e.publicKey,sentry_version:On};return ds(r)},t}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var H=function(){return H=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},H.apply(this,arguments)};function Js(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function Ks(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Xs(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(o){a={error:o}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return s}function le(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Xs(arguments[e]));return t}var xn=[];function Cn(t){return t.reduce(function(e,r){return e.every(function(n){return r.name!==n.name})&&e.push(r),e},[])}function Qs(t){var e=t.defaultIntegrations&&le(t.defaultIntegrations)||[],r=t.integrations,n=le(Cn(e));Array.isArray(r)?n=le(n.filter(function(a){return r.every(function(o){return o.name!==a.name})}),Cn(r)):typeof r=="function"&&(n=r(n),n=Array.isArray(n)?n:[n]);var i=n.map(function(a){return a.name}),s="Debug";return i.indexOf(s)!==-1&&n.push.apply(n,le(n.splice(i.indexOf(s),1))),n}function Gs(t){xn.indexOf(t.name)===-1&&(t.setupOnce(At,M),xn.push(t.name),h.log("Integration installed: "+t.name))}function ea(t){var e={};return Qs(t).forEach(function(r){e[r.name]=r,Gs(r)}),Object.defineProperty(e,"initialized",{value:!0}),e}var ta=function(){function t(e,r){this._integrations={},this._numProcessing=0,this._backend=new e(r),this._options=r,r.dsn&&(this._dsn=new Vn(r.dsn))}return t.prototype.captureException=function(e,r,n){var i=this,s=r&&r.event_id;return this._process(this._getBackend().eventFromException(e,r).then(function(a){return i._captureEvent(a,r,n)}).then(function(a){s=a})),s},t.prototype.captureMessage=function(e,r,n,i){var s=this,a=n&&n.event_id,o=pr(e)?this._getBackend().eventFromMessage(String(e),r,n):this._getBackend().eventFromException(e,n);return this._process(o.then(function(u){return s._captureEvent(u,n,i)}).then(function(u){a=u})),a},t.prototype.captureEvent=function(e,r,n){var i=r&&r.event_id;return this._process(this._captureEvent(e,r,n).then(function(s){i=s})),i},t.prototype.captureSession=function(e){if(!this._isEnabled()){h.warn("SDK not enabled, will not capture session.");return}typeof e.release!="string"?h.warn("Discarded session because of missing or non-string release"):(this._sendSession(e),e.update({init:!1}))},t.prototype.getDsn=function(){return this._dsn},t.prototype.getOptions=function(){return this._options},t.prototype.getTransport=function(){return this._getBackend().getTransport()},t.prototype.flush=function(e){var r=this;return this._isClientDoneProcessing(e).then(function(n){return r.getTransport().close(e).then(function(i){return n&&i})})},t.prototype.close=function(e){var r=this;return this.flush(e).then(function(n){return r.getOptions().enabled=!1,n})},t.prototype.setupIntegrations=function(){this._isEnabled()&&!this._integrations.initialized&&(this._integrations=ea(this._options))},t.prototype.getIntegration=function(e){try{return this._integrations[e.id]||null}catch{return h.warn("Cannot retrieve integration "+e.id+" from the current Client"),null}},t.prototype._updateSessionFromEvent=function(e,r){var n,i,s=!1,a=!1,o=r.exception&&r.exception.values;if(o){a=!0;try{for(var u=Ks(o),c=u.next();!c.done;c=u.next()){var l=c.value,d=l.mechanism;if(d&&d.handled===!1){s=!0;break}}}catch(T){n={error:T}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}}var p=e.status===be.Ok,v=p&&e.errors===0||p&&s;v&&(e.update(H(H({},s&&{status:be.Crashed}),{errors:e.errors||Number(a||s)})),this.captureSession(e))},t.prototype._sendSession=function(e){this._getBackend().sendSession(e)},t.prototype._isClientDoneProcessing=function(e){var r=this;return new $(function(n){var i=0,s=1,a=setInterval(function(){r._numProcessing==0?(clearInterval(a),n(!0)):(i+=s,e&&i>=e&&(clearInterval(a),n(!1)))},s)})},t.prototype._getBackend=function(){return this._backend},t.prototype._isEnabled=function(){return this.getOptions().enabled!==!1&&this._dsn!==void 0},t.prototype._prepareEvent=function(e,r,n){var i=this,s=this.getOptions().normalizeDepth,a=s===void 0?3:s,o=H(H({},e),{event_id:e.event_id||(n&&n.event_id?n.event_id:Ce()),timestamp:e.timestamp||mr()});this._applyClientOptions(o),this._applyIntegrationsMetadata(o);var u=r;n&&n.captureContext&&(u=yt.clone(u).update(n.captureContext));var c=$.resolve(o);return u&&(c=u.applyToEvent(o,n)),c.then(function(l){return typeof a=="number"&&a>0?i._normalizeEvent(l,a):l})},t.prototype._normalizeEvent=function(e,r){if(!e)return null;var n=H(H(H(H(H({},e),e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map(function(a){return H(H({},a),a.data&&{data:Ve(a.data,r)})})}),e.user&&{user:Ve(e.user,r)}),e.contexts&&{contexts:Ve(e.contexts,r)}),e.extra&&{extra:Ve(e.extra,r)});e.contexts&&e.contexts.trace&&(n.contexts.trace=e.contexts.trace);var i=this.getOptions()._experiments,s=i===void 0?{}:i;return s.ensureNoCircularStructures?Ve(n):n},t.prototype._applyClientOptions=function(e){var r=this.getOptions(),n=r.environment,i=r.release,s=r.dist,a=r.maxValueLength,o=a===void 0?250:a;"environment"in e||(e.environment="environment"in r?n:"production"),e.release===void 0&&i!==void 0&&(e.release=i),e.dist===void 0&&s!==void 0&&(e.dist=s),e.message&&(e.message=gt(e.message,o));var u=e.exception&&e.exception.values&&e.exception.values[0];u&&u.value&&(u.value=gt(u.value,o));var c=e.request;c&&c.url&&(c.url=gt(c.url,o))},t.prototype._applyIntegrationsMetadata=function(e){var r=Object.keys(this._integrations);r.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=le(e.sdk.integrations||[],r))},t.prototype._sendEvent=function(e){this._getBackend().sendEvent(e)},t.prototype._captureEvent=function(e,r,n){return this._processEvent(e,r,n).then(function(i){return i.event_id},function(i){h.error(i)})},t.prototype._processEvent=function(e,r,n){var i=this,s,a,o=this.getOptions(),u=o.beforeSend,c=o.sampleRate,l=this.getTransport();if(!this._isEnabled())return $.reject(new A("SDK not enabled, will not capture event."));var d=e.type==="transaction";return!d&&typeof c=="number"&&Math.random()>c?((a=(s=l).recordLostEvent)===null||a===void 0||a.call(s,re.SampleRate,"event"),$.reject(new A("Discarding event because it's not included in the random sample (sampling rate = "+c+")"))):this._prepareEvent(e,n,r).then(function(p){var v,T;if(p===null)throw(T=(v=l).recordLostEvent)===null||T===void 0||T.call(v,re.EventProcessor,e.type||"event"),new A("An event processor returned null, will not send event.");var x=r&&r.data&&r.data.__sentry__===!0;if(x||d||!u)return p;var P=u(p,r);return i._ensureBeforeSendRv(P)}).then(function(p){var v,T;if(p===null)throw(T=(v=l).recordLostEvent)===null||T===void 0||T.call(v,re.BeforeSend,e.type||"event"),new A("`beforeSend` returned `null`, will not send event.");var x=n&&n.getSession&&n.getSession();return!d&&x&&i._updateSessionFromEvent(x,p),i._sendEvent(p),p}).then(null,function(p){throw p instanceof A?p:(i.captureException(p,{data:{__sentry__:!0},originalException:p}),new A(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: `+p))})},t.prototype._process=function(e){var r=this;this._numProcessing+=1,e.then(function(n){return r._numProcessing-=1,n},function(n){return r._numProcessing-=1,n})},t.prototype._ensureBeforeSendRv=function(e){var r="`beforeSend` method has to return `null` or a valid event.";if(jt(e))return e.then(function(n){if(!(rt(n)||n===null))throw new A(r);return n},function(n){throw new A("beforeSend rejected with "+n)});if(!(rt(e)||e===null))throw new A(r);return e},t}(),ra=function(){function t(){}return t.prototype.sendEvent=function(e){return $.resolve({reason:"NoopTransport: Event has been skipped because no Dsn is configured.",status:Re.Skipped})},t.prototype.close=function(e){return $.resolve(!0)},t}(),na=function(){function t(e){this._options=e,this._options.dsn||h.warn("No DSN provided, backend will not do anything."),this._transport=this._setupTransport()}return t.prototype.eventFromException=function(e,r){throw new A("Backend has to implement `eventFromException` method")},t.prototype.eventFromMessage=function(e,r,n){throw new A("Backend has to implement `eventFromMessage` method")},t.prototype.sendEvent=function(e){this._transport.sendEvent(e).then(null,function(r){h.error("Error while sending event: "+r)})},t.prototype.sendSession=function(e){if(!this._transport.sendSession){h.warn("Dropping session because custom transport doesn't implement sendSession");return}this._transport.sendSession(e).then(null,function(r){h.error("Error while sending session: "+r)})},t.prototype.getTransport=function(){return this._transport},t.prototype._setupTransport=function(){return new ra},t}();function ii(t){if(!(!t.metadata||!t.metadata.sdk)){var e=t.metadata.sdk,r=e.name,n=e.version;return{name:r,version:n}}}function ia(t,e){return e&&(t.sdk=t.sdk||{},t.sdk.name=t.sdk.name||e.name,t.sdk.version=t.sdk.version||e.version,t.sdk.integrations=le(t.sdk.integrations||[],e.integrations||[]),t.sdk.packages=le(t.sdk.packages||[],e.packages||[])),t}function si(t,e){var r=ii(e),n=JSON.stringify(H(H({sent_at:new Date().toISOString()},r&&{sdk:r}),e.forceEnvelope()&&{dsn:e.getDsn().toString()})),i="aggregates"in t?"sessions":"session",s=JSON.stringify({type:i});return{body:n+`
`+s+`
`+JSON.stringify(t),type:i,url:e.getEnvelopeEndpointWithUrlEncodedAuth()}}function ai(t,e){var r=ii(e),n=t.type||"event",i=n==="transaction"||e.forceEnvelope(),s=t.debug_meta||{},a=s.transactionSampling,o=Js(s,["transactionSampling"]),u=a||{},c=u.method,l=u.rate;Object.keys(o).length===0?delete t.debug_meta:t.debug_meta=o;var d={body:JSON.stringify(r?ia(t,e.metadata.sdk):t),type:n,url:i?e.getEnvelopeEndpointWithUrlEncodedAuth():e.getStoreEndpointWithUrlEncodedAuth()};if(i){var p=JSON.stringify(H(H({event_id:t.event_id,sent_at:new Date().toISOString()},r&&{sdk:r}),e.forceEnvelope()&&{dsn:e.getDsn().toString()})),v=JSON.stringify({type:n,sample_rates:[{id:c,rate:l}]}),T=p+`
`+v+`
`+d.body;d.body=T}return d}function sa(t,e){var r;e.debug===!0&&h.enable();var n=M();(r=n.getScope())===null||r===void 0||r.update(e.initialScope);var i=new t(e);n.bindClient(i)}var Lr="6.13.3",In,oi=function(){function t(){this.name=t.id}return t.prototype.setupOnce=function(){In=Function.prototype.toString,Function.prototype.toString=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=this.__sentry_original__||this;return In.apply(n,e)}},t.id="FunctionToString",t}(),aa=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/],ui=function(){function t(e){e===void 0&&(e={}),this._options=e,this.name=t.id}return t.prototype.setupOnce=function(){At(function(e){var r=M();if(!r)return e;var n=r.getIntegration(t);if(n){var i=r.getClient(),s=i?i.getOptions():{},a=typeof n._mergeOptions=="function"?n._mergeOptions(s):{};return typeof n._shouldDropEvent!="function"?e:n._shouldDropEvent(e,a)?null:e}return e})},t.prototype._shouldDropEvent=function(e,r){return this._isSentryError(e,r)?(h.warn(`Event dropped due to being internal Sentry Error.
Event: `+je(e)),!0):this._isIgnoredError(e,r)?(h.warn("Event dropped due to being matched by `ignoreErrors` option.\nEvent: "+je(e)),!0):this._isDeniedUrl(e,r)?(h.warn("Event dropped due to being matched by `denyUrls` option.\nEvent: "+je(e)+`.
Url: `+this._getEventFilterUrl(e)),!0):this._isAllowedUrl(e,r)?!1:(h.warn("Event dropped due to not being matched by `allowUrls` option.\nEvent: "+je(e)+`.
Url: `+this._getEventFilterUrl(e)),!0)},t.prototype._isSentryError=function(e,r){if(!r.ignoreInternal)return!1;try{return e&&e.exception&&e.exception.values&&e.exception.values[0]&&e.exception.values[0].type==="SentryError"||!1}catch{return!1}},t.prototype._isIgnoredError=function(e,r){return!r.ignoreErrors||!r.ignoreErrors.length?!1:this._getPossibleEventMessages(e).some(function(n){return r.ignoreErrors.some(function(i){return mt(n,i)})})},t.prototype._isDeniedUrl=function(e,r){if(!r.denyUrls||!r.denyUrls.length)return!1;var n=this._getEventFilterUrl(e);return n?r.denyUrls.some(function(i){return mt(n,i)}):!1},t.prototype._isAllowedUrl=function(e,r){if(!r.allowUrls||!r.allowUrls.length)return!0;var n=this._getEventFilterUrl(e);return n?r.allowUrls.some(function(i){return mt(n,i)}):!0},t.prototype._mergeOptions=function(e){return e===void 0&&(e={}),{allowUrls:le(this._options.whitelistUrls||[],this._options.allowUrls||[],e.whitelistUrls||[],e.allowUrls||[]),denyUrls:le(this._options.blacklistUrls||[],this._options.denyUrls||[],e.blacklistUrls||[],e.denyUrls||[]),ignoreErrors:le(this._options.ignoreErrors||[],e.ignoreErrors||[],aa),ignoreInternal:typeof this._options.ignoreInternal<"u"?this._options.ignoreInternal:!0}},t.prototype._getPossibleEventMessages=function(e){if(e.message)return[e.message];if(e.exception)try{var r=e.exception.values&&e.exception.values[0]||{},n=r.type,i=n===void 0?"":n,s=r.value,a=s===void 0?"":s;return[""+a,i+": "+a]}catch{return h.error("Cannot extract message for event "+je(e)),[]}return[]},t.prototype._getLastValidUrl=function(e){e===void 0&&(e=[]);for(var r,n,i=e.length-1;i>=0;i--){var s=e[i];if(((r=s)===null||r===void 0?void 0:r.filename)!=="<anonymous>"&&((n=s)===null||n===void 0?void 0:n.filename)!=="[native code]")return s.filename||null}return null},t.prototype._getEventFilterUrl=function(e){try{if(e.stacktrace){var r=e.stacktrace.frames;return this._getLastValidUrl(r)}if(e.exception){var n=e.exception.values&&e.exception.values[0].stacktrace&&e.exception.values[0].stacktrace.frames;return this._getLastValidUrl(n)}return null}catch{return h.error("Cannot extract url for event "+je(e)),null}},t.id="InboundFilters",t}();const oa=Object.freeze(Object.defineProperty({__proto__:null,FunctionToString:oi,InboundFilters:ui},Symbol.toStringTag,{value:"Module"}));var Xe="?",ua=/^\s*at (?:(.*?) ?\()?((?:file|https?|blob|chrome-extension|address|native|eval|webpack|<anonymous>|[-a-z]+:|.*bundle|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,ca=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:file|https?|blob|chrome|webpack|resource|moz-extension|capacitor).*?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,la=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,da=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,fa=/\((\S*)(?::(\d+))(?::(\d+))\)/,pa=/Minified React error #\d+;/i;function bt(t){var e=null,r=0;t&&(typeof t.framesToPop=="number"?r=t.framesToPop:pa.test(t.message)&&(r=1));try{if(e=ga(t),e)return Pn(e,r)}catch{}try{if(e=ha(t),e)return Pn(e,r)}catch{}return{message:nn(t),name:t&&t.name,stack:[],failed:!0}}function ha(t){var e,r;if(!t||!t.stack)return null;for(var n=[],i=t.stack.split(`
`),s,a,o,u,c=0;c<i.length;++c){if(o=ua.exec(i[c])){var l=o[2]&&o[2].indexOf("native")===0;s=o[2]&&o[2].indexOf("eval")===0,s&&(a=fa.exec(o[2]))&&(o[2]=a[1],o[3]=a[2],o[4]=a[3]);var d=o[2]&&o[2].indexOf("address at ")===0?o[2].substr(11):o[2],p=o[1]||Xe;e=er(Rn(p,d),2),p=e[0],d=e[1],u={url:d,func:p,args:l?[o[2]]:[],line:o[3]?+o[3]:null,column:o[4]?+o[4]:null}}else if(o=la.exec(i[c]))u={url:o[2],func:o[1]||Xe,args:[],line:+o[3],column:o[4]?+o[4]:null};else if(o=ca.exec(i[c])){s=o[3]&&o[3].indexOf(" > eval")>-1,s&&(a=da.exec(o[3]))?(o[1]=o[1]||"eval",o[3]=a[1],o[4]=a[2],o[5]=""):c===0&&!o[5]&&t.columnNumber!==void 0&&(n[0].column=t.columnNumber+1);var d=o[3],p=o[1]||Xe;r=er(Rn(p,d),2),p=r[0],d=r[1],u={url:d,func:p,args:o[2]?o[2].split(","):[],line:o[4]?+o[4]:null,column:o[5]?+o[5]:null}}else continue;!u.func&&u.line&&(u.func=Xe),n.push(u)}return n.length?{message:nn(t),name:t.name,stack:n}:null}function ga(t){if(!t||!t.stacktrace)return null;for(var e=t.stacktrace,r=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,n=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\((.*)\))? in (.*):\s*$/i,i=e.split(`
`),s=[],a,o=0;o<i.length;o+=2){var u=null;(a=r.exec(i[o]))?u={url:a[2],func:a[3],args:[],line:+a[1],column:null}:(a=n.exec(i[o]))&&(u={url:a[6],func:a[3]||a[4],args:a[5]?a[5].split(","):[],line:+a[1],column:+a[2]}),u&&(!u.func&&u.line&&(u.func=Xe),s.push(u))}return s.length?{message:nn(t),name:t.name,stack:s}:null}var Rn=function(t,e){var r=t.indexOf("safari-extension")!==-1,n=t.indexOf("safari-web-extension")!==-1;return r||n?[t.indexOf("@")!==-1?t.split("@")[0]:Xe,r?"safari-extension:"+e:"safari-web-extension:"+e]:[t,e]};function Pn(t,e){try{return R(R({},t),{stack:t.stack.slice(e)})}catch{return t}}function nn(t){var e=t&&t.message;return e?e.error&&typeof e.error.message=="string"?e.error.message:e:"No error message"}var ma=50;function ci(t){var e=sn(t.stack),r={type:t.name,value:t.message};return e&&e.length&&(r.stacktrace={frames:e}),r.type===void 0&&r.value===""&&(r.value="Unrecoverable error caught"),r}function va(t,e,r){var n={exception:{values:[{type:en(t)?t.constructor.name:r?"UnhandledRejection":"Error",value:"Non-Error "+(r?"promise rejection":"exception")+" captured with keys: "+gs(t)}]},extra:{__serialized__:Kn(t)}};if(e){var i=bt(e),s=sn(i.stack);n.stacktrace={frames:s}}return n}function Nn(t){var e=ci(t);return{exception:{values:[e]}}}function sn(t){if(!t||!t.length)return[];var e=t,r=e[0].func||"",n=e[e.length-1].func||"";return(r.indexOf("captureMessage")!==-1||r.indexOf("captureException")!==-1)&&(e=e.slice(1)),n.indexOf("sentryWrapped")!==-1&&(e=e.slice(0,-1)),e.slice(0,ma).map(function(i){return{colno:i.column===null?void 0:i.column,filename:i.url||e[0].url,function:i.func||"?",in_app:!0,lineno:i.line===null?void 0:i.line}}).reverse()}function li(t,e,r){var n=r&&r.syntheticException||void 0,i=Hr(e,n,{attachStacktrace:t.attachStacktrace});return it(i,{handled:!0,type:"generic"}),i.level=Z.Error,r&&r.event_id&&(i.event_id=r.event_id),$.resolve(i)}function di(t,e,r,n){r===void 0&&(r=Z.Info);var i=n&&n.syntheticException||void 0,s=Zr(e,i,{attachStacktrace:t.attachStacktrace});return s.level=r,n&&n.event_id&&(s.event_id=n.event_id),$.resolve(s)}function Hr(t,e,r){r===void 0&&(r={});var n;if(zn(t)&&t.error){var i=t;return t=i.error,n=Nn(bt(t)),n}if(_n(t)||Ki(t)){var s=t,a=s.name||(_n(s)?"DOMError":"DOMException"),o=s.message?a+": "+s.message:a;return n=Zr(o,e,r),jr(n,o),"code"in s&&(n.tags=R(R({},n.tags),{"DOMException.code":""+s.code})),n}if(qn(t))return n=Nn(bt(t)),n;if(rt(t)||en(t)){var u=t;return n=va(u,e,r.rejection),it(n,{synthetic:!0}),n}return n=Zr(t,e,r),jr(n,""+t,void 0),it(n,{synthetic:!0}),n}function Zr(t,e,r){r===void 0&&(r={});var n={message:t};if(r.attachStacktrace&&e){var i=bt(e),s=sn(i.stack);n.stacktrace={frames:s}}return n}var ie=I(),qt;function fi(){var t,e;if(qt)return qt;if(Br(ie.fetch))return qt=ie.fetch.bind(ie);var r=ie.document,n=ie.fetch;if(typeof((t=r)===null||t===void 0?void 0:t.createElement)=="function")try{var i=r.createElement("iframe");i.hidden=!0,r.head.appendChild(i),!((e=i.contentWindow)===null||e===void 0)&&e.fetch&&(n=i.contentWindow.fetch),r.head.removeChild(i)}catch(s){h.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",s)}return qt=n.bind(ie)}function _a(t,e){var r=Object.prototype.toString.call(ie&&ie.navigator)==="[object Navigator]",n=r&&typeof ie.navigator.sendBeacon=="function";if(n){var i=ie.navigator.sendBeacon.bind(ie.navigator);return i(t,e)}if(gr()){var s=fi();return Ji(s(t,{body:e,method:"POST",credentials:"omit",keepalive:!0}))}}var Fn={event:"error",transaction:"transaction",session:"session",attachment:"attachment"},Ir=I(),an=function(){function t(e){var r=this;this.options=e,this._buffer=new Ns(30),this._rateLimits={},this._outcomes={},this._api=new ni(e.dsn,e._metadata,e.tunnel),this.url=this._api.getStoreEndpointWithUrlEncodedAuth(),this.options.sendClientReports&&Ir.document&&Ir.document.addEventListener("visibilitychange",function(){Ir.document.visibilityState==="hidden"&&r._flushOutcomes()})}return t.prototype.sendEvent=function(e){throw new A("Transport Class has to implement `sendEvent` method")},t.prototype.close=function(e){return this._buffer.drain(e)},t.prototype.recordLostEvent=function(e,r){var n;if(this.options.sendClientReports){var i=Fn[r]+":"+e;h.log("Adding outcome: "+i),this._outcomes[i]=(n=this._outcomes[i],(n??0)+1)}},t.prototype._flushOutcomes=function(){if(this.options.sendClientReports){var e=this._outcomes;if(this._outcomes={},!Object.keys(e).length){h.log("No outcomes to flush");return}h.log(`Flushing outcomes:
`+JSON.stringify(e,null,2));var r=this._api.getEnvelopeEndpointWithUrlEncodedAuth(),n=JSON.stringify({}),i=JSON.stringify({type:"client_report"}),s=JSON.stringify({timestamp:mr(),discarded_events:Object.keys(e).map(function(o){var u=er(o.split(":"),2),c=u[0],l=u[1];return{reason:l,category:c,quantity:e[o]}})}),a=n+`
`+i+`
`+s;try{_a(r,a)}catch(o){h.error(o)}}},t.prototype._handleResponse=function(e){var r=e.requestType,n=e.response,i=e.headers,s=e.resolve,a=e.reject,o=Re.fromHttpCode(n.status),u=this._handleRateLimit(i);if(u&&h.warn("Too many "+r+" requests, backing off until: "+this._disabledUntil(r)),o===Re.Success){s({status:o});return}a(n)},t.prototype._disabledUntil=function(e){var r=Fn[e];return this._rateLimits[r]||this._rateLimits.all},t.prototype._isRateLimited=function(e){return this._disabledUntil(e)>new Date(Date.now())},t.prototype._handleRateLimit=function(e){var r,n,i,s,a=Date.now(),o=e["x-sentry-rate-limits"],u=e["retry-after"];if(o){try{for(var c=mn(o.trim().split(",")),l=c.next();!l.done;l=c.next()){var d=l.value,p=d.split(":",2),v=parseInt(p[0],10),T=(isNaN(v)?60:v)*1e3;try{for(var x=(i=void 0,mn(p[1].split(";"))),P=x.next();!P.done;P=x.next()){var q=P.value;this._rateLimits[q||"all"]=new Date(a+T)}}catch(L){i={error:L}}finally{try{P&&!P.done&&(s=x.return)&&s.call(x)}finally{if(i)throw i.error}}}}catch(L){r={error:L}}finally{try{l&&!l.done&&(n=c.return)&&n.call(c)}finally{if(r)throw r.error}}return!0}else if(u)return this._rateLimits.all=new Date(a+us(a,u)),!0;return!1},t}(),pi=function(t){fr(e,t);function e(r,n){n===void 0&&(n=fi());var i=t.call(this,r)||this;return i._fetch=n,i}return e.prototype.sendEvent=function(r){return this._sendRequest(ai(r,this._api),r)},e.prototype.sendSession=function(r){return this._sendRequest(si(r,this._api),r)},e.prototype._sendRequest=function(r,n){var i=this;if(this._isRateLimited(r.type))return this.recordLostEvent(re.RateLimitBackoff,r.type),Promise.reject({event:n,type:r.type,reason:"Transport for "+r.type+" requests locked till "+this._disabledUntil(r.type)+" due to too many requests.",status:429});var s={body:r.body,method:"POST",referrerPolicy:vs()?"origin":""};return this.options.fetchParameters!==void 0&&Object.assign(s,this.options.fetchParameters),this.options.headers!==void 0&&(s.headers=this.options.headers),this._buffer.add(function(){return new $(function(a,o){i._fetch(r.url,s).then(function(u){var c={"x-sentry-rate-limits":u.headers.get("X-Sentry-Rate-Limits"),"retry-after":u.headers.get("Retry-After")};i._handleResponse({requestType:r.type,response:u,headers:c,resolve:a,reject:o})}).catch(o)})}).then(void 0,function(a){throw a instanceof A?i.recordLostEvent(re.QueueOverflow,r.type):i.recordLostEvent(re.NetworkError,r.type),a})},e}(an),hi=function(t){fr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.sendEvent=function(r){return this._sendRequest(ai(r,this._api),r)},e.prototype.sendSession=function(r){return this._sendRequest(si(r,this._api),r)},e.prototype._sendRequest=function(r,n){var i=this;return this._isRateLimited(r.type)?(this.recordLostEvent(re.RateLimitBackoff,r.type),Promise.reject({event:n,type:r.type,reason:"Transport for "+r.type+" requests locked till "+this._disabledUntil(r.type)+" due to too many requests.",status:429})):this._buffer.add(function(){return new $(function(s,a){var o=new XMLHttpRequest;o.onreadystatechange=function(){if(o.readyState===4){var c={"x-sentry-rate-limits":o.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":o.getResponseHeader("Retry-After")};i._handleResponse({requestType:r.type,response:o,headers:c,resolve:s,reject:a})}},o.open("POST",r.url);for(var u in i.options.headers)i.options.headers.hasOwnProperty(u)&&o.setRequestHeader(u,i.options.headers[u]);o.send(r.body)})}).then(void 0,function(s){throw s instanceof A?i.recordLostEvent(re.QueueOverflow,r.type):i.recordLostEvent(re.NetworkError,r.type),s})},e}(an);const ya=Object.freeze(Object.defineProperty({__proto__:null,BaseTransport:an,FetchTransport:pi,XHRTransport:hi},Symbol.toStringTag,{value:"Module"}));var ba=function(t){fr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.eventFromException=function(r,n){return li(this._options,r,n)},e.prototype.eventFromMessage=function(r,n,i){return n===void 0&&(n=Z.Info),di(this._options,r,n,i)},e.prototype._setupTransport=function(){if(!this._options.dsn)return t.prototype._setupTransport.call(this);var r=R(R({},this._options.transportOptions),{dsn:this._options.dsn,tunnel:this._options.tunnel,sendClientReports:this._options.sendClientReports,_metadata:this._options._metadata});return this._options.transport?new this._options.transport(r):gr()?new pi(r):new hi(r)},e}(na),zt=I(),$r=0;function Mn(){return $r>0}function Sa(){$r+=1,setTimeout(function(){$r-=1})}function De(t,e,r){if(e===void 0&&(e={}),typeof t!="function")return t;try{if(t.__sentry__)return t;if(t.__sentry_wrapped__)return t.__sentry_wrapped__}catch{return t}var n=function(){var a=Array.prototype.slice.call(arguments);try{r&&typeof r=="function"&&r.apply(this,arguments);var o=a.map(function(u){return De(u,e)});return t.handleEvent?t.handleEvent.apply(this,o):t.apply(this,o)}catch(u){throw Sa(),ri(function(c){c.addEventProcessor(function(l){var d=R({},l);return e.mechanism&&(jr(d,void 0,void 0),it(d,e.mechanism)),d.extra=R(R({},d.extra),{arguments:a}),d}),ti(u)}),u}};try{for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}catch{}t.prototype=t.prototype||{},n.prototype=t.prototype,Object.defineProperty(t,"__sentry_wrapped__",{enumerable:!1,value:n}),Object.defineProperties(n,{__sentry__:{enumerable:!1,value:!0},__sentry_original__:{enumerable:!1,value:t}});try{var s=Object.getOwnPropertyDescriptor(n,"name");s.configurable&&Object.defineProperty(n,"name",{get:function(){return t.name}})}catch{}return n}function gi(t){if(t===void 0&&(t={}),!!zt.document){if(!t.eventId){h.error("Missing eventId option in showReportDialog call");return}if(!t.dsn){h.error("Missing dsn option in showReportDialog call");return}var e=zt.document.createElement("script");e.async=!0,e.src=new ni(t.dsn).getReportDialogEndpoint(t),t.onLoad&&(e.onload=t.onLoad);var r=zt.document.head||zt.document.body;r&&r.appendChild(e)}}var mi=function(){function t(e){this.name=t.id,this._onErrorHandlerInstalled=!1,this._onUnhandledRejectionHandlerInstalled=!1,this._options=R({onerror:!0,onunhandledrejection:!0},e)}return t.prototype.setupOnce=function(){Error.stackTraceLimit=50,this._options.onerror&&(h.log("Global Handler attached: onerror"),this._installGlobalOnErrorHandler()),this._options.onunhandledrejection&&(h.log("Global Handler attached: onunhandledrejection"),this._installGlobalOnUnhandledRejectionHandler())},t.prototype._installGlobalOnErrorHandler=function(){var e=this;this._onErrorHandlerInstalled||(G({callback:function(r){var n=r.error,i=M(),s=i.getIntegration(t),a=n&&n.__sentry_own_request__===!0;if(!(!s||Mn()||a)){var o=i.getClient(),u=n===void 0&&tt(r.msg)?e._eventFromIncompleteOnError(r.msg,r.url,r.line,r.column):e._enhanceEventWithInitialFrame(Hr(n||r.msg,void 0,{attachStacktrace:o&&o.getOptions().attachStacktrace,rejection:!1}),r.url,r.line,r.column);it(u,{handled:!1,type:"onerror"}),i.captureEvent(u,{originalException:n})}},type:"error"}),this._onErrorHandlerInstalled=!0)},t.prototype._installGlobalOnUnhandledRejectionHandler=function(){var e=this;this._onUnhandledRejectionHandlerInstalled||(G({callback:function(r){var n=r;try{"reason"in r?n=r.reason:"detail"in r&&"reason"in r.detail&&(n=r.detail.reason)}catch{}var i=M(),s=i.getIntegration(t),a=n&&n.__sentry_own_request__===!0;if(!s||Mn()||a)return!0;var o=i.getClient(),u=pr(n)?e._eventFromRejectionWithPrimitive(n):Hr(n,void 0,{attachStacktrace:o&&o.getOptions().attachStacktrace,rejection:!0});u.level=Z.Error,it(u,{handled:!1,type:"onunhandledrejection"}),i.captureEvent(u,{originalException:n})},type:"unhandledrejection"}),this._onUnhandledRejectionHandlerInstalled=!0)},t.prototype._eventFromIncompleteOnError=function(e,r,n,i){var s=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i,a=zn(e)?e.message:e,o,u=a.match(s);u&&(o=u[1],a=u[2]);var c={exception:{values:[{type:o||"Error",value:a}]}};return this._enhanceEventWithInitialFrame(c,r,n,i)},t.prototype._eventFromRejectionWithPrimitive=function(e){return{exception:{values:[{type:"UnhandledRejection",value:"Non-Error promise rejection captured with value: "+String(e)}]}}},t.prototype._enhanceEventWithInitialFrame=function(e,r,n,i){e.exception=e.exception||{},e.exception.values=e.exception.values||[],e.exception.values[0]=e.exception.values[0]||{},e.exception.values[0].stacktrace=e.exception.values[0].stacktrace||{},e.exception.values[0].stacktrace.frames=e.exception.values[0].stacktrace.frames||[];var s=isNaN(parseInt(i,10))?void 0:i,a=isNaN(parseInt(n,10))?void 0:n,o=tt(r)&&r.length>0?r:os();return e.exception.values[0].stacktrace.frames.length===0&&e.exception.values[0].stacktrace.frames.push({colno:s,filename:o,function:"?",in_app:!0,lineno:a}),e},t.id="GlobalHandlers",t}(),ka=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],vi=function(){function t(e){this.name=t.id,this._options=R({XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0},e)}return t.prototype.setupOnce=function(){var e=I();if(this._options.setTimeout&&D(e,"setTimeout",this._wrapTimeFunction.bind(this)),this._options.setInterval&&D(e,"setInterval",this._wrapTimeFunction.bind(this)),this._options.requestAnimationFrame&&D(e,"requestAnimationFrame",this._wrapRAF.bind(this)),this._options.XMLHttpRequest&&"XMLHttpRequest"in e&&D(XMLHttpRequest.prototype,"send",this._wrapXHR.bind(this)),this._options.eventTarget){var r=Array.isArray(this._options.eventTarget)?this._options.eventTarget:ka;r.forEach(this._wrapEventTarget.bind(this))}},t.prototype._wrapTimeFunction=function(e){return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var i=r[0];return r[0]=De(i,{mechanism:{data:{function:Ee(e)},handled:!0,type:"instrument"}}),e.apply(this,r)}},t.prototype._wrapRAF=function(e){return function(r){return e.call(this,De(r,{mechanism:{data:{function:"requestAnimationFrame",handler:Ee(e)},handled:!0,type:"instrument"}}))}},t.prototype._wrapEventTarget=function(e){var r=I(),n=r[e]&&r[e].prototype;!n||!n.hasOwnProperty||!n.hasOwnProperty("addEventListener")||(D(n,"addEventListener",function(i){return function(s,a,o){try{typeof a.handleEvent=="function"&&(a.handleEvent=De(a.handleEvent.bind(a),{mechanism:{data:{function:"handleEvent",handler:Ee(a),target:e},handled:!0,type:"instrument"}}))}catch{}return i.call(this,s,De(a,{mechanism:{data:{function:"addEventListener",handler:Ee(a),target:e},handled:!0,type:"instrument"}}),o)}}),D(n,"removeEventListener",function(i){return function(s,a,o){var u,c=a;try{var l=(u=c)===null||u===void 0?void 0:u.__sentry_wrapped__;l&&i.call(this,s,l,o)}catch{}return i.call(this,s,c,o)}}))},t.prototype._wrapXHR=function(e){return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var i=this,s=["onload","onerror","onprogress","onreadystatechange"];return s.forEach(function(a){a in i&&typeof i[a]=="function"&&D(i,a,function(o){var u={mechanism:{data:{function:a,handler:Ee(o)},handled:!0,type:"instrument"}};return o.__sentry_original__&&(u.mechanism.data.handler=Ee(o.__sentry_original__)),De(o,u)})}),e.apply(this,r)}},t.id="TryCatch",t}(),on=function(){function t(e){this.name=t.id,this._options=R({console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0},e)}return t.prototype.addSentryBreadcrumb=function(e){this._options.sentry&&M().addBreadcrumb({category:"sentry."+(e.type==="transaction"?"transaction":"event"),event_id:e.event_id,level:e.level,message:je(e)},{event:e})},t.prototype.setupOnce=function(){var e=this;this._options.console&&G({callback:function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];e._consoleBreadcrumb.apply(e,Be(r))},type:"console"}),this._options.dom&&G({callback:function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];e._domBreadcrumb.apply(e,Be(r))},type:"dom"}),this._options.xhr&&G({callback:function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];e._xhrBreadcrumb.apply(e,Be(r))},type:"xhr"}),this._options.fetch&&G({callback:function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];e._fetchBreadcrumb.apply(e,Be(r))},type:"fetch"}),this._options.history&&G({callback:function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];e._historyBreadcrumb.apply(e,Be(r))},type:"history"})},t.prototype._consoleBreadcrumb=function(e){var r={category:"console",data:{arguments:e.args,logger:"console"},level:Z.fromString(e.level),message:bn(e.args," ")};if(e.level==="assert")if(e.args[0]===!1)r.message="Assertion failed: "+(bn(e.args.slice(1)," ")||"console.assert"),r.data.arguments=e.args.slice(1);else return;M().addBreadcrumb(r,{input:e.args,level:e.level})},t.prototype._domBreadcrumb=function(e){var r,n=typeof this._options.dom=="object"?this._options.dom.serializeAttribute:void 0;typeof n=="string"&&(n=[n]);try{r=e.event.target?nt(e.event.target,n):nt(e.event,n)}catch{r="<unknown>"}r.length!==0&&M().addBreadcrumb({category:"ui."+e.name,message:r},{event:e.event,name:e.name,global:e.global})},t.prototype._xhrBreadcrumb=function(e){if(e.endTimestamp){if(e.xhr.__sentry_own_request__)return;var r=e.xhr.__sentry_xhr__||{},n=r.method,i=r.url,s=r.status_code,a=r.body;M().addBreadcrumb({category:"xhr",data:{method:n,url:i,status_code:s},type:"http"},{xhr:e.xhr,input:a});return}},t.prototype._fetchBreadcrumb=function(e){e.endTimestamp&&(e.fetchData.url.match(/sentry_key/)&&e.fetchData.method==="POST"||(e.error?M().addBreadcrumb({category:"fetch",data:e.fetchData,level:Z.Error,type:"http"},{data:e.error,input:e.args}):M().addBreadcrumb({category:"fetch",data:R(R({},e.fetchData),{status_code:e.response.status}),type:"http"},{input:e.args,response:e.response})))},t.prototype._historyBreadcrumb=function(e){var r=I(),n=e.from,i=e.to,s=wr(r.location.href),a=wr(n),o=wr(i);a.path||(a=s),s.protocol===o.protocol&&s.host===o.host&&(i=o.relative),s.protocol===a.protocol&&s.host===a.host&&(n=a.relative),M().addBreadcrumb({category:"navigation",data:{from:n,to:i}})},t.id="Breadcrumbs",t}(),wa="cause",Ta=5,_i=function(){function t(e){e===void 0&&(e={}),this.name=t.id,this._key=e.key||wa,this._limit=e.limit||Ta}return t.prototype.setupOnce=function(){At(function(e,r){var n=M().getIntegration(t);if(n){var i=n._handler&&n._handler.bind(n);return typeof i=="function"?i(e,r):e}return e})},t.prototype._handler=function(e,r){if(!e.exception||!e.exception.values||!r||!fe(r.originalException,Error))return e;var n=this._walkErrorTree(r.originalException,this._key);return e.exception.values=Be(n,e.exception.values),e},t.prototype._walkErrorTree=function(e,r,n){if(n===void 0&&(n=[]),!fe(e[r],Error)||n.length+1>=this._limit)return n;var i=bt(e[r]),s=ci(i);return this._walkErrorTree(e[r],r,Be([s],n))},t.id="LinkedErrors",t}(),ze=I(),yi=function(){function t(){this.name=t.id}return t.prototype.setupOnce=function(){At(function(e){var r,n,i;if(M().getIntegration(t)){if(!ze.navigator&&!ze.location&&!ze.document)return e;var s=((r=e.request)===null||r===void 0?void 0:r.url)||((n=ze.location)===null||n===void 0?void 0:n.href),a=(ze.document||{}).referrer,o=(ze.navigator||{}).userAgent,u=R(R(R({},(i=e.request)===null||i===void 0?void 0:i.headers),a&&{Referer:a}),o&&{"User-Agent":o}),c=R(R({},s&&{url:s}),{headers:u});return R(R({},e),{request:c})}return e})},t.id="UserAgent",t}(),bi=function(){function t(){this.name=t.id}return t.prototype.setupOnce=function(e,r){e(function(n){var i=r().getIntegration(t);if(i){try{if(i._shouldDropEvent(n,i._previousEvent))return h.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{return i._previousEvent=n}return i._previousEvent=n}return n})},t.prototype._shouldDropEvent=function(e,r){return r?!!(this._isSameMessageEvent(e,r)||this._isSameExceptionEvent(e,r)):!1},t.prototype._isSameMessageEvent=function(e,r){var n=e.message,i=r.message;return!(!n&&!i||n&&!i||!n&&i||n!==i||!this._isSameFingerprint(e,r)||!this._isSameStacktrace(e,r))},t.prototype._getFramesFromEvent=function(e){var r=e.exception;if(r)try{return r.values[0].stacktrace.frames}catch{return}else if(e.stacktrace)return e.stacktrace.frames},t.prototype._isSameStacktrace=function(e,r){var n=this._getFramesFromEvent(e),i=this._getFramesFromEvent(r);if(!n&&!i)return!0;if(n&&!i||!n&&i||(n=n,i=i,i.length!==n.length))return!1;for(var s=0;s<i.length;s++){var a=i[s],o=n[s];if(a.filename!==o.filename||a.lineno!==o.lineno||a.colno!==o.colno||a.function!==o.function)return!1}return!0},t.prototype._getExceptionFromEvent=function(e){return e.exception&&e.exception.values&&e.exception.values[0]},t.prototype._isSameExceptionEvent=function(e,r){var n=this._getExceptionFromEvent(r),i=this._getExceptionFromEvent(e);return!(!n||!i||n.type!==i.type||n.value!==i.value||!this._isSameFingerprint(e,r)||!this._isSameStacktrace(e,r))},t.prototype._isSameFingerprint=function(e,r){var n=e.fingerprint,i=r.fingerprint;if(!n&&!i)return!0;if(n&&!i||!n&&i)return!1;n=n,i=i;try{return n.join("")===i.join("")}catch{return!1}},t.id="Dedupe",t}();const Ea=Object.freeze(Object.defineProperty({__proto__:null,Breadcrumbs:on,Dedupe:bi,GlobalHandlers:mi,LinkedErrors:_i,TryCatch:vi,UserAgent:yi},Symbol.toStringTag,{value:"Module"}));var Si=function(t){fr(e,t);function e(r){r===void 0&&(r={});var n=this;return r._metadata=r._metadata||{},r._metadata.sdk=r._metadata.sdk||{name:"sentry.javascript.browser",packages:[{name:"npm:@sentry/browser",version:Lr}],version:Lr},n=t.call(this,ba,r)||this,n}return e.prototype.showReportDialog=function(r){r===void 0&&(r={});var n=I().document;if(n){if(!this._isEnabled()){h.error("Trying to call showReportDialog with Sentry Client disabled");return}gi(R(R({},r),{dsn:r.dsn||this.getDsn()}))}},e.prototype._prepareEvent=function(r,n,i){return r.platform=r.platform||"javascript",t.prototype._prepareEvent.call(this,r,n,i)},e.prototype._sendEvent=function(r){var n=this.getIntegration(on);n&&n.addSentryBreadcrumb(r),t.prototype._sendEvent.call(this,r)},e}(ta),ki=[new ui,new oi,new vi,new on,new mi,new _i,new bi,new yi];function wi(t){if(t===void 0&&(t={}),t.defaultIntegrations===void 0&&(t.defaultIntegrations=ki),t.release===void 0){var e=I();e.SENTRY_RELEASE&&e.SENTRY_RELEASE.id&&(t.release=e.SENTRY_RELEASE.id)}t.autoSessionTracking===void 0&&(t.autoSessionTracking=!0),t.sendClientReports===void 0&&(t.sendClientReports=!0),sa(Si,t),t.autoSessionTracking&&Fa()}function Oa(t){t===void 0&&(t={});var e=M(),r=e.getScope();r&&(t.user=R(R({},r.getUser()),t.user)),t.eventId||(t.eventId=e.lastEventId());var n=e.getClient();n&&n.showReportDialog(t)}function xa(){return M().lastEventId()}function Ca(){}function Ia(t){t()}function Ra(t){var e=M().getClient();return e?e.flush(t):(h.warn("Cannot flush events. No client defined."),$.resolve(!1))}function Pa(t){var e=M().getClient();return e?e.close(t):(h.warn("Cannot flush events and disable SDK. No client defined."),$.resolve(!1))}function Na(t){return De(t)()}function Fa(){var t=I(),e=t.document;if(typeof e>"u"){h.warn("Session tracking in non-browser environment with @sentry/browser is not supported.");return}var r=M();typeof r.startSession!="function"||typeof r.captureSession!="function"||(r.startSession({ignoreDuration:!0}),r.captureSession(),G({callback:function(n){var i=n.from,s=n.to;i===void 0||i===s||(r.startSession({ignoreDuration:!0}),r.captureSession())},type:"history"}))}var Ma="sentry.javascript.browser",Ti={},Rr=I();Rr.Sentry&&Rr.Sentry.Integrations&&(Ti=Rr.Sentry.Integrations);var ja=R(R(R({},Ti),oa),Ea);const Ba=Object.freeze(Object.defineProperty({__proto__:null,BrowserClient:Si,Hub:Dt,Integrations:ja,SDK_NAME:Ma,SDK_VERSION:Lr,Scope:yt,get Severity(){return Z},get Status(){return Re},Transports:ya,addBreadcrumb:Hs,addGlobalEventProcessor:At,captureEvent:Us,captureException:ti,captureMessage:Ds,close:Pa,configureScope:Ls,defaultIntegrations:ki,eventFromException:li,eventFromMessage:di,flush:Ra,forceLoad:Ca,getCurrentHub:M,getHubFromCarrier:ve,init:wi,injectReportDialog:gi,lastEventId:xa,makeMain:Ur,onLoad:Ia,setContext:Zs,setExtra:qs,setExtras:$s,setTag:zs,setTags:Ws,setUser:Ys,showReportDialog:Oa,startTransaction:Vs,withScope:ri,wrap:Na},Symbol.toStringTag,{value:"Module"}));/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Wr=function(t,e){return Wr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},Wr(t,e)};function un(t,e){Wr(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var O=function(){return O=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},O.apply(this,arguments)};function Aa(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function Da(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ei(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(o){a={error:o}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return s}function Ze(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Ei(arguments[e]));return t}var V;(function(t){t.Ok="ok",t.DeadlineExceeded="deadline_exceeded",t.Unauthenticated="unauthenticated",t.PermissionDenied="permission_denied",t.NotFound="not_found",t.ResourceExhausted="resource_exhausted",t.InvalidArgument="invalid_argument",t.Unimplemented="unimplemented",t.Unavailable="unavailable",t.InternalError="internal_error",t.UnknownError="unknown_error",t.Cancelled="cancelled",t.AlreadyExists="already_exists",t.FailedPrecondition="failed_precondition",t.Aborted="aborted",t.OutOfRange="out_of_range",t.DataLoss="data_loss"})(V||(V={}));(function(t){function e(r){if(r<400)return t.Ok;if(r>=400&&r<500)switch(r){case 401:return t.Unauthenticated;case 403:return t.PermissionDenied;case 404:return t.NotFound;case 409:return t.AlreadyExists;case 413:return t.FailedPrecondition;case 429:return t.ResourceExhausted;default:return t.InvalidArgument}if(r>=500&&r<600)switch(r){case 501:return t.Unimplemented;case 503:return t.Unavailable;case 504:return t.DeadlineExceeded;default:return t.InternalError}return t.UnknownError}t.fromHttpCode=e})(V||(V={}));var Ua=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function cn(t){t===void 0&&(t=(e=M().getClient())===null||e===void 0?void 0:e.getOptions());var e;return t?"tracesSampleRate"in t||"tracesSampler"in t:!1}function La(t){var e=t.match(Ua);if(e){var r=void 0;return e[3]==="1"?r=!0:e[3]==="0"&&(r=!1),{traceId:e[1],parentSampled:r,parentSpanId:e[2]}}}function vr(t){t===void 0&&(t=M());var e,r;return(r=(e=t)===null||e===void 0?void 0:e.getScope())===null||r===void 0?void 0:r.getTransaction()}function U(t){return t/1e3}function Ha(t){return t*1e3}function Za(){G({callback:jn,type:"error"}),G({callback:jn,type:"unhandledrejection"})}function jn(){var t=vr();t&&(h.log("[Tracing] Transaction: "+V.InternalError+" -> Global error occured"),t.setStatus(V.InternalError))}var Oi=function(){function t(e){e===void 0&&(e=1e3),this.spans=[],this._maxlen=e}return t.prototype.add=function(e){this.spans.length>this._maxlen?e.spanRecorder=void 0:this.spans.push(e)},t}(),$a=function(){function t(e){if(this.traceId=Ce(),this.spanId=Ce().substring(16),this.startTimestamp=_t(),this.tags={},this.data={},!e)return this;e.traceId&&(this.traceId=e.traceId),e.spanId&&(this.spanId=e.spanId),e.parentSpanId&&(this.parentSpanId=e.parentSpanId),"sampled"in e&&(this.sampled=e.sampled),e.op&&(this.op=e.op),e.description&&(this.description=e.description),e.data&&(this.data=e.data),e.tags&&(this.tags=e.tags),e.status&&(this.status=e.status),e.startTimestamp&&(this.startTimestamp=e.startTimestamp),e.endTimestamp&&(this.endTimestamp=e.endTimestamp)}return t.prototype.child=function(e){return this.startChild(e)},t.prototype.startChild=function(e){var r=new t(O(O({},e),{parentSpanId:this.spanId,sampled:this.sampled,traceId:this.traceId}));return r.spanRecorder=this.spanRecorder,r.spanRecorder&&r.spanRecorder.add(r),r.transaction=this.transaction,r},t.prototype.setTag=function(e,r){var n;return this.tags=O(O({},this.tags),(n={},n[e]=r,n)),this},t.prototype.setData=function(e,r){var n;return this.data=O(O({},this.data),(n={},n[e]=r,n)),this},t.prototype.setStatus=function(e){return this.status=e,this},t.prototype.setHttpStatus=function(e){this.setTag("http.status_code",String(e));var r=V.fromHttpCode(e);return r!==V.UnknownError&&this.setStatus(r),this},t.prototype.isSuccess=function(){return this.status===V.Ok},t.prototype.finish=function(e){this.endTimestamp=typeof e=="number"?e:_t()},t.prototype.toTraceparent=function(){var e="";return this.sampled!==void 0&&(e=this.sampled?"-1":"-0"),this.traceId+"-"+this.spanId+e},t.prototype.toContext=function(){return Ie({data:this.data,description:this.description,endTimestamp:this.endTimestamp,op:this.op,parentSpanId:this.parentSpanId,sampled:this.sampled,spanId:this.spanId,startTimestamp:this.startTimestamp,status:this.status,tags:this.tags,traceId:this.traceId})},t.prototype.updateWithContext=function(e){var r,n,i,s,a;return this.data=(r=e.data,r??{}),this.description=e.description,this.endTimestamp=e.endTimestamp,this.op=e.op,this.parentSpanId=e.parentSpanId,this.sampled=e.sampled,this.spanId=(n=e.spanId,n??this.spanId),this.startTimestamp=(i=e.startTimestamp,i??this.startTimestamp),this.status=e.status,this.tags=(s=e.tags,s??{}),this.traceId=(a=e.traceId,a??this.traceId),this},t.prototype.getTraceContext=function(){return Ie({data:Object.keys(this.data).length>0?this.data:void 0,description:this.description,op:this.op,parent_span_id:this.parentSpanId,span_id:this.spanId,status:this.status,tags:Object.keys(this.tags).length>0?this.tags:void 0,trace_id:this.traceId})},t.prototype.toJSON=function(){return Ie({data:Object.keys(this.data).length>0?this.data:void 0,description:this.description,op:this.op,parent_span_id:this.parentSpanId,span_id:this.spanId,start_timestamp:this.startTimestamp,status:this.status,tags:Object.keys(this.tags).length>0?this.tags:void 0,timestamp:this.endTimestamp,trace_id:this.traceId})},t}(),xi=function(t){un(e,t);function e(r,n){var i=t.call(this,r)||this;return i._measurements={},i._hub=M(),fe(n,Dt)&&(i._hub=n),i.name=r.name||"",i.metadata=r.metadata||{},i._trimEnd=r.trimEnd,i.transaction=i,i}return e.prototype.setName=function(r){this.name=r},e.prototype.initSpanRecorder=function(r){r===void 0&&(r=1e3),this.spanRecorder||(this.spanRecorder=new Oi(r)),this.spanRecorder.add(this)},e.prototype.setMeasurements=function(r){this._measurements=O({},r)},e.prototype.setMetadata=function(r){this.metadata=O(O({},this.metadata),r)},e.prototype.finish=function(r){var n=this,i,s,a,o,u;if(this.endTimestamp===void 0){if(this.name||(h.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this.name="<unlabeled transaction>"),t.prototype.finish.call(this,r),this.sampled!==!0){h.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled."),(u=(a=(i=this._hub.getClient())===null||i===void 0?void 0:(s=i).getTransport)===null||a===void 0?void 0:(o=a.call(s)).recordLostEvent)===null||u===void 0||u.call(o,re.SampleRate,"transaction");return}var c=this.spanRecorder?this.spanRecorder.spans.filter(function(p){return p!==n&&p.endTimestamp}):[];this._trimEnd&&c.length>0&&(this.endTimestamp=c.reduce(function(p,v){return p.endTimestamp&&v.endTimestamp?p.endTimestamp>v.endTimestamp?p:v:p}).endTimestamp);var l={contexts:{trace:this.getTraceContext()},spans:c,start_timestamp:this.startTimestamp,tags:this.tags,timestamp:this.endTimestamp,transaction:this.name,type:"transaction",debug_meta:this.metadata},d=Object.keys(this._measurements).length>0;return d&&(h.log("[Measurements] Adding measurements to transaction",JSON.stringify(this._measurements,void 0,2)),l.measurements=this._measurements),h.log("[Tracing] Finishing "+this.op+" transaction: "+this.name+"."),this._hub.captureEvent(l)}},e.prototype.toContext=function(){var r=t.prototype.toContext.call(this);return Ie(O(O({},r),{name:this.name,trimEnd:this._trimEnd}))},e.prototype.updateWithContext=function(r){var n;return t.prototype.updateWithContext.call(this,r),this.name=(n=r.name,n??""),this._trimEnd=r.trimEnd,this},e}($a),Ci=1e3,Wa=5e3,qa=function(t){un(e,t);function e(r,n,i,s){i===void 0&&(i="");var a=t.call(this,s)||this;return a._pushActivity=r,a._popActivity=n,a.transactionSpanId=i,a}return e.prototype.add=function(r){var n=this;r.spanId!==this.transactionSpanId&&(r.finish=function(i){r.endTimestamp=typeof i=="number"?i:_t(),n._popActivity(r.spanId)},r.endTimestamp===void 0&&this._pushActivity(r.spanId)),t.prototype.add.call(this,r)},e}(Oi),za=function(t){un(e,t);function e(r,n,i,s){i===void 0&&(i=Ci),s===void 0&&(s=!1);var a=t.call(this,r,n)||this;return a._idleHub=n,a._idleTimeout=i,a._onScope=s,a.activities={},a._heartbeatCounter=0,a._finished=!1,a._beforeFinishCallbacks=[],n&&s&&(Bn(n),h.log("Setting idle transaction on scope. Span ID: "+a.spanId),n.configureScope(function(o){return o.setSpan(a)})),a._initTimeout=setTimeout(function(){a._finished||a.finish()},a._idleTimeout),a}return e.prototype.finish=function(r){var n,i,s=this;if(r===void 0&&(r=_t()),this._finished=!0,this.activities={},this.spanRecorder){h.log("[Tracing] finishing IdleTransaction",new Date(r*1e3).toISOString(),this.op);try{for(var a=Da(this._beforeFinishCallbacks),o=a.next();!o.done;o=a.next()){var u=o.value;u(this,r)}}catch(c){n={error:c}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}this.spanRecorder.spans=this.spanRecorder.spans.filter(function(c){if(c.spanId===s.spanId)return!0;c.endTimestamp||(c.endTimestamp=r,c.setStatus(V.Cancelled),h.log("[Tracing] cancelling span since transaction ended early",JSON.stringify(c,void 0,2)));var l=c.startTimestamp<r;return l||h.log("[Tracing] discarding Span since it happened after Transaction was finished",JSON.stringify(c,void 0,2)),l}),h.log("[Tracing] flushing IdleTransaction")}else h.log("[Tracing] No active IdleTransaction");return this._onScope&&Bn(this._idleHub),t.prototype.finish.call(this,r)},e.prototype.registerBeforeFinishCallback=function(r){this._beforeFinishCallbacks.push(r)},e.prototype.initSpanRecorder=function(r){var n=this;if(!this.spanRecorder){var i=function(a){n._finished||n._pushActivity(a)},s=function(a){n._finished||n._popActivity(a)};this.spanRecorder=new qa(i,s,this.spanId,r),h.log("Starting heartbeat"),this._pingHeartbeat()}this.spanRecorder.add(this)},e.prototype._pushActivity=function(r){this._initTimeout&&(clearTimeout(this._initTimeout),this._initTimeout=void 0),h.log("[Tracing] pushActivity: "+r),this.activities[r]=!0,h.log("[Tracing] new activities count",Object.keys(this.activities).length)},e.prototype._popActivity=function(r){var n=this;if(this.activities[r]&&(h.log("[Tracing] popActivity "+r),delete this.activities[r],h.log("[Tracing] new activities count",Object.keys(this.activities).length)),Object.keys(this.activities).length===0){var i=this._idleTimeout,s=_t()+i/1e3;setTimeout(function(){n._finished||n.finish(s)},i)}},e.prototype._beat=function(){if(!this._finished){var r=Object.keys(this.activities).join("");r===this._prevHeartbeatString?this._heartbeatCounter+=1:this._heartbeatCounter=1,this._prevHeartbeatString=r,this._heartbeatCounter>=3?(h.log("[Tracing] Transaction finished because of no change for 3 heart beats"),this.setStatus(V.DeadlineExceeded),this.setTag("heartbeat","failed"),this.finish()):this._pingHeartbeat()}},e.prototype._pingHeartbeat=function(){var r=this;h.log("pinging Heartbeat -> current counter: "+this._heartbeatCounter),setTimeout(function(){r._beat()},Wa)},e}(xi);function Bn(t){if(t){var e=t.getScope();if(e){var r=e.getTransaction();r&&e.setSpan(void 0)}}}function Ya(){var t=this.getScope();if(t){var e=t.getSpan();if(e)return{"sentry-trace":e.toTraceparent()}}return{}}function Ii(t,e,r){if(!cn(e))return t.sampled=!1,t;if(t.sampled!==void 0)return t.setMetadata({transactionSampling:{method:Ke.Explicit}}),t;var n;return typeof e.tracesSampler=="function"?(n=e.tracesSampler(r),t.setMetadata({transactionSampling:{method:Ke.Sampler,rate:Number(n)}})):r.parentSampled!==void 0?(n=r.parentSampled,t.setMetadata({transactionSampling:{method:Ke.Inheritance}})):(n=e.tracesSampleRate,t.setMetadata({transactionSampling:{method:Ke.Rate,rate:Number(n)}})),Va(n)?n?(t.sampled=Math.random()<n,t.sampled?(h.log("[Tracing] starting "+t.op+" transaction - "+t.name),t):(h.log("[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = "+Number(n)+")"),t)):(h.log("[Tracing] Discarding transaction because "+(typeof e.tracesSampler=="function"?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0")),t.sampled=!1,t):(h.warn("[Tracing] Discarding transaction because of invalid sample rate."),t.sampled=!1,t)}function Va(t){return isNaN(t)||!(typeof t=="number"||typeof t=="boolean")?(h.warn("[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got "+JSON.stringify(t)+" of type "+JSON.stringify(typeof t)+"."),!1):t<0||t>1?(h.warn("[Tracing] Given sample rate is invalid. Sample rate must be between 0 and 1. Got "+t+"."),!1):!0}function Ja(t,e){var r,n,i=((r=this.getClient())===null||r===void 0?void 0:r.getOptions())||{},s=new xi(t,this);return s=Ii(s,i,O({parentSampled:t.parentSampled,transactionContext:t},e)),s.sampled&&s.initSpanRecorder((n=i._experiments)===null||n===void 0?void 0:n.maxSpans),s}function Ka(t,e,r,n,i){var s,a,o=((s=t.getClient())===null||s===void 0?void 0:s.getOptions())||{},u=new za(e,t,r,n);return u=Ii(u,o,O({parentSampled:e.parentSampled,transactionContext:e},i)),u.sampled&&u.initSpanRecorder((a=o._experiments)===null||a===void 0?void 0:a.maxSpans),u}function Xa(){var t=ut();t.__SENTRY__&&(t.__SENTRY__.extensions=t.__SENTRY__.extensions||{},t.__SENTRY__.extensions.startTransaction||(t.__SENTRY__.extensions.startTransaction=Ja),t.__SENTRY__.extensions.traceHeaders||(t.__SENTRY__.extensions.traceHeaders=Ya))}function Qa(){var t=ut();if(t.__SENTRY__){var e={mongodb:function(){var n=xe(ye,"./integrations/mongo");return new n.Mongo},mongoose:function(){var n=xe(ye,"./integrations/mongo");return new n.Mongo({mongoose:!0})},mysql:function(){var n=xe(ye,"./integrations/mysql");return new n.Mysql},pg:function(){var n=xe(ye,"./integrations/postgres");return new n.Postgres}},r=Object.keys(e).filter(function(n){return!!hr(n)}).map(function(n){try{return e[n]()}catch{return}}).filter(function(n){return n});r.length>0&&(t.__SENTRY__.integrations=Ze(t.__SENTRY__.integrations||[],r))}}function Ga(){Xa(),Bt()&&Qa(),Za()}var Yt=I();function eo(){Yt&&Yt.document?Yt.document.addEventListener("visibilitychange",function(){var t=vr();Yt.document.hidden&&t&&(h.log("[Tracing] Transaction: "+V.Cancelled+" -> since tab moved to the background, op: "+t.op),t.status||t.setStatus(V.Cancelled),t.setTag("visibilitychange","document.hidden"),t.finish())}):h.warn("[Tracing] Could not set up background tab detection due to lack of global document")}var ln=function(t,e,r){var n;return function(i){e.value>=0&&(i||r)&&(e.delta=e.value-(n||0),(e.delta||n===void 0)&&(n=e.value,t(e)))}},to=function(){return"v2-"+Date.now()+"-"+(Math.floor(Math.random()*(9e12-1))+1e12)},dn=function(t,e){return{name:t,value:e??-1,delta:0,entries:[],id:to()}},fn=function(t,e){try{if(PerformanceObserver.supportedEntryTypes.includes(t)){if(t==="first-input"&&!("PerformanceEventTiming"in self))return;var r=new PerformanceObserver(function(n){return n.getEntries().map(e)});return r.observe({type:t,buffered:!0}),r}}catch{}},_r=function(t,e){var r=function(n){(n.type==="pagehide"||I().document.visibilityState==="hidden")&&(t(n),e&&(removeEventListener("visibilitychange",r,!0),removeEventListener("pagehide",r,!0)))};addEventListener("visibilitychange",r,!0),addEventListener("pagehide",r,!0)},ro=function(t,e){var r=dn("CLS",0),n,i=0,s=[],a=function(u){if(u&&!u.hadRecentInput){var c=s[0],l=s[s.length-1];i&&s.length!==0&&u.startTime-l.startTime<1e3&&u.startTime-c.startTime<5e3?(i+=u.value,s.push(u)):(i=u.value,s=[u]),i>r.value&&(r.value=i,r.entries=s,n&&n())}},o=fn("layout-shift",a);o&&(n=ln(t,r,e),_r(function(){o.takeRecords().map(a),n(!0)}))},Xt=-1,no=function(){return I().document.visibilityState==="hidden"?0:1/0},io=function(){_r(function(t){var e=t.timeStamp;Xt=e},!0)},pn=function(){return Xt<0&&(Xt=no(),io()),{get firstHiddenTime(){return Xt}}},so=function(t,e){var r=pn(),n=dn("FID"),i,s=function(o){i&&o.startTime<r.firstHiddenTime&&(n.value=o.processingStart-o.startTime,n.entries.push(o),i(!0))},a=fn("first-input",s);a&&(i=ln(t,n,e),_r(function(){a.takeRecords().map(s),a.disconnect()},!0))},An={},ao=function(t,e){var r=pn(),n=dn("LCP"),i,s=function(u){var c=u.startTime;c<r.firstHiddenTime&&(n.value=c,n.entries.push(u)),i&&i()},a=fn("largest-contentful-paint",s);if(a){i=ln(t,n,e);var o=function(){An[n.id]||(a.takeRecords().map(s),a.disconnect(),An[n.id]=!0,i(!0))};["keydown","click"].forEach(function(u){addEventListener(u,o,{once:!0,capture:!0})}),_r(o,!0)}},z=I(),oo={_reportAllChanges:!1},uo=function(){function t(e){var r,n;this._measurements={},this._performanceCursor=0,!Bt()&&(!((r=z)===null||r===void 0)&&r.performance)&&(!((n=z)===null||n===void 0)&&n.document)&&(z.performance.mark&&z.performance.mark("sentry-tracing-init"),this._trackCLS(),this._trackLCP(e._reportAllChanges),this._trackFID())}return t.prototype.addPerformanceEntries=function(e){var r=this;if(!(!z||!z.performance||!z.performance.getEntries||!dt)){h.log("[Tracing] Adding & adjusting spans using Performance API");var n=U(dt),i;if(z.document&&z.document.scripts){for(var s=0;s<z.document.scripts.length;s++)if(z.document.scripts[s].dataset.entry==="true"){i=z.document.scripts[s].src;break}}var a,o,u,c;if(z.performance.getEntries().slice(this._performanceCursor).forEach(function(d){var p=U(d.startTime),v=U(d.duration);if(!(e.op==="navigation"&&n+p<e.startTimestamp))switch(d.entryType){case"navigation":{co(e,d,n),u=n+U(d.responseStart),c=n+U(d.requestStart);break}case"mark":case"paint":case"measure":{var T=lo(e,d,p,v,n);o===void 0&&d.name==="sentry-tracing-init"&&(o=T);var x=pn(),P=d.startTime<x.firstHiddenTime;d.name==="first-paint"&&P&&(h.log("[Measurements] Adding FP"),r._measurements.fp={value:d.startTime},r._measurements["mark.fp"]={value:T}),d.name==="first-contentful-paint"&&P&&(h.log("[Measurements] Adding FCP"),r._measurements.fcp={value:d.startTime},r._measurements["mark.fcp"]={value:T});break}case"resource":{var q=d.name.replace(z.location.origin,""),L=fo(e,d,q,p,v,n);a===void 0&&(i||"").indexOf(q)>-1&&(a=L);break}}}),a!==void 0&&o!==void 0&&$e(e,{description:"evaluation",endTimestamp:o,op:"script",startTimestamp:a}),this._performanceCursor=Math.max(performance.getEntries().length-1,0),this._trackNavigator(e),e.op==="pageload"){var l=U(dt);typeof u=="number"&&(h.log("[Measurements] Adding TTFB"),this._measurements.ttfb={value:(u-e.startTimestamp)*1e3},typeof c=="number"&&c<=u&&(this._measurements["ttfb.requestTime"]={value:(u-c)*1e3})),["fcp","fp","lcp"].forEach(function(d){if(!(!r._measurements[d]||l>=e.startTimestamp)){var p=r._measurements[d].value,v=l+U(p),T=Math.abs((v-e.startTimestamp)*1e3),x=T-p;h.log("[Measurements] Normalized "+d+" from "+p+" to "+T+" ("+x+")"),r._measurements[d].value=T}}),this._measurements["mark.fid"]&&this._measurements.fid&&$e(e,{description:"first input delay",endTimestamp:this._measurements["mark.fid"].value+U(this._measurements.fid.value),op:"web.vitals",startTimestamp:this._measurements["mark.fid"].value}),"fcp"in this._measurements||delete this._measurements.cls,e.setMeasurements(this._measurements),this._tagMetricInfo(e)}}},t.prototype._tagMetricInfo=function(e){this._lcpEntry&&(h.log("[Measurements] Adding LCP Data"),this._lcpEntry.element&&e.setTag("lcp.element",nt(this._lcpEntry.element)),this._lcpEntry.id&&e.setTag("lcp.id",this._lcpEntry.id),this._lcpEntry.url&&e.setTag("lcp.url",this._lcpEntry.url.trim().slice(0,200)),e.setTag("lcp.size",this._lcpEntry.size)),this._clsEntry&&this._clsEntry.sources&&(h.log("[Measurements] Adding CLS Data"),this._clsEntry.sources.forEach(function(r,n){return e.setTag("cls.source."+(n+1),nt(r.node))}))},t.prototype._trackCLS=function(){var e=this;ro(function(r){var n=r.entries.pop();n&&(h.log("[Measurements] Adding CLS"),e._measurements.cls={value:r.value},e._clsEntry=n)})},t.prototype._trackNavigator=function(e){var r=z.navigator;if(r){var n=r.connection;n&&(n.effectiveType&&e.setTag("effectiveConnectionType",n.effectiveType),n.type&&e.setTag("connectionType",n.type),Vt(n.rtt)&&(this._measurements["connection.rtt"]={value:n.rtt}),Vt(n.downlink)&&(this._measurements["connection.downlink"]={value:n.downlink})),Vt(r.deviceMemory)&&e.setTag("deviceMemory",String(r.deviceMemory)),Vt(r.hardwareConcurrency)&&e.setTag("hardwareConcurrency",String(r.hardwareConcurrency))}},t.prototype._trackLCP=function(e){var r=this;ao(function(n){var i=n.entries.pop();if(i){var s=U(dt),a=U(i.startTime);h.log("[Measurements] Adding LCP"),r._measurements.lcp={value:n.value},r._measurements["mark.lcp"]={value:s+a},r._lcpEntry=i}},e)},t.prototype._trackFID=function(){var e=this;so(function(r){var n=r.entries.pop();if(n){var i=U(dt),s=U(n.startTime);h.log("[Measurements] Adding FID"),e._measurements.fid={value:r.value},e._measurements["mark.fid"]={value:i+s}}})},t}();function co(t,e,r){we({transaction:t,entry:e,event:"unloadEvent",timeOrigin:r}),we({transaction:t,entry:e,event:"redirect",timeOrigin:r}),we({transaction:t,entry:e,event:"domContentLoadedEvent",timeOrigin:r}),we({transaction:t,entry:e,event:"loadEvent",timeOrigin:r}),we({transaction:t,entry:e,event:"connect",timeOrigin:r}),we({transaction:t,entry:e,event:"secureConnection",timeOrigin:r,eventEnd:"connectEnd",description:"TLS/SSL"}),we({transaction:t,entry:e,event:"fetch",timeOrigin:r,eventEnd:"domainLookupStart",description:"cache"}),we({transaction:t,entry:e,event:"domainLookup",timeOrigin:r,description:"DNS"}),po(t,e,r)}function lo(t,e,r,n,i){var s=i+r,a=s+n;return $e(t,{description:e.name,endTimestamp:a,op:e.entryType,startTimestamp:s}),s}function fo(t,e,r,n,i,s){if(!(e.initiatorType==="xmlhttprequest"||e.initiatorType==="fetch")){var a={};"transferSize"in e&&(a["Transfer Size"]=e.transferSize),"encodedBodySize"in e&&(a["Encoded Body Size"]=e.encodedBodySize),"decodedBodySize"in e&&(a["Decoded Body Size"]=e.decodedBodySize);var o=s+n,u=o+i;return $e(t,{description:r,endTimestamp:u,op:e.initiatorType?"resource."+e.initiatorType:"resource",startTimestamp:o,data:a}),u}}function we(t){var e=t.transaction,r=t.entry,n=t.event,i=t.timeOrigin,s=t.eventEnd,a=t.description,o=s?r[s]:r[n+"End"],u=r[n+"Start"];!u||!o||$e(e,{op:"browser",description:a??n,startTimestamp:i+U(u),endTimestamp:i+U(o)})}function po(t,e,r){$e(t,{op:"browser",description:"request",startTimestamp:r+U(e.requestStart),endTimestamp:r+U(e.responseEnd)}),$e(t,{op:"browser",description:"response",startTimestamp:r+U(e.responseStart),endTimestamp:r+U(e.responseEnd)})}function $e(t,e){var r=e.startTimestamp,n=Aa(e,["startTimestamp"]);return r&&t.startTimestamp>r&&(t.startTimestamp=r),t.startChild(O({startTimestamp:r},n))}function Vt(t){return typeof t=="number"&&isFinite(t)}var ho=["localhost",/^\//],rr={traceFetch:!0,traceXHR:!0,tracingOrigins:ho};function go(t){var e=O(O({},rr),t),r=e.traceFetch,n=e.traceXHR,i=e.tracingOrigins,s=e.shouldCreateSpanForRequest,a={},o=function(l){if(a[l])return a[l];var d=i;return a[l]=d.some(function(p){return mt(l,p)})&&!mt(l,"sentry_key"),a[l]},u=o;typeof s=="function"&&(u=function(l){return o(l)&&s(l)});var c={};r&&G({callback:function(l){mo(l,u,c)},type:"fetch"}),n&&G({callback:function(l){vo(l,u,c)},type:"xhr"})}function mo(t,e,r){if(!(!cn()||!(t.fetchData&&e(t.fetchData.url)))){if(t.endTimestamp&&t.fetchData.__span){var n=r[t.fetchData.__span];n&&(t.response?n.setHttpStatus(t.response.status):t.error&&n.setStatus(V.InternalError),n.finish(),delete r[t.fetchData.__span]);return}var i=vr();if(i){var n=i.startChild({data:O(O({},t.fetchData),{type:"fetch"}),description:t.fetchData.method+" "+t.fetchData.url,op:"http.client"});t.fetchData.__span=n.spanId,r[n.spanId]=n;var s=t.args[0]=t.args[0],a=t.args[1]=t.args[1]||{},o=a.headers;fe(s,Request)&&(o=s.headers),o?typeof o.append=="function"?o.append("sentry-trace",n.toTraceparent()):Array.isArray(o)?o=Ze(o,[["sentry-trace",n.toTraceparent()]]):o=O(O({},o),{"sentry-trace":n.toTraceparent()}):o={"sentry-trace":n.toTraceparent()},a.headers=o}}}function vo(t,e,r){var n,i;if(!(!cn()||!((n=t.xhr)===null||n===void 0)&&n.__sentry_own_request__||!(!((i=t.xhr)===null||i===void 0)&&i.__sentry_xhr__&&e(t.xhr.__sentry_xhr__.url)))){var s=t.xhr.__sentry_xhr__;if(t.endTimestamp&&t.xhr.__sentry_xhr_span_id__){var a=r[t.xhr.__sentry_xhr_span_id__];a&&(a.setHttpStatus(s.status_code),a.finish(),delete r[t.xhr.__sentry_xhr_span_id__]);return}var o=vr();if(o){var a=o.startChild({data:O(O({},s.data),{type:"xhr",method:s.method,url:s.url}),description:s.method+" "+s.url,op:"http.client"});if(t.xhr.__sentry_xhr_span_id__=a.spanId,r[t.xhr.__sentry_xhr_span_id__]=a,t.xhr.setRequestHeader)try{t.xhr.setRequestHeader("sentry-trace",a.toTraceparent())}catch{}}}}var ft=I();function _o(t,e,r){if(e===void 0&&(e=!0),r===void 0&&(r=!0),!ft||!ft.location){h.warn("Could not initialize routing instrumentation due to invalid location");return}var n=ft.location.href,i;e&&(i=t({name:ft.location.pathname,op:"pageload"})),r&&G({callback:function(s){var a=s.to,o=s.from;if(o===void 0&&n&&n.indexOf(a)!==-1){n=void 0;return}o!==a&&(n=void 0,i&&(h.log("[Tracing] Finishing current transaction with op: "+i.op),i.finish()),i=t({name:ft.location.pathname,op:"navigation"}))},type:"history"})}var yo=600,bo=O({idleTimeout:Ci,markBackgroundTransactions:!0,maxTransactionDuration:yo,routingInstrumentation:_o,startTransactionOnLocationChange:!0,startTransactionOnPageLoad:!0},rr),So=function(){function t(e){this.name=t.id,this._emitOptionsWarning=!1;var r=rr.tracingOrigins;e&&e.tracingOrigins&&Array.isArray(e.tracingOrigins)&&e.tracingOrigins.length!==0?r=e.tracingOrigins:this._emitOptionsWarning=!0,this.options=O(O(O({},bo),e),{tracingOrigins:r}),this._metrics=new uo(O(O({},oo),this.options._metricOptions))}return t.prototype.setupOnce=function(e,r){var n=this;this._getCurrentHub=r,this._emitOptionsWarning&&(h.warn("[Tracing] You need to define `tracingOrigins` in the options. Set an array of urls or patterns to trace."),h.warn("[Tracing] We added a reasonable default for you: "+rr.tracingOrigins));var i=this.options,s=i.routingInstrumentation,a=i.startTransactionOnLocationChange,o=i.startTransactionOnPageLoad,u=i.markBackgroundTransactions,c=i.traceFetch,l=i.traceXHR,d=i.tracingOrigins,p=i.shouldCreateSpanForRequest;s(function(v){return n._createRouteTransaction(v)},o,a),u&&eo(),go({traceFetch:c,traceXHR:l,tracingOrigins:d,shouldCreateSpanForRequest:p})},t.prototype._createRouteTransaction=function(e){var r=this;if(!this._getCurrentHub){h.warn("[Tracing] Did not create "+e.op+" transaction because _getCurrentHub is invalid.");return}var n=this.options,i=n.beforeNavigate,s=n.idleTimeout,a=n.maxTransactionDuration,o=e.op==="pageload"?ko():void 0,u=O(O(O({},e),o),{trimEnd:!0}),c=typeof i=="function"?i(u):u,l=c===void 0?O(O({},u),{sampled:!1}):c;l.sampled===!1&&h.log("[Tracing] Will not send "+l.op+" transaction because of beforeNavigate."),h.log("[Tracing] Starting "+l.op+" transaction on scope");var d=this._getCurrentHub(),p=I().location,v=Ka(d,l,s,!0,{location:p});return v.registerBeforeFinishCallback(function(T,x){r._metrics.addPerformanceEntries(T),To(Ha(a),T,x)}),v},t.id="BrowserTracing",t}();function ko(){var t=wo("sentry-trace");if(t)return La(t)}function wo(t){var e=I().document.querySelector("meta[name="+t+"]");return e?e.getAttribute("content"):null}function To(t,e,r){var n=r-e.startTimestamp,i=r&&(n>t||n<0);i&&(e.setStatus(V.DeadlineExceeded),e.setTag("maxTransactionDurationExceeded","true"))}var Eo=function(){function t(e){e===void 0&&(e={}),this.name=t.id,this._router=e.router||e.app,this._methods=(Array.isArray(e.methods)?e.methods:[]).concat("use")}return t.prototype.setupOnce=function(){if(!this._router){h.error("ExpressIntegration is missing an Express instance");return}Co(this._router,this._methods)},t.id="Express",t}();function Dn(t,e){var r=t.length;switch(r){case 2:return function(n,i){var s=i.__sentry_transaction;if(s){var a=s.startChild({description:t.name,op:"middleware."+e});i.once("finish",function(){a.finish()})}return t.call(this,n,i)};case 3:return function(n,i,s){var a,o=i.__sentry_transaction,u=(a=o)===null||a===void 0?void 0:a.startChild({description:t.name,op:"middleware."+e});t.call(this,n,i,function(){for(var c=[],l=0;l<arguments.length;l++)c[l]=arguments[l];var d;(d=u)===null||d===void 0||d.finish(),s.call.apply(s,Ze([this],c))})};case 4:return function(n,i,s,a){var o,u=s.__sentry_transaction,c=(o=u)===null||o===void 0?void 0:o.startChild({description:t.name,op:"middleware."+e});t.call(this,n,i,s,function(){for(var l=[],d=0;d<arguments.length;d++)l[d]=arguments[d];var p;(p=c)===null||p===void 0||p.finish(),a.call.apply(a,Ze([this],l))})};default:throw new Error("Express middleware takes 2-4 arguments. Got: "+r)}}function Oo(t,e){return t.map(function(r){return typeof r=="function"?Dn(r,e):Array.isArray(r)?r.map(function(n){return typeof n=="function"?Dn(n,e):n}):r})}function xo(t,e){var r=t[e];return t[e]=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return r.call.apply(r,Ze([this],Oo(n,e)))},t}function Co(t,e){e===void 0&&(e=[]),e.forEach(function(r){return xo(t,r)})}var Io=function(){function t(e){e===void 0&&(e={}),this.name=t.id,this._usePgNative=!!e.usePgNative}return t.prototype.setupOnce=function(e,r){var n,i=hr("pg");if(!i){h.error("Postgres Integration was unable to require `pg` package.");return}if(this._usePgNative&&!(!((n=i.native)===null||n===void 0)&&n.Client)){h.error("Postgres Integration was unable to access 'pg-native' bindings.");return}var s=(this._usePgNative?i.native:i).Client;D(s.prototype,"query",function(a){return function(o,u,c){var l,d,p,v=r().getScope(),T=(l=v)===null||l===void 0?void 0:l.getSpan(),x=(d=T)===null||d===void 0?void 0:d.startChild({description:typeof o=="string"?o:o.text,op:"db"});if(typeof c=="function")return a.call(this,o,u,function(q,L){var X;(X=x)===null||X===void 0||X.finish(),c(q,L)});if(typeof u=="function")return a.call(this,o,function(q,L){var X;(X=x)===null||X===void 0||X.finish(),u(q,L)});var P=typeof u<"u"?a.call(this,o,u):a.call(this,o);return jt(P)?P.then(function(q){var L;return(L=x)===null||L===void 0||L.finish(),q}):((p=x)===null||p===void 0||p.finish(),P)}})},t.id="Postgres",t}(),Ro=function(){function t(){this.name=t.id}return t.prototype.setupOnce=function(e,r){var n=hr("mysql/lib/Connection.js");if(!n){h.error("Mysql Integration was unable to require `mysql` package.");return}D(n,"createQuery",function(i){return function(s,a,o){var u,c,l=r().getScope(),d=(u=l)===null||u===void 0?void 0:u.getSpan(),p=(c=d)===null||c===void 0?void 0:c.startChild({description:typeof s=="string"?s:s.sql,op:"db"});return typeof o=="function"?i.call(this,s,a,function(v,T,x){var P;(P=p)===null||P===void 0||P.finish(),o(v,T,x)}):typeof a=="function"?i.call(this,s,function(v,T,x){var P;(P=p)===null||P===void 0||P.finish(),a(v,T,x)}):i.call(this,s,a,o)}})},t.id="Mysql",t}(),Po=["aggregate","bulkWrite","countDocuments","createIndex","createIndexes","deleteMany","deleteOne","distinct","drop","dropIndex","dropIndexes","estimatedDocumentCount","find","findOne","findOneAndDelete","findOneAndReplace","findOneAndUpdate","indexes","indexExists","indexInformation","initializeOrderedBulkOp","insertMany","insertOne","isCapped","mapReduce","options","parallelCollectionScan","rename","replaceOne","stats","updateMany","updateOne"],No={bulkWrite:["operations"],countDocuments:["query"],createIndex:["fieldOrSpec"],createIndexes:["indexSpecs"],deleteMany:["filter"],deleteOne:["filter"],distinct:["key","query"],dropIndex:["indexName"],find:["query"],findOne:["query"],findOneAndDelete:["filter"],findOneAndReplace:["filter","replacement"],findOneAndUpdate:["filter","update"],indexExists:["indexes"],insertMany:["docs"],insertOne:["doc"],mapReduce:["map","reduce"],rename:["newName"],replaceOne:["filter","doc"],updateMany:["filter","update"],updateOne:["filter","update"]},Fo=function(){function t(e){e===void 0&&(e={}),this.name=t.id,this._operations=Array.isArray(e.operations)?e.operations:Po,this._describeOperations="describeOperations"in e?e.describeOperations:!0,this._useMongoose=!!e.useMongoose}return t.prototype.setupOnce=function(e,r){var n=this._useMongoose?"mongoose":"mongodb",i=hr(n);if(!i){h.error("Mongo Integration was unable to require `"+n+"` package.");return}this._instrumentOperations(i.Collection,this._operations,r)},t.prototype._instrumentOperations=function(e,r,n){var i=this;r.forEach(function(s){return i._patchOperation(e,s,n)})},t.prototype._patchOperation=function(e,r,n){if(r in e.prototype){var i=this._getSpanContextFromOperationArguments.bind(this);D(e.prototype,r,function(s){return function(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];var u,c,l,d,p=a[a.length-1],v=n().getScope(),T=(u=v)===null||u===void 0?void 0:u.getSpan();if(typeof p!="function"||r==="mapReduce"&&a.length===2){var x=(c=T)===null||c===void 0?void 0:c.startChild(i(this,r,a)),P=s.call.apply(s,Ze([this],a));return jt(P)?P.then(function(L){var X;return(X=x)===null||X===void 0||X.finish(),L}):((l=x)===null||l===void 0||l.finish(),P)}var q=(d=T)===null||d===void 0?void 0:d.startChild(i(this,r,a.slice(0,-1)));return s.call.apply(s,Ze([this],a.slice(0,-1),[function(L,X){var kr;(kr=q)===null||kr===void 0||kr.finish(),p(L,X)}]))}})}},t.prototype._getSpanContextFromOperationArguments=function(e,r,n){var i={collectionName:e.collectionName,dbName:e.dbName,namespace:e.namespace},s={op:"db",description:r,data:i},a=No[r],o=Array.isArray(this._describeOperations)?this._describeOperations.includes(r):this._describeOperations;if(!a||!o)return s;try{if(r==="mapReduce"){var u=Ei(n,2),c=u[0],l=u[1];i[a[0]]=typeof c=="string"?c:c.name||"<anonymous>",i[a[1]]=typeof l=="string"?l:l.name||"<anonymous>"}else for(var d=0;d<a.length;d++)i[a[d]]=JSON.stringify(n[d])}catch{}return s},t.id="Mongo",t}();const Mo=Object.freeze(Object.defineProperty({__proto__:null,Express:Eo,Mongo:Fo,Mysql:Ro,Postgres:Io},Symbol.toStringTag,{value:"Module"}));var jo=O(O({},Mo),{BrowserTracing:So});Ga();function Bo(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}function Ao(t){return t==null}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var qr=function(t,e){return qr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},qr(t,e)};function ct(t,e){qr(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function nr(t){return typeof t=="function"}var Un=!1,ce={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){var e=new Error;""+e.stack}Un=t},get useDeprecatedSynchronousErrorHandling(){return Un}};function Qe(t){setTimeout(function(){throw t},0)}var ir={closed:!0,next:function(t){},error:function(t){if(ce.useDeprecatedSynchronousErrorHandling)throw t;Qe(t)},complete:function(){}},zr=function(){return Array.isArray||function(t){return t&&typeof t.length=="number"}}();function hn(t){return t!==null&&typeof t=="object"}var Do=function(){function t(e){return Error.call(this),this.message=e?e.length+` errors occurred during unsubscription:
`+e.map(function(r,n){return n+1+") "+r.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=e,this}return t.prototype=Object.create(Error.prototype),t}(),Qt=Do,Ut=function(){function t(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}return t.prototype.unsubscribe=function(){var e;if(!this.closed){var r=this,n=r._parentOrParents,i=r._unsubscribe,s=r._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(n!==null)for(var a=0;a<n.length;++a){var o=n[a];o.remove(this)}if(nr(i))try{i.call(this)}catch(l){e=l instanceof Qt?Ln(l.errors):[l]}if(zr(s))for(var a=-1,u=s.length;++a<u;){var c=s[a];if(hn(c))try{c.unsubscribe()}catch(d){e=e||[],d instanceof Qt?e=e.concat(Ln(d.errors)):e.push(d)}}if(e)throw new Qt(e)}},t.prototype.add=function(e){var r=e;if(!e)return t.EMPTY;switch(typeof e){case"function":r=new t(e);case"object":if(r===this||r.closed||typeof r.unsubscribe!="function")return r;if(this.closed)return r.unsubscribe(),r;if(!(r instanceof t)){var n=r;r=new t,r._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var i=r._parentOrParents;if(i===null)r._parentOrParents=this;else if(i instanceof t){if(i===this)return r;r._parentOrParents=[i,this]}else if(i.indexOf(this)===-1)i.push(this);else return r;var s=this._subscriptions;return s===null?this._subscriptions=[r]:s.push(r),r},t.prototype.remove=function(e){var r=this._subscriptions;if(r){var n=r.indexOf(e);n!==-1&&r.splice(n,1)}},t.EMPTY=function(e){return e.closed=!0,e}(new t),t}();function Ln(t){return t.reduce(function(e,r){return e.concat(r instanceof Qt?r.errors:r)},[])}var Yr=function(){return typeof Symbol=="function"?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),Se=function(t){ct(e,t);function e(r,n,i){var s=t.call(this)||this;switch(s.syncErrorValue=null,s.syncErrorThrown=!1,s.syncErrorThrowable=!1,s.isStopped=!1,arguments.length){case 0:s.destination=ir;break;case 1:if(!r){s.destination=ir;break}if(typeof r=="object"){r instanceof e?(s.syncErrorThrowable=r.syncErrorThrowable,s.destination=r,r.add(s)):(s.syncErrorThrowable=!0,s.destination=new Hn(s,r));break}default:s.syncErrorThrowable=!0,s.destination=new Hn(s,r,n,i);break}return s}return e.prototype[Yr]=function(){return this},e.create=function(r,n,i){var s=new e(r,n,i);return s.syncErrorThrowable=!1,s},e.prototype.next=function(r){this.isStopped||this._next(r)},e.prototype.error=function(r){this.isStopped||(this.isStopped=!0,this._error(r))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(r){this.destination.next(r)},e.prototype._error=function(r){this.destination.error(r),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var r=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=r,this},e}(Ut),Hn=function(t){ct(e,t);function e(r,n,i,s){var a=t.call(this)||this;a._parentSubscriber=r;var o,u=a;return nr(n)?o=n:n&&(o=n.next,i=n.error,s=n.complete,n!==ir&&(u=Object.create(n),nr(u.unsubscribe)&&a.add(u.unsubscribe.bind(u)),u.unsubscribe=a.unsubscribe.bind(a))),a._context=u,a._next=o,a._error=i,a._complete=s,a}return e.prototype.next=function(r){if(!this.isStopped&&this._next){var n=this._parentSubscriber;!ce.useDeprecatedSynchronousErrorHandling||!n.syncErrorThrowable?this.__tryOrUnsub(this._next,r):this.__tryOrSetError(n,this._next,r)&&this.unsubscribe()}},e.prototype.error=function(r){if(!this.isStopped){var n=this._parentSubscriber,i=ce.useDeprecatedSynchronousErrorHandling;if(this._error)!i||!n.syncErrorThrowable?(this.__tryOrUnsub(this._error,r),this.unsubscribe()):(this.__tryOrSetError(n,this._error,r),this.unsubscribe());else if(n.syncErrorThrowable)i?(n.syncErrorValue=r,n.syncErrorThrown=!0):Qe(r),this.unsubscribe();else{if(this.unsubscribe(),i)throw r;Qe(r)}}},e.prototype.complete=function(){var r=this;if(!this.isStopped){var n=this._parentSubscriber;if(this._complete){var i=function(){return r._complete.call(r._context)};!ce.useDeprecatedSynchronousErrorHandling||!n.syncErrorThrowable?(this.__tryOrUnsub(i),this.unsubscribe()):(this.__tryOrSetError(n,i),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(r,n){try{r.call(this._context,n)}catch(i){if(this.unsubscribe(),ce.useDeprecatedSynchronousErrorHandling)throw i;Qe(i)}},e.prototype.__tryOrSetError=function(r,n,i){if(!ce.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{n.call(this._context,i)}catch(s){return ce.useDeprecatedSynchronousErrorHandling?(r.syncErrorValue=s,r.syncErrorThrown=!0,!0):(Qe(s),!0)}return!1},e.prototype._unsubscribe=function(){var r=this._parentSubscriber;this._context=null,this._parentSubscriber=null,r.unsubscribe()},e}(Se);function Uo(t){for(;t;){var e=t,r=e.closed,n=e.destination,i=e.isStopped;if(r||i)return!1;n&&n instanceof Se?t=n:t=null}return!0}function Lo(t,e,r){if(t){if(t instanceof Se)return t;if(t[Yr])return t[Yr]()}return!t&&!e&&!r?new Se(ir):new Se(t,e,r)}var Lt=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function Ho(t){return t}function Zo(t){return t.length===0?Ho:t.length===1?t[0]:function(r){return t.reduce(function(n,i){return i(n)},r)}}var F=function(){function t(e){this._isScalar=!1,e&&(this._subscribe=e)}return t.prototype.lift=function(e){var r=new t;return r.source=this,r.operator=e,r},t.prototype.subscribe=function(e,r,n){var i=this.operator,s=Lo(e,r,n);if(i?s.add(i.call(s,this.source)):s.add(this.source||ce.useDeprecatedSynchronousErrorHandling&&!s.syncErrorThrowable?this._subscribe(s):this._trySubscribe(s)),ce.useDeprecatedSynchronousErrorHandling&&s.syncErrorThrowable&&(s.syncErrorThrowable=!1,s.syncErrorThrown))throw s.syncErrorValue;return s},t.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(r){ce.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=r),Uo(e)?e.error(r):console.warn(r)}},t.prototype.forEach=function(e,r){var n=this;return r=Zn(r),new r(function(i,s){var a;a=n.subscribe(function(o){try{e(o)}catch(u){s(u),a&&a.unsubscribe()}},s,i)})},t.prototype._subscribe=function(e){var r=this.source;return r&&r.subscribe(e)},t.prototype[Lt]=function(){return this},t.prototype.pipe=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e.length===0?this:Zo(e)(this)},t.prototype.toPromise=function(e){var r=this;return e=Zn(e),new e(function(n,i){var s;r.subscribe(function(a){return s=a},function(a){return i(a)},function(){return n(s)})})},t.create=function(e){return new t(e)},t}();function Zn(t){if(t||(t=Promise),!t)throw new Error("no Promise impl found");return t}var $o=new F(function(t){return t.complete()});function Wo(t){return t?qo(t):$o}function qo(t){return new F(function(e){return t.schedule(function(){return e.complete()})})}var zo=function(t){return function(e){for(var r=0,n=t.length;r<n&&!e.closed;r++)e.next(t[r]);e.complete()}};function Yo(t,e){return new F(function(r){var n=new Ut,i=0;return n.add(e.schedule(function(){if(i===t.length){r.complete();return}r.next(t[i++]),r.closed||n.add(this.schedule())})),n})}function Te(){}var Vo=function(){function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t}(),Jo=Vo;function Ko(t,e){return function(n){if(typeof t!="function")throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new Xo(t,e))}}var Xo=function(){function t(e,r){this.project=e,this.thisArg=r}return t.prototype.call=function(e,r){return r.subscribe(new Qo(e,this.project,this.thisArg))},t}(),Qo=function(t){ct(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.project=n,s.count=0,s.thisArg=i||s,s}return e.prototype._next=function(r){var n;try{n=this.project.call(this.thisArg,r,this.count++)}catch(i){this.destination.error(i);return}this.destination.next(n)},e}(Se),Go=function(t){return function(e){return t.then(function(r){e.closed||(e.next(r),e.complete())},function(r){return e.error(r)}).then(null,Qe),e}};function eu(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var yr=eu(),tu=function(t){return function(e){var r=t[yr]();do{var n=r.next();if(n.done){e.complete();break}if(e.next(n.value),e.closed)break}while(!0);return typeof r.return=="function"&&e.add(function(){r.return&&r.return()}),e}},ru=function(t){return function(e){var r=t[Lt]();if(typeof r.subscribe!="function")throw new TypeError("Provided object does not correctly implement Symbol.observable");return r.subscribe(e)}},Ri=function(t){return t&&typeof t.length=="number"&&typeof t!="function"};function Pi(t){return!!t&&typeof t.subscribe!="function"&&typeof t.then=="function"}var nu=function(t){if(t&&typeof t[Lt]=="function")return ru(t);if(Ri(t))return zo(t);if(Pi(t))return Go(t);if(t&&typeof t[yr]=="function")return tu(t);var e=hn(t)?"an invalid object":"'"+t+"'",r="You provided "+e+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";throw new TypeError(r)};function iu(t,e){return new F(function(r){var n=new Ut;return n.add(e.schedule(function(){var i=t[Lt]();n.add(i.subscribe({next:function(s){n.add(e.schedule(function(){return r.next(s)}))},error:function(s){n.add(e.schedule(function(){return r.error(s)}))},complete:function(){n.add(e.schedule(function(){return r.complete()}))}}))})),n})}function su(t,e){return new F(function(r){var n=new Ut;return n.add(e.schedule(function(){return t.then(function(i){n.add(e.schedule(function(){r.next(i),n.add(e.schedule(function(){return r.complete()}))}))},function(i){n.add(e.schedule(function(){return r.error(i)}))})})),n})}function au(t,e){if(!t)throw new Error("Iterable cannot be null");return new F(function(r){var n=new Ut,i;return n.add(function(){i&&typeof i.return=="function"&&i.return()}),n.add(e.schedule(function(){i=t[yr](),n.add(e.schedule(function(){if(!r.closed){var s,a;try{var o=i.next();s=o.value,a=o.done}catch(u){r.error(u);return}a?r.complete():(r.next(s),this.schedule())}}))})),n})}function ou(t){return t&&typeof t[Lt]=="function"}function uu(t){return t&&typeof t[yr]=="function"}function cu(t,e){if(t!=null){if(ou(t))return iu(t,e);if(Pi(t))return su(t,e);if(Ri(t))return Yo(t,e);if(uu(t)||typeof t=="string")return au(t,e)}throw new TypeError((t!==null&&typeof t||t)+" is not observable")}function lu(t,e){return e?cu(t,e):t instanceof F?t:new F(nu(t))}function du(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(t.length===1){var r=t[0];if(zr(r))return Jt(r,null);if(hn(r)&&Object.getPrototypeOf(r)===Object.prototype){var n=Object.keys(r);return Jt(n.map(function(s){return r[s]}),n)}}if(typeof t[t.length-1]=="function"){var i=t.pop();return t=t.length===1&&zr(t[0])?t[0]:t,Jt(t,null).pipe(Ko(function(s){return i.apply(void 0,s)}))}return Jt(t,null)}function Jt(t,e){return new F(function(r){var n=t.length;if(n===0){r.complete();return}for(var i=new Array(n),s=0,a=0,o=function(c){var l=lu(t[c]),d=!1;r.add(l.subscribe({next:function(p){d||(d=!0,a++),i[c]=p},error:function(p){return r.error(p)},complete:function(){s++,(s===n||!d)&&(a===n&&r.next(e?e.reduce(function(p,v,T){return p[v]=i[T],p},{}):i),r.complete())}}))},u=0;u<n;u++)o(u)})}function fu(t,e){return function(n){return n.lift(new pu(t,e))}}var pu=function(){function t(e,r){this.predicate=e,this.thisArg=r}return t.prototype.call=function(e,r){return r.subscribe(new hu(e,this.predicate,this.thisArg))},t}(),hu=function(t){ct(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.predicate=n,s.thisArg=i,s.count=0,s}return e.prototype._next=function(r){var n;try{n=this.predicate.call(this.thisArg,r,this.count++)}catch(i){this.destination.error(i);return}n&&this.destination.next(r)},e}(Se);class gu{constructor(){this._config=null,this.defaults={beforeSend:e=>e,beforeBreadcrumb:e=>e.level===Z.Log?null:e},new F(document.obgEventBus.retrieve(Q.Config)).subscribe(e=>{this._config=e["svc-telemetry"]}),document.obgEventBus.listen(ne.FrontendLogDebug,e=>this.debug(e)),document.obgEventBus.listen(ne.FrontendLogError,e=>this.error(e)),document.obgEventBus.listen(ne.FrontendLogInfo,e=>this.info(e)),document.obgEventBus.listen(ne.FrontendLogWarn,e=>this.warn(e)),document.obgEventBus.listen(ne.ConfigureGlobalTags,e=>this.configureGlobalTags(e)),document.obgEventBus.listen(ne.StartTransaction,async e=>{e.onSuccess(await this.startTransaction(e.transactionContext))})}static get Instance(){return this._instance||(this._instance=new this)}async debug(e){await this.log(Y.Debug,e)}async error(e){await this.log(Y.Error,e)}async info(e){await this.log(Y.Info,e)}async warn(e){await this.log(Y.Warn,e)}getBrowserOptions(){if(this._config===null)return;const e={dsn:this._config.sentry.url,release:this._config.version,environment:this._config.environment,transport:this._config.sentry.transport,ignoreErrors:this._config.sentry.ignoredErrors,beforeSend:this._config.sentry.beforeSend||this.defaults.beforeSend,beforeBreadcrumb:this._config.sentry.beforeBreadcrumb||this.defaults.beforeBreadcrumb,integrations:[new jo.BrowserTracing]};return this._config.sentry.isPerfMonitoringEnabled&&(e.tracesSampleRate=this._config.isProd?.1:.4),e}async getSentry(){return this._sentryPromise||(this._sentryPromise=new Promise(async e=>{const r=this.getBrowserOptions();wi(r),e(Ba)})),this._sentryPromise}async log(e,r){var i;const n=await this.getSentry();(e===Y.Debug||e===Y.Info||e===Y.Warn)&&((i=this._config)!=null&&i.isProd)||n.withScope(s=>{this.setLevelAndExtrasForScope(r.data,s,e),r.message instanceof Error?n.captureException(r.message):n.captureMessage(r.message??"")})}async configureGlobalTags(e){(await this.getSentry()).configureScope(n=>{n.setTags(e)})}async startTransaction(e){return(await this.getSentry()).startTransaction(e)}setLevelAndExtrasForScope(e,r,n){const i=this.mapLogTypeToSeverity(n);if(r.setLevel(i),Ao(e))return;if(!Bo(e)){r.setExtra("details",e);return}Object.entries(e).forEach(([a,o])=>{r.setExtra(a,o)})}mapLogTypeToSeverity(e){switch(e){case Y.Debug:return Z.Debug;case Y.Error:return Z.Error;case Y.Info:return Z.Info;default:return Z.Warning}}}var Gt=(t=>(t.SessionToken="appAccount.sessionToken",t.SessionCustomerId="appAccount.sessionCustomerId",t.SessionStartTimestamp="appAccount.sessionStartTimestamp",t.IsAuthenticated="appAccount.isAuthenticated",t.PnPJourneyDepositDetails="appAccount.pnPJourneyDepositDetails",t.GetCustomerAllowedActions="GetCustomerAllowedActions",t.CustomerRegCountry="appAccount.customerRegCountry",t.PnPJourneyStepSlug="appAccount.pnpJourneyHeaderTitleKey",t.PnPJourneyInitiated="appAccount.pnpJourneyInitiated",t))(Gt||{}),Ni=(t=>(t.Login="Login",t.TokenVerification="TokenVerification",t))(Ni||{}),C;(function(t){t.assertEqual=i=>i;function e(i){}t.assertIs=e;function r(i){throw new Error}t.assertNever=r,t.arrayToEnum=i=>{const s={};for(const a of i)s[a]=a;return s},t.getValidEnumValues=i=>{const s=t.objectKeys(i).filter(o=>typeof i[i[o]]!="number"),a={};for(const o of s)a[o]=i[o];return t.objectValues(a)},t.objectValues=i=>t.objectKeys(i).map(function(s){return i[s]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const s=[];for(const a in i)Object.prototype.hasOwnProperty.call(i,a)&&s.push(a);return s},t.find=(i,s)=>{for(const a of i)if(s(a))return a},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function n(i,s=" | "){return i.map(a=>typeof a=="string"?`'${a}'`:a).join(s)}t.joinValues=n,t.jsonStringifyReplacer=(i,s)=>typeof s=="bigint"?s.toString():s})(C||(C={}));var Vr;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(Vr||(Vr={}));const m=C.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Oe=t=>{switch(typeof t){case"undefined":return m.undefined;case"string":return m.string;case"number":return isNaN(t)?m.nan:m.number;case"boolean":return m.boolean;case"function":return m.function;case"bigint":return m.bigint;case"symbol":return m.symbol;case"object":return Array.isArray(t)?m.array:t===null?m.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?m.promise:typeof Map<"u"&&t instanceof Map?m.map:typeof Set<"u"&&t instanceof Set?m.set:typeof Date<"u"&&t instanceof Date?m.date:m.object;default:return m.unknown}},f=C.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),mu=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class ee extends Error{constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const r=e||function(s){return s.message},n={_errors:[]},i=s=>{for(const a of s.issues)if(a.code==="invalid_union")a.unionErrors.map(i);else if(a.code==="invalid_return_type")i(a.returnTypeError);else if(a.code==="invalid_arguments")i(a.argumentsError);else if(a.path.length===0)n._errors.push(r(a));else{let o=n,u=0;for(;u<a.path.length;){const c=a.path[u];u===a.path.length-1?(o[c]=o[c]||{_errors:[]},o[c]._errors.push(r(a))):o[c]=o[c]||{_errors:[]},o=o[c],u++}}};return i(this),n}static assert(e){if(!(e instanceof ee))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,C.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){const r={},n=[];for(const i of this.issues)i.path.length>0?(r[i.path[0]]=r[i.path[0]]||[],r[i.path[0]].push(e(i))):n.push(e(i));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}}ee.create=t=>new ee(t);const st=(t,e)=>{let r;switch(t.code){case f.invalid_type:t.received===m.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case f.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,C.jsonStringifyReplacer)}`;break;case f.unrecognized_keys:r=`Unrecognized key(s) in object: ${C.joinValues(t.keys,", ")}`;break;case f.invalid_union:r="Invalid input";break;case f.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${C.joinValues(t.options)}`;break;case f.invalid_enum_value:r=`Invalid enum value. Expected ${C.joinValues(t.options)}, received '${t.received}'`;break;case f.invalid_arguments:r="Invalid function arguments";break;case f.invalid_return_type:r="Invalid function return type";break;case f.invalid_date:r="Invalid date";break;case f.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:C.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case f.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case f.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case f.custom:r="Invalid input";break;case f.invalid_intersection_types:r="Intersection results could not be merged";break;case f.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case f.not_finite:r="Number must be finite";break;default:r=e.defaultError,C.assertNever(t)}return{message:r}};let Fi=st;function vu(t){Fi=t}function sr(){return Fi}const ar=t=>{const{data:e,path:r,errorMaps:n,issueData:i}=t,s=[...r,...i.path||[]],a={...i,path:s};if(i.message!==void 0)return{...i,path:s,message:i.message};let o="";const u=n.filter(c=>!!c).slice().reverse();for(const c of u)o=c(a,{data:e,defaultError:o}).message;return{...i,path:s,message:o}},_u=[];function g(t,e){const r=sr(),n=ar({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,r,r===st?void 0:st].filter(i=>!!i)});t.common.issues.push(n)}class W{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){const n=[];for(const i of r){if(i.status==="aborted")return S;i.status==="dirty"&&e.dirty(),n.push(i.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){const n=[];for(const i of r){const s=await i.key,a=await i.value;n.push({key:s,value:a})}return W.mergeObjectSync(e,n)}static mergeObjectSync(e,r){const n={};for(const i of r){const{key:s,value:a}=i;if(s.status==="aborted"||a.status==="aborted")return S;s.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof a.value<"u"||i.alwaysSet)&&(n[s.value]=a.value)}return{status:e.value,value:n}}}const S=Object.freeze({status:"aborted"}),Ge=t=>({status:"dirty",value:t}),J=t=>({status:"valid",value:t}),Jr=t=>t.status==="aborted",Kr=t=>t.status==="dirty",St=t=>t.status==="valid",kt=t=>typeof Promise<"u"&&t instanceof Promise;function or(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function Mi(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r}var _;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(_||(_={}));var pt,ht;class pe{constructor(e,r,n,i){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const $n=(t,e)=>{if(St(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new ee(t.common.issues);return this._error=r,this._error}}};function w(t){if(!t)return{};const{errorMap:e,invalid_type_error:r,required_error:n,description:i}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(a,o)=>{var u,c;const{message:l}=t;return a.code==="invalid_enum_value"?{message:l??o.defaultError}:typeof o.data>"u"?{message:(u=l??n)!==null&&u!==void 0?u:o.defaultError}:a.code!=="invalid_type"?{message:o.defaultError}:{message:(c=l??r)!==null&&c!==void 0?c:o.defaultError}},description:i}}class E{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Oe(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:Oe(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new W,ctx:{common:e.parent.common,data:e.data,parsedType:Oe(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const r=this._parse(e);if(kt(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){const r=this._parse(e);return Promise.resolve(r)}parse(e,r){const n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){var n;const i={common:{issues:[],async:(n=r==null?void 0:r.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r==null?void 0:r.errorMap},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Oe(e)},s=this._parseSync({data:e,path:i.path,parent:i});return $n(i,s)}async parseAsync(e,r){const n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){const n={common:{issues:[],contextualErrorMap:r==null?void 0:r.errorMap,async:!0},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Oe(e)},i=this._parse({data:e,path:n.path,parent:n}),s=await(kt(i)?i:Promise.resolve(i));return $n(n,s)}refine(e,r){const n=i=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(i):r;return this._refinement((i,s)=>{const a=e(i),o=()=>s.addIssue({code:f.custom,...n(i)});return typeof Promise<"u"&&a instanceof Promise?a.then(u=>u?!0:(o(),!1)):a?!0:(o(),!1)})}refinement(e,r){return this._refinement((n,i)=>e(n)?!0:(i.addIssue(typeof r=="function"?r(n,i):r),!1))}_refinement(e){return new ue({schema:this,typeName:b.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return de.create(this,this._def)}nullable(){return Me.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return oe.create(this,this._def)}promise(){return ot.create(this,this._def)}or(e){return Ot.create([this,e],this._def)}and(e){return xt.create(this,e,this._def)}transform(e){return new ue({...w(this._def),schema:this,typeName:b.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const r=typeof e=="function"?e:()=>e;return new Nt({...w(this._def),innerType:this,defaultValue:r,typeName:b.ZodDefault})}brand(){return new gn({typeName:b.ZodBranded,type:this,...w(this._def)})}catch(e){const r=typeof e=="function"?e:()=>e;return new Ft({...w(this._def),innerType:this,catchValue:r,typeName:b.ZodCatch})}describe(e){const r=this.constructor;return new r({...this._def,description:e})}pipe(e){return Ht.create(this,e)}readonly(){return Mt.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const yu=/^c[^\s-]{8,}$/i,bu=/^[0-9a-z]+$/,Su=/^[0-9A-HJKMNP-TV-Z]{26}$/,ku=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,wu=/^[a-z0-9_-]{21}$/i,Tu=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Eu=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Ou="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Pr;const xu=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Cu=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,Iu=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,ji="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Ru=new RegExp(`^${ji}$`);function Bi(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function Pu(t){return new RegExp(`^${Bi(t)}$`)}function Ai(t){let e=`${ji}T${Bi(t)}`;const r=[];return r.push(t.local?"Z?":"Z"),t.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${r.join("|")})`,new RegExp(`^${e}$`)}function Nu(t,e){return!!((e==="v4"||!e)&&xu.test(t)||(e==="v6"||!e)&&Cu.test(t))}class se extends E{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==m.string){const s=this._getOrReturnCtx(e);return g(s,{code:f.invalid_type,expected:m.string,received:s.parsedType}),S}const n=new W;let i;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(i=this._getOrReturnCtx(e,i),g(i,{code:f.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),n.dirty());else if(s.kind==="max")e.data.length>s.value&&(i=this._getOrReturnCtx(e,i),g(i,{code:f.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),n.dirty());else if(s.kind==="length"){const a=e.data.length>s.value,o=e.data.length<s.value;(a||o)&&(i=this._getOrReturnCtx(e,i),a?g(i,{code:f.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):o&&g(i,{code:f.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),n.dirty())}else if(s.kind==="email")Eu.test(e.data)||(i=this._getOrReturnCtx(e,i),g(i,{validation:"email",code:f.invalid_string,message:s.message}),n.dirty());else if(s.kind==="emoji")Pr||(Pr=new RegExp(Ou,"u")),Pr.test(e.data)||(i=this._getOrReturnCtx(e,i),g(i,{validation:"emoji",code:f.invalid_string,message:s.message}),n.dirty());else if(s.kind==="uuid")ku.test(e.data)||(i=this._getOrReturnCtx(e,i),g(i,{validation:"uuid",code:f.invalid_string,message:s.message}),n.dirty());else if(s.kind==="nanoid")wu.test(e.data)||(i=this._getOrReturnCtx(e,i),g(i,{validation:"nanoid",code:f.invalid_string,message:s.message}),n.dirty());else if(s.kind==="cuid")yu.test(e.data)||(i=this._getOrReturnCtx(e,i),g(i,{validation:"cuid",code:f.invalid_string,message:s.message}),n.dirty());else if(s.kind==="cuid2")bu.test(e.data)||(i=this._getOrReturnCtx(e,i),g(i,{validation:"cuid2",code:f.invalid_string,message:s.message}),n.dirty());else if(s.kind==="ulid")Su.test(e.data)||(i=this._getOrReturnCtx(e,i),g(i,{validation:"ulid",code:f.invalid_string,message:s.message}),n.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),g(i,{validation:"url",code:f.invalid_string,message:s.message}),n.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),g(i,{validation:"regex",code:f.invalid_string,message:s.message}),n.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(i=this._getOrReturnCtx(e,i),g(i,{code:f.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),n.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(i=this._getOrReturnCtx(e,i),g(i,{code:f.invalid_string,validation:{startsWith:s.value},message:s.message}),n.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(i=this._getOrReturnCtx(e,i),g(i,{code:f.invalid_string,validation:{endsWith:s.value},message:s.message}),n.dirty()):s.kind==="datetime"?Ai(s).test(e.data)||(i=this._getOrReturnCtx(e,i),g(i,{code:f.invalid_string,validation:"datetime",message:s.message}),n.dirty()):s.kind==="date"?Ru.test(e.data)||(i=this._getOrReturnCtx(e,i),g(i,{code:f.invalid_string,validation:"date",message:s.message}),n.dirty()):s.kind==="time"?Pu(s).test(e.data)||(i=this._getOrReturnCtx(e,i),g(i,{code:f.invalid_string,validation:"time",message:s.message}),n.dirty()):s.kind==="duration"?Tu.test(e.data)||(i=this._getOrReturnCtx(e,i),g(i,{validation:"duration",code:f.invalid_string,message:s.message}),n.dirty()):s.kind==="ip"?Nu(e.data,s.version)||(i=this._getOrReturnCtx(e,i),g(i,{validation:"ip",code:f.invalid_string,message:s.message}),n.dirty()):s.kind==="base64"?Iu.test(e.data)||(i=this._getOrReturnCtx(e,i),g(i,{validation:"base64",code:f.invalid_string,message:s.message}),n.dirty()):C.assertNever(s);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(i=>e.test(i),{validation:r,code:f.invalid_string,..._.errToObj(n)})}_addCheck(e){return new se({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",..._.errToObj(e)})}url(e){return this._addCheck({kind:"url",..._.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",..._.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",..._.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",..._.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",..._.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",..._.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",..._.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",..._.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",..._.errToObj(e)})}datetime(e){var r,n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(r=e==null?void 0:e.offset)!==null&&r!==void 0?r:!1,local:(n=e==null?void 0:e.local)!==null&&n!==void 0?n:!1,..._.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,..._.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",..._.errToObj(e)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,..._.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r==null?void 0:r.position,..._.errToObj(r==null?void 0:r.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,..._.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,..._.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,..._.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,..._.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,..._.errToObj(r)})}nonempty(e){return this.min(1,_.errToObj(e))}trim(){return new se({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new se({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new se({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get minLength(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}se.create=t=>{var e;return new se({checks:[],typeName:b.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...w(t)})};function Fu(t,e){const r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,i=r>n?r:n,s=parseInt(t.toFixed(i).replace(".","")),a=parseInt(e.toFixed(i).replace(".",""));return s%a/Math.pow(10,i)}class Pe extends E{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==m.number){const s=this._getOrReturnCtx(e);return g(s,{code:f.invalid_type,expected:m.number,received:s.parsedType}),S}let n;const i=new W;for(const s of this._def.checks)s.kind==="int"?C.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),g(n,{code:f.invalid_type,expected:"integer",received:"float",message:s.message}),i.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(n=this._getOrReturnCtx(e,n),g(n,{code:f.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(n=this._getOrReturnCtx(e,n),g(n,{code:f.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="multipleOf"?Fu(e.data,s.value)!==0&&(n=this._getOrReturnCtx(e,n),g(n,{code:f.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),g(n,{code:f.not_finite,message:s.message}),i.dirty()):C.assertNever(s);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,_.toString(r))}gt(e,r){return this.setLimit("min",e,!1,_.toString(r))}lte(e,r){return this.setLimit("max",e,!0,_.toString(r))}lt(e,r){return this.setLimit("max",e,!1,_.toString(r))}setLimit(e,r,n,i){return new Pe({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:_.toString(i)}]})}_addCheck(e){return new Pe({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:_.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:_.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:_.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:_.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:_.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:_.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:_.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:_.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:_.toString(e)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&C.isInteger(e.value))}get isFinite(){let e=null,r=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}}Pe.create=t=>new Pe({checks:[],typeName:b.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...w(t)});class Ne extends E{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==m.bigint){const s=this._getOrReturnCtx(e);return g(s,{code:f.invalid_type,expected:m.bigint,received:s.parsedType}),S}let n;const i=new W;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(n=this._getOrReturnCtx(e,n),g(n,{code:f.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(n=this._getOrReturnCtx(e,n),g(n,{code:f.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),g(n,{code:f.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):C.assertNever(s);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,_.toString(r))}gt(e,r){return this.setLimit("min",e,!1,_.toString(r))}lte(e,r){return this.setLimit("max",e,!0,_.toString(r))}lt(e,r){return this.setLimit("max",e,!1,_.toString(r))}setLimit(e,r,n,i){return new Ne({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:_.toString(i)}]})}_addCheck(e){return new Ne({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:_.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:_.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:_.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:_.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:_.toString(r)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}Ne.create=t=>{var e;return new Ne({checks:[],typeName:b.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...w(t)})};class wt extends E{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==m.boolean){const n=this._getOrReturnCtx(e);return g(n,{code:f.invalid_type,expected:m.boolean,received:n.parsedType}),S}return J(e.data)}}wt.create=t=>new wt({typeName:b.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...w(t)});class We extends E{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==m.date){const s=this._getOrReturnCtx(e);return g(s,{code:f.invalid_type,expected:m.date,received:s.parsedType}),S}if(isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return g(s,{code:f.invalid_date}),S}const n=new W;let i;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(i=this._getOrReturnCtx(e,i),g(i,{code:f.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),n.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(i=this._getOrReturnCtx(e,i),g(i,{code:f.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),n.dirty()):C.assertNever(s);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new We({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:_.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:_.toString(r)})}get minDate(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}}We.create=t=>new We({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:b.ZodDate,...w(t)});class ur extends E{_parse(e){if(this._getType(e)!==m.symbol){const n=this._getOrReturnCtx(e);return g(n,{code:f.invalid_type,expected:m.symbol,received:n.parsedType}),S}return J(e.data)}}ur.create=t=>new ur({typeName:b.ZodSymbol,...w(t)});class Tt extends E{_parse(e){if(this._getType(e)!==m.undefined){const n=this._getOrReturnCtx(e);return g(n,{code:f.invalid_type,expected:m.undefined,received:n.parsedType}),S}return J(e.data)}}Tt.create=t=>new Tt({typeName:b.ZodUndefined,...w(t)});class Et extends E{_parse(e){if(this._getType(e)!==m.null){const n=this._getOrReturnCtx(e);return g(n,{code:f.invalid_type,expected:m.null,received:n.parsedType}),S}return J(e.data)}}Et.create=t=>new Et({typeName:b.ZodNull,...w(t)});class at extends E{constructor(){super(...arguments),this._any=!0}_parse(e){return J(e.data)}}at.create=t=>new at({typeName:b.ZodAny,...w(t)});class He extends E{constructor(){super(...arguments),this._unknown=!0}_parse(e){return J(e.data)}}He.create=t=>new He({typeName:b.ZodUnknown,...w(t)});class ke extends E{_parse(e){const r=this._getOrReturnCtx(e);return g(r,{code:f.invalid_type,expected:m.never,received:r.parsedType}),S}}ke.create=t=>new ke({typeName:b.ZodNever,...w(t)});class cr extends E{_parse(e){if(this._getType(e)!==m.undefined){const n=this._getOrReturnCtx(e);return g(n,{code:f.invalid_type,expected:m.void,received:n.parsedType}),S}return J(e.data)}}cr.create=t=>new cr({typeName:b.ZodVoid,...w(t)});class oe extends E{_parse(e){const{ctx:r,status:n}=this._processInputParams(e),i=this._def;if(r.parsedType!==m.array)return g(r,{code:f.invalid_type,expected:m.array,received:r.parsedType}),S;if(i.exactLength!==null){const a=r.data.length>i.exactLength.value,o=r.data.length<i.exactLength.value;(a||o)&&(g(r,{code:a?f.too_big:f.too_small,minimum:o?i.exactLength.value:void 0,maximum:a?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&r.data.length<i.minLength.value&&(g(r,{code:f.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&r.data.length>i.maxLength.value&&(g(r,{code:f.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((a,o)=>i.type._parseAsync(new pe(r,a,r.path,o)))).then(a=>W.mergeArray(n,a));const s=[...r.data].map((a,o)=>i.type._parseSync(new pe(r,a,r.path,o)));return W.mergeArray(n,s)}get element(){return this._def.type}min(e,r){return new oe({...this._def,minLength:{value:e,message:_.toString(r)}})}max(e,r){return new oe({...this._def,maxLength:{value:e,message:_.toString(r)}})}length(e,r){return new oe({...this._def,exactLength:{value:e,message:_.toString(r)}})}nonempty(e){return this.min(1,e)}}oe.create=(t,e)=>new oe({type:t,minLength:null,maxLength:null,exactLength:null,typeName:b.ZodArray,...w(e)});function Je(t){if(t instanceof B){const e={};for(const r in t.shape){const n=t.shape[r];e[r]=de.create(Je(n))}return new B({...t._def,shape:()=>e})}else return t instanceof oe?new oe({...t._def,type:Je(t.element)}):t instanceof de?de.create(Je(t.unwrap())):t instanceof Me?Me.create(Je(t.unwrap())):t instanceof he?he.create(t.items.map(e=>Je(e))):t}class B extends E{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),r=C.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==m.object){const c=this._getOrReturnCtx(e);return g(c,{code:f.invalid_type,expected:m.object,received:c.parsedType}),S}const{status:n,ctx:i}=this._processInputParams(e),{shape:s,keys:a}=this._getCached(),o=[];if(!(this._def.catchall instanceof ke&&this._def.unknownKeys==="strip"))for(const c in i.data)a.includes(c)||o.push(c);const u=[];for(const c of a){const l=s[c],d=i.data[c];u.push({key:{status:"valid",value:c},value:l._parse(new pe(i,d,i.path,c)),alwaysSet:c in i.data})}if(this._def.catchall instanceof ke){const c=this._def.unknownKeys;if(c==="passthrough")for(const l of o)u.push({key:{status:"valid",value:l},value:{status:"valid",value:i.data[l]}});else if(c==="strict")o.length>0&&(g(i,{code:f.unrecognized_keys,keys:o}),n.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const l of o){const d=i.data[l];u.push({key:{status:"valid",value:l},value:c._parse(new pe(i,d,i.path,l)),alwaysSet:l in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const c=[];for(const l of u){const d=await l.key,p=await l.value;c.push({key:d,value:p,alwaysSet:l.alwaysSet})}return c}).then(c=>W.mergeObjectSync(n,c)):W.mergeObjectSync(n,u)}get shape(){return this._def.shape()}strict(e){return _.errToObj,new B({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,n)=>{var i,s,a,o;const u=(a=(s=(i=this._def).errorMap)===null||s===void 0?void 0:s.call(i,r,n).message)!==null&&a!==void 0?a:n.defaultError;return r.code==="unrecognized_keys"?{message:(o=_.errToObj(e).message)!==null&&o!==void 0?o:u}:{message:u}}}:{}})}strip(){return new B({...this._def,unknownKeys:"strip"})}passthrough(){return new B({...this._def,unknownKeys:"passthrough"})}extend(e){return new B({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new B({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:b.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new B({...this._def,catchall:e})}pick(e){const r={};return C.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new B({...this._def,shape:()=>r})}omit(e){const r={};return C.objectKeys(this.shape).forEach(n=>{e[n]||(r[n]=this.shape[n])}),new B({...this._def,shape:()=>r})}deepPartial(){return Je(this)}partial(e){const r={};return C.objectKeys(this.shape).forEach(n=>{const i=this.shape[n];e&&!e[n]?r[n]=i:r[n]=i.optional()}),new B({...this._def,shape:()=>r})}required(e){const r={};return C.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])r[n]=this.shape[n];else{let s=this.shape[n];for(;s instanceof de;)s=s._def.innerType;r[n]=s}}),new B({...this._def,shape:()=>r})}keyof(){return Di(C.objectKeys(this.shape))}}B.create=(t,e)=>new B({shape:()=>t,unknownKeys:"strip",catchall:ke.create(),typeName:b.ZodObject,...w(e)});B.strictCreate=(t,e)=>new B({shape:()=>t,unknownKeys:"strict",catchall:ke.create(),typeName:b.ZodObject,...w(e)});B.lazycreate=(t,e)=>new B({shape:t,unknownKeys:"strip",catchall:ke.create(),typeName:b.ZodObject,...w(e)});class Ot extends E{_parse(e){const{ctx:r}=this._processInputParams(e),n=this._def.options;function i(s){for(const o of s)if(o.result.status==="valid")return o.result;for(const o of s)if(o.result.status==="dirty")return r.common.issues.push(...o.ctx.common.issues),o.result;const a=s.map(o=>new ee(o.ctx.common.issues));return g(r,{code:f.invalid_union,unionErrors:a}),S}if(r.common.async)return Promise.all(n.map(async s=>{const a={...r,common:{...r.common,issues:[]},parent:null};return{result:await s._parseAsync({data:r.data,path:r.path,parent:a}),ctx:a}})).then(i);{let s;const a=[];for(const u of n){const c={...r,common:{...r.common,issues:[]},parent:null},l=u._parseSync({data:r.data,path:r.path,parent:c});if(l.status==="valid")return l;l.status==="dirty"&&!s&&(s={result:l,ctx:c}),c.common.issues.length&&a.push(c.common.issues)}if(s)return r.common.issues.push(...s.ctx.common.issues),s.result;const o=a.map(u=>new ee(u));return g(r,{code:f.invalid_union,unionErrors:o}),S}}get options(){return this._def.options}}Ot.create=(t,e)=>new Ot({options:t,typeName:b.ZodUnion,...w(e)});const ge=t=>t instanceof It?ge(t.schema):t instanceof ue?ge(t.innerType()):t instanceof Rt?[t.value]:t instanceof Fe?t.options:t instanceof Pt?C.objectValues(t.enum):t instanceof Nt?ge(t._def.innerType):t instanceof Tt?[void 0]:t instanceof Et?[null]:t instanceof de?[void 0,...ge(t.unwrap())]:t instanceof Me?[null,...ge(t.unwrap())]:t instanceof gn||t instanceof Mt?ge(t.unwrap()):t instanceof Ft?ge(t._def.innerType):[];class br extends E{_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==m.object)return g(r,{code:f.invalid_type,expected:m.object,received:r.parsedType}),S;const n=this.discriminator,i=r.data[n],s=this.optionsMap.get(i);return s?r.common.async?s._parseAsync({data:r.data,path:r.path,parent:r}):s._parseSync({data:r.data,path:r.path,parent:r}):(g(r,{code:f.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),S)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){const i=new Map;for(const s of r){const a=ge(s.shape[e]);if(!a.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const o of a){if(i.has(o))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(o)}`);i.set(o,s)}}return new br({typeName:b.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:i,...w(n)})}}function Xr(t,e){const r=Oe(t),n=Oe(e);if(t===e)return{valid:!0,data:t};if(r===m.object&&n===m.object){const i=C.objectKeys(e),s=C.objectKeys(t).filter(o=>i.indexOf(o)!==-1),a={...t,...e};for(const o of s){const u=Xr(t[o],e[o]);if(!u.valid)return{valid:!1};a[o]=u.data}return{valid:!0,data:a}}else if(r===m.array&&n===m.array){if(t.length!==e.length)return{valid:!1};const i=[];for(let s=0;s<t.length;s++){const a=t[s],o=e[s],u=Xr(a,o);if(!u.valid)return{valid:!1};i.push(u.data)}return{valid:!0,data:i}}else return r===m.date&&n===m.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class xt extends E{_parse(e){const{status:r,ctx:n}=this._processInputParams(e),i=(s,a)=>{if(Jr(s)||Jr(a))return S;const o=Xr(s.value,a.value);return o.valid?((Kr(s)||Kr(a))&&r.dirty(),{status:r.value,value:o.data}):(g(n,{code:f.invalid_intersection_types}),S)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([s,a])=>i(s,a)):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}xt.create=(t,e,r)=>new xt({left:t,right:e,typeName:b.ZodIntersection,...w(r)});class he extends E{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==m.array)return g(n,{code:f.invalid_type,expected:m.array,received:n.parsedType}),S;if(n.data.length<this._def.items.length)return g(n,{code:f.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),S;!this._def.rest&&n.data.length>this._def.items.length&&(g(n,{code:f.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const s=[...n.data].map((a,o)=>{const u=this._def.items[o]||this._def.rest;return u?u._parse(new pe(n,a,n.path,o)):null}).filter(a=>!!a);return n.common.async?Promise.all(s).then(a=>W.mergeArray(r,a)):W.mergeArray(r,s)}get items(){return this._def.items}rest(e){return new he({...this._def,rest:e})}}he.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new he({items:t,typeName:b.ZodTuple,rest:null,...w(e)})};class Ct extends E{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==m.object)return g(n,{code:f.invalid_type,expected:m.object,received:n.parsedType}),S;const i=[],s=this._def.keyType,a=this._def.valueType;for(const o in n.data)i.push({key:s._parse(new pe(n,o,n.path,o)),value:a._parse(new pe(n,n.data[o],n.path,o)),alwaysSet:o in n.data});return n.common.async?W.mergeObjectAsync(r,i):W.mergeObjectSync(r,i)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof E?new Ct({keyType:e,valueType:r,typeName:b.ZodRecord,...w(n)}):new Ct({keyType:se.create(),valueType:e,typeName:b.ZodRecord,...w(r)})}}class lr extends E{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==m.map)return g(n,{code:f.invalid_type,expected:m.map,received:n.parsedType}),S;const i=this._def.keyType,s=this._def.valueType,a=[...n.data.entries()].map(([o,u],c)=>({key:i._parse(new pe(n,o,n.path,[c,"key"])),value:s._parse(new pe(n,u,n.path,[c,"value"]))}));if(n.common.async){const o=new Map;return Promise.resolve().then(async()=>{for(const u of a){const c=await u.key,l=await u.value;if(c.status==="aborted"||l.status==="aborted")return S;(c.status==="dirty"||l.status==="dirty")&&r.dirty(),o.set(c.value,l.value)}return{status:r.value,value:o}})}else{const o=new Map;for(const u of a){const c=u.key,l=u.value;if(c.status==="aborted"||l.status==="aborted")return S;(c.status==="dirty"||l.status==="dirty")&&r.dirty(),o.set(c.value,l.value)}return{status:r.value,value:o}}}}lr.create=(t,e,r)=>new lr({valueType:e,keyType:t,typeName:b.ZodMap,...w(r)});class qe extends E{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==m.set)return g(n,{code:f.invalid_type,expected:m.set,received:n.parsedType}),S;const i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&(g(n,{code:f.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),r.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&(g(n,{code:f.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),r.dirty());const s=this._def.valueType;function a(u){const c=new Set;for(const l of u){if(l.status==="aborted")return S;l.status==="dirty"&&r.dirty(),c.add(l.value)}return{status:r.value,value:c}}const o=[...n.data.values()].map((u,c)=>s._parse(new pe(n,u,n.path,c)));return n.common.async?Promise.all(o).then(u=>a(u)):a(o)}min(e,r){return new qe({...this._def,minSize:{value:e,message:_.toString(r)}})}max(e,r){return new qe({...this._def,maxSize:{value:e,message:_.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}}qe.create=(t,e)=>new qe({valueType:t,minSize:null,maxSize:null,typeName:b.ZodSet,...w(e)});class et extends E{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==m.function)return g(r,{code:f.invalid_type,expected:m.function,received:r.parsedType}),S;function n(o,u){return ar({data:o,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,sr(),st].filter(c=>!!c),issueData:{code:f.invalid_arguments,argumentsError:u}})}function i(o,u){return ar({data:o,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,sr(),st].filter(c=>!!c),issueData:{code:f.invalid_return_type,returnTypeError:u}})}const s={errorMap:r.common.contextualErrorMap},a=r.data;if(this._def.returns instanceof ot){const o=this;return J(async function(...u){const c=new ee([]),l=await o._def.args.parseAsync(u,s).catch(v=>{throw c.addIssue(n(u,v)),c}),d=await Reflect.apply(a,this,l);return await o._def.returns._def.type.parseAsync(d,s).catch(v=>{throw c.addIssue(i(d,v)),c})})}else{const o=this;return J(function(...u){const c=o._def.args.safeParse(u,s);if(!c.success)throw new ee([n(u,c.error)]);const l=Reflect.apply(a,this,c.data),d=o._def.returns.safeParse(l,s);if(!d.success)throw new ee([i(l,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new et({...this._def,args:he.create(e).rest(He.create())})}returns(e){return new et({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new et({args:e||he.create([]).rest(He.create()),returns:r||He.create(),typeName:b.ZodFunction,...w(n)})}}class It extends E{get schema(){return this._def.getter()}_parse(e){const{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}It.create=(t,e)=>new It({getter:t,typeName:b.ZodLazy,...w(e)});class Rt extends E{_parse(e){if(e.data!==this._def.value){const r=this._getOrReturnCtx(e);return g(r,{received:r.data,code:f.invalid_literal,expected:this._def.value}),S}return{status:"valid",value:e.data}}get value(){return this._def.value}}Rt.create=(t,e)=>new Rt({value:t,typeName:b.ZodLiteral,...w(e)});function Di(t,e){return new Fe({values:t,typeName:b.ZodEnum,...w(e)})}class Fe extends E{constructor(){super(...arguments),pt.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const r=this._getOrReturnCtx(e),n=this._def.values;return g(r,{expected:C.joinValues(n),received:r.parsedType,code:f.invalid_type}),S}if(or(this,pt,"f")||Mi(this,pt,new Set(this._def.values),"f"),!or(this,pt,"f").has(e.data)){const r=this._getOrReturnCtx(e),n=this._def.values;return g(r,{received:r.data,code:f.invalid_enum_value,options:n}),S}return J(e.data)}get options(){return this._def.values}get enum(){const e={};for(const r of this._def.values)e[r]=r;return e}get Values(){const e={};for(const r of this._def.values)e[r]=r;return e}get Enum(){const e={};for(const r of this._def.values)e[r]=r;return e}extract(e,r=this._def){return Fe.create(e,{...this._def,...r})}exclude(e,r=this._def){return Fe.create(this.options.filter(n=>!e.includes(n)),{...this._def,...r})}}pt=new WeakMap;Fe.create=Di;class Pt extends E{constructor(){super(...arguments),ht.set(this,void 0)}_parse(e){const r=C.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==m.string&&n.parsedType!==m.number){const i=C.objectValues(r);return g(n,{expected:C.joinValues(i),received:n.parsedType,code:f.invalid_type}),S}if(or(this,ht,"f")||Mi(this,ht,new Set(C.getValidEnumValues(this._def.values)),"f"),!or(this,ht,"f").has(e.data)){const i=C.objectValues(r);return g(n,{received:n.data,code:f.invalid_enum_value,options:i}),S}return J(e.data)}get enum(){return this._def.values}}ht=new WeakMap;Pt.create=(t,e)=>new Pt({values:t,typeName:b.ZodNativeEnum,...w(e)});class ot extends E{unwrap(){return this._def.type}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==m.promise&&r.common.async===!1)return g(r,{code:f.invalid_type,expected:m.promise,received:r.parsedType}),S;const n=r.parsedType===m.promise?r.data:Promise.resolve(r.data);return J(n.then(i=>this._def.type.parseAsync(i,{path:r.path,errorMap:r.common.contextualErrorMap})))}}ot.create=(t,e)=>new ot({type:t,typeName:b.ZodPromise,...w(e)});class ue extends E{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===b.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:r,ctx:n}=this._processInputParams(e),i=this._def.effect||null,s={addIssue:a=>{g(n,a),a.fatal?r.abort():r.dirty()},get path(){return n.path}};if(s.addIssue=s.addIssue.bind(s),i.type==="preprocess"){const a=i.transform(n.data,s);if(n.common.async)return Promise.resolve(a).then(async o=>{if(r.value==="aborted")return S;const u=await this._def.schema._parseAsync({data:o,path:n.path,parent:n});return u.status==="aborted"?S:u.status==="dirty"||r.value==="dirty"?Ge(u.value):u});{if(r.value==="aborted")return S;const o=this._def.schema._parseSync({data:a,path:n.path,parent:n});return o.status==="aborted"?S:o.status==="dirty"||r.value==="dirty"?Ge(o.value):o}}if(i.type==="refinement"){const a=o=>{const u=i.refinement(o,s);if(n.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(n.common.async===!1){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?S:(o.status==="dirty"&&r.dirty(),a(o.value),{status:r.value,value:o.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>o.status==="aborted"?S:(o.status==="dirty"&&r.dirty(),a(o.value).then(()=>({status:r.value,value:o.value}))))}if(i.type==="transform")if(n.common.async===!1){const a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!St(a))return a;const o=i.transform(a.value,s);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:o}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>St(a)?Promise.resolve(i.transform(a.value,s)).then(o=>({status:r.value,value:o})):a);C.assertNever(i)}}ue.create=(t,e,r)=>new ue({schema:t,typeName:b.ZodEffects,effect:e,...w(r)});ue.createWithPreprocess=(t,e,r)=>new ue({schema:e,effect:{type:"preprocess",transform:t},typeName:b.ZodEffects,...w(r)});class de extends E{_parse(e){return this._getType(e)===m.undefined?J(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}de.create=(t,e)=>new de({innerType:t,typeName:b.ZodOptional,...w(e)});class Me extends E{_parse(e){return this._getType(e)===m.null?J(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Me.create=(t,e)=>new Me({innerType:t,typeName:b.ZodNullable,...w(e)});class Nt extends E{_parse(e){const{ctx:r}=this._processInputParams(e);let n=r.data;return r.parsedType===m.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}Nt.create=(t,e)=>new Nt({innerType:t,typeName:b.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...w(e)});class Ft extends E{_parse(e){const{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return kt(i)?i.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new ee(n.common.issues)},input:n.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new ee(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}Ft.create=(t,e)=>new Ft({innerType:t,typeName:b.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...w(e)});class dr extends E{_parse(e){if(this._getType(e)!==m.nan){const n=this._getOrReturnCtx(e);return g(n,{code:f.invalid_type,expected:m.nan,received:n.parsedType}),S}return{status:"valid",value:e.data}}}dr.create=t=>new dr({typeName:b.ZodNaN,...w(t)});const Mu=Symbol("zod_brand");class gn extends E{_parse(e){const{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}}class Ht extends E{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?S:s.status==="dirty"?(r.dirty(),Ge(s.value)):this._def.out._parseAsync({data:s.value,path:n.path,parent:n})})();{const i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?S:i.status==="dirty"?(r.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(e,r){return new Ht({in:e,out:r,typeName:b.ZodPipeline})}}class Mt extends E{_parse(e){const r=this._def.innerType._parse(e),n=i=>(St(i)&&(i.value=Object.freeze(i.value)),i);return kt(r)?r.then(i=>n(i)):n(r)}unwrap(){return this._def.innerType}}Mt.create=(t,e)=>new Mt({innerType:t,typeName:b.ZodReadonly,...w(e)});function Ui(t,e={},r){return t?at.create().superRefine((n,i)=>{var s,a;if(!t(n)){const o=typeof e=="function"?e(n):typeof e=="string"?{message:e}:e,u=(a=(s=o.fatal)!==null&&s!==void 0?s:r)!==null&&a!==void 0?a:!0,c=typeof o=="string"?{message:o}:o;i.addIssue({code:"custom",...c,fatal:u})}}):at.create()}const ju={object:B.lazycreate};var b;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(b||(b={}));const Bu=(t,e={message:`Input not instance of ${t.name}`})=>Ui(r=>r instanceof t,e),Li=se.create,Hi=Pe.create,Au=dr.create,Du=Ne.create,Zi=wt.create,Uu=We.create,Lu=ur.create,Hu=Tt.create,Zu=Et.create,$u=at.create,Wu=He.create,qu=ke.create,zu=cr.create,Yu=oe.create,Vu=B.create,Ju=B.strictCreate,Ku=Ot.create,Xu=br.create,Qu=xt.create,Gu=he.create,ec=Ct.create,tc=lr.create,rc=qe.create,nc=et.create,ic=It.create,sc=Rt.create,ac=Fe.create,oc=Pt.create,uc=ot.create,Wn=ue.create,cc=de.create,lc=Me.create,dc=ue.createWithPreprocess,fc=Ht.create,pc=()=>Li().optional(),hc=()=>Hi().optional(),gc=()=>Zi().optional(),mc={string:t=>se.create({...t,coerce:!0}),number:t=>Pe.create({...t,coerce:!0}),boolean:t=>wt.create({...t,coerce:!0}),bigint:t=>Ne.create({...t,coerce:!0}),date:t=>We.create({...t,coerce:!0})},vc=S;var k=Object.freeze({__proto__:null,defaultErrorMap:st,setErrorMap:vu,getErrorMap:sr,makeIssue:ar,EMPTY_PATH:_u,addIssueToContext:g,ParseStatus:W,INVALID:S,DIRTY:Ge,OK:J,isAborted:Jr,isDirty:Kr,isValid:St,isAsync:kt,get util(){return C},get objectUtil(){return Vr},ZodParsedType:m,getParsedType:Oe,ZodType:E,datetimeRegex:Ai,ZodString:se,ZodNumber:Pe,ZodBigInt:Ne,ZodBoolean:wt,ZodDate:We,ZodSymbol:ur,ZodUndefined:Tt,ZodNull:Et,ZodAny:at,ZodUnknown:He,ZodNever:ke,ZodVoid:cr,ZodArray:oe,ZodObject:B,ZodUnion:Ot,ZodDiscriminatedUnion:br,ZodIntersection:xt,ZodTuple:he,ZodRecord:Ct,ZodMap:lr,ZodSet:qe,ZodFunction:et,ZodLazy:It,ZodLiteral:Rt,ZodEnum:Fe,ZodNativeEnum:Pt,ZodPromise:ot,ZodEffects:ue,ZodTransformer:ue,ZodOptional:de,ZodNullable:Me,ZodDefault:Nt,ZodCatch:Ft,ZodNaN:dr,BRAND:Mu,ZodBranded:gn,ZodPipeline:Ht,ZodReadonly:Mt,custom:Ui,Schema:E,ZodSchema:E,late:ju,get ZodFirstPartyTypeKind(){return b},coerce:mc,any:$u,array:Yu,bigint:Du,boolean:Zi,date:Uu,discriminatedUnion:Xu,effect:Wn,enum:ac,function:nc,instanceof:Bu,intersection:Qu,lazy:ic,literal:sc,map:tc,nan:Au,nativeEnum:oc,never:qu,null:Zu,nullable:lc,number:Hi,object:Vu,oboolean:gc,onumber:hc,optional:cc,ostring:pc,pipeline:fc,preprocess:dc,promise:uc,record:ec,set:rc,strictObject:Ju,string:Li,symbol:Lu,transformer:Wn,tuple:Gu,undefined:Hu,union:Ku,unknown:Wu,void:zu,NEVER:vc,ZodIssueCode:f,quotelessJson:mu,ZodError:ee});k.object({token:k.string(),timeToLiveSeconds:k.number().optional(),isFirstLogin:k.boolean().optional(),startTimestamp:k.number(),customerId:k.string(),jurisdiction:k.string().optional(),startReason:k.nativeEnum(Ni)});k.object({sessionToken:k.string(),timeToLiveSeconds:k.number(),personalSessionLimitCheckPeriodSeconds:k.number(),customerId:k.string(),jurisdiction:k.string(),isFirstLogin:k.boolean(),hashedEmail:k.string().optional()});k.object({timeToLiveSeconds:k.number()});k.object({timeToLiveSeconds:k.number()});k.object({email:k.string(),password:k.string()});const _c=k.object({cookie:k.string(),groupMarketing:k.string(),thirdParty:k.string()}),yc=k.object({acceptEmailOffers:k.boolean(),acceptSmsOffers:k.boolean(),acceptTelesalesOffers:k.boolean(),acceptAutomatedVoiceCalls:k.boolean()}),bc=k.object({token:k.string(),oneTimeLoginToken:k.string(),jurisidiction:k.string(),consents:_c,subscriptions:yc}),Sc=k.object({termsAndConditionsToken:k.string(),oneTimeLoginToken:k.string(),jurisdiction:k.string()});k.object({code:k.string(),customerCanLogInAt:k.string().optional(),consentsNotAcceptedLoginResponse:bc.optional(),termsAndConditionsNotAcceptedLoginResponse:Sc.optional()});var Sr=(t=>(t.RouteUrl="router.routeUrl",t))(Sr||{}),Sr=(t=>(t.CurrentRouteNames="router.currentRouteNames",t.RouteRenderFinish="router.routeRenderFinish",t.NavigationEnd="router.navigationEnd",t.Pathname="router.pathname",t))(Sr||{}),$i=(t=>(t.NetworkStatusUpdate="platform:browserEvents:networkStatusUpdate",t.VisibilityUpdate="platform:browserEvents:visibilityUpdate",t.DeviceOrientationRequest="platform:browserEvents:deviceOrientationRequest",t.MessageEvent="platform:browserEvents:message",t.GetCookie="platform:clientCookie:getCookie",t.GetAllCookies="platform:clientCookie:getAllCookies",t.SetCookie="platform:clientCookie:setCookie",t.DeleteCookie="platform:clientCookie:deleteCookie",t.GetCookieAsJson="platform:clientCookie:getCookieAsJson",t.SetCookieAsJson="platform:clientCookie:setCookieAsJson",t.IsCookieConsentAccepted="platform:cookieConsent:isCookieConsentAccepted",t.IsConsentGiven="platform:cookieConsent:isConsentGiven",t.GetDeviceExperience="platform:deviceConfig:getExperience",t.GetDeviceType="platform:deviceConfig:getType",t.SetItemInStorage="platform:storage:setItem",t.GetItemFromStorage="platform:storage:getItem",t.GetOrSetItemInStorage="platform:storage:getOrSetItem",t.RemoveItemFromStorage="platform:storage:removeItem",t.SetItemInCache="platform:cache:setItem",t.GetItemFromCache="platform:cache:getItem",t.GetOrSetItemInCache="platform:cache:getOrSetItem",t.RemoveItemFromCache="platform:cache:removeItem",t.FormatDate="platform:date:formatDate",t.FormatDateInTimezone="platform:date:formatDateInTimezone",t.WriteCookie="platform:onetrust:writeCookie",t.ReadCookie="platform:onetrust:readCookie",t.InjectOneTrust="platform:onetrust:injectOneTrust",t.ConfigureOneTrust="platform:onetrust:configureOneTrust",t.LoadScript="platform:script-loader:loadScript",t.HasScript="platform:script-loader:hasScript",t))($i||{}),N={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.GtmInitBrand=t.GDPRNewGroupStatus=t.GDPRNewGroups=t.GDPRGroupState=t.GDPRGroups=t.GtmLoginType=t.GtmLoginStatus=t.GtmRegistrationType=t.GtmPageType=t.GtmInitPlatform=t.GtmDepositType=t.GtmLoginMethod=t.GtmLobbyName=t.GtmDataLayerVar=t.GtmEventAction=void 0,function(e){e.AccountVerificationClick="AccountVerificationClick",e.AccountVerificationConfirmed="AccountVerificationConfirmed",e.AccountVerificationOpen="AccountVerificationOpen",e.AppDownloadBannerClicked="AppDownloadBannerClicked",e.AppDownloadBannerClosed="AppDownloadBannerClosed",e.AppDownloadBannerShown="AppDownloadBannerShown",e.BackgroundToggle="BackgroundToggle",e.BankIDOpen="BankIDOpen",e.BankIDStart="BankIDStart",e.BankIDVerification="BankIDVerification",e.BannerClick="BannerClick",e.BetConfirmed="BetConfirmed",e.BetDistributionClick="BetDistributionClick",e.BetFailed="BetFailed",e.BetslipDetail="BetslipDetail",e.BonusBackBannerClick="BonusBackBannerClick",e.BonusSelection="BonusSelection",e.BonusSelectionClick="BonusSelectionClick",e.BonusSelectionOpen="BonusSelectionOpen",e.BurgerMenuClick="BurgerMenuClick",e.CarouselCardClick="CarouselCardClick",e.CasinoFilterAdded="CasinoFilterAdded",e.CasinoFilterRemoved="CasinoFilterRemoved",e.CasinoWidgetClick="CasinoWidgetClick",e.CasinoWidgetTabClick="CasinoWidgetTabClick",e.ChangePasswordFailed="ChangePasswordFailed",e.ChangePasswordFormOpen="ChangePasswordFormOpen",e.ChangePasswordFormSubmit="ChangePasswordFormSubmit",e.ChangePasswordSuccess="ChangePasswordSuccess",e.ChangeRegistrationType="ChangeRegistrationType",e.CloseNavigationPopup="CloseNavigationPopup",e.ClosePopup="ClosePopup",e.ConfirmedDeposit="ConfirmedDeposit",e.ConfirmedRegistration="ConfirmedRegistration",e.ConsentChange="ConsentChange",e.ConsentConfirmed="ConsentConfirmed",e.ConsentOpen="ConsentOpen",e.ConsentSubmitted="ConsentSubmitted",e.ContentLinksClick="ContentLinksClick",e.CreateAccount="CreateAccount",e.CreateAccountClick="CreateAccountClick",e.DepositLimitCalculate="DepositLimitCalculate",e.DepositLimitCalculatorFieldChange="DepositLimitCalculatorFieldChange",e.DepositLimitCalculatorLinkClick="DepositLimitCalculatorLinkClick",e.DepositWithoutBonus="DepositWithoutBonus",e.ElementClicked="ElementClicked",e.ElementSeen="ElementSeen",e.ExitIntentModalClick="ExitIntentModalClick",e.ExitIntentModalDismissed="ExitIntentModalDismissed",e.ExitIntentModalShow="ExitIntentModalShow",e.FailedRegistration="FailedRegistration",e.FavouriteGameClick="FavouriteGameClick",e.FirstDeposit="FirstDeposit",e.ForgottenPassword="ForgottenPassword",e.ForgottenPasswordFailed="ForgottenPasswordFailed",e.ForgottenPasswordSuccess="ForgottenPasswordSuccess",e.FullBetHistoryClick="FullBetHistoryClick",e.FundsProtectionOpen="FundsProtectionOpen",e.GameCategoryHeaderClick="GameCategoryHeaderClick",e.GameFrameClick="GameFrameClick",e.GamePlayedForFun="GamePlayedForFun",e.GamePlayedForReal="GamePlayedForReal",e.GDPRConsent="GDPRConsent",e.GenericButtonClick="GenericButtonClick",e.GenericFormFailed="GenericFormFailed",e.GenericFormFieldChange="GenericFormFieldChange",e.GenericFormOpen="GenericFormOpen",e.GenericFormSubmit="GenericFormSubmit",e.GenericFormSuccess="GenericFormSuccess",e.GtagUpdate="GtagUpdate",e.InsertBonusCode="InsertBonusCode",e.LinkClick="LinkClick",e.LiveEventVisit="LiveEventVisit",e.LiveStreamInteraction="LiveStreamInteraction",e.LoginFailed="LoginFailed",e.LoginFieldChange="LoginFieldChange",e.LoginFormOpen="LoginFormOpen",e.LoginIntention="LoginIntention",e.LoginPasswordFormSubmit="LoginPasswordFormSubmit",e.LoginSubmitted="LoginSubmitted",e.LoginTabClick="LoginTabClick",e.MarketSelectorApplied="MarketSelectorApplied",e.MarketSelectorClick="MarketSelectorClick",e.MitIDClose="MitIDClose",e.MitIDOpen="MitIDOpen",e.MultipleGameWindow="MultipleGameWindow",e.MyAccountClick="MyAccountClick",e.MyBetssonPanelClick="MyBetssonPanelClick",e.MyGamesClick="MyGamesClick",e.MyGamesViewAllClick="MyGamesViewAllClick",e.NavigationClick="NavigationClick",e.NemIDClose="NemIDClose",e.NemIDOpen="NemIDOpen",e.NotSwedishRegClick="NotSwedishRegClick",e.OddsUpdateAction="OddsUpdateAction",e.OddsUpdateFailed="OddsUpdateFailed",e.OMSClick="OMSClick",e.OpenAccountWidget="OpenAccountWidget",e.OpenDepPage="OpenDepPage",e.OpenMobileBankID="OpenMobileBankID",e.OpenRegPage="OpenRegPage",e.optimize_activate="optimize.activate",e.OverlayMessage="OverlayMessage",e.PinClick="PinClick",e.PlaceBetClick="PlaceBetClick",e.PokerClick="PokerClick",e.PokerPromotionsClick="PokerPromotionsClick",e.PokerSideGames="PokerSideGames",e.PokerSideGamesNavigation="PokerSideGamesNavigation",e.ProductFilterApplied="ProductFilterApplied",e.ProductFilterClick="ProductFilterClick",e.ProductSortApplied="ProductSortApplied",e.ProductSortClick="ProductSortClick",e.PromotionBannerClick="PromotionBannerClick",e.QuickLinksScroller="QuickLinksScroller",e.RegIntention="RegIntention",e.RegistrationActivity="RegistrationActivity",e.RegistrationClicks="RegistrationClicks",e.RegistrationFailedNextStepClick="RegistrationFailedNextStepClick",e.RegistrationFieldChange="RegistrationFieldChange",e.RegistrationFieldError="RegistrationFieldError",e.RegistrationLoginClick="RegistrationLoginClick",e.RegistrationPostStepClick="RegistrationPostStepClick",e.RegistrationSubmitted="RegistrationSubmitted",e.ResetPasswordFailed="ResetPasswordFailed",e.ResetPasswordFormOpen="ResetPasswordFormOpen",e.ResetPasswordFormSubmit="ResetPasswordFormSubmit",e.ResetPasswordSuccess="ResetPasswordSuccess",e.SearchCasino="SearchCasino",e.SearchClick="SearchClick",e.SearchLinkClick="SearchLinkClick",e.SearchResults="SearchResults",e.SearchSelected="SearchSelected",e.SearchSubmitted="SearchSubmitted",e.SetNewPassword="SetNewPassword",e.SettingsClick="SettingsClick",e.SGAHeaderLogo="SGAHeaderLogo",e.SkipPassword="SkipPassword",e.SmartBannerClick="SmartBannerClick",e.SmartIDFormClick="SmartIDFormClick",e.SmartIDLoginVerificationOpen="SmartIDLoginVerificationOpen",e.SmartIDRegVerificationErrorClick="SmartIDRegVerificationErrorClick",e.SmartIDRegVerificationFailed="SmartIDRegVerificationFailed",e.SmartIDRegVerificationSuccess="SmartIDRegVerificationSuccess",e.SportsbookBannerClick="SportsbookBannerClick",e.SportsbookDropdownClick="SportsbookDropdownClick",e.SportsbookPreferenceChange="SportsbookPreferenceChange",e.SportsbookSearchClick="SportsbookSearchClick",e.SportsbookWidgetClick="SportsbookWidgetClick",e.StatsClick="StatsClick",e.SuccessfulGameAdded="SuccessfulGameAdded",e.SuccessfulLogin="SuccessfulLogin",e.TiledFilterClick="TiledFilterClick",e.TopBurgerMenuClick="TopBurgerMenuClick",e.TournamentsClick="TournamentsClick",e.TournamentsFailed="TournamentsFailed",e.TournamentsGamesNavigation="TournamentsGamesNavigation",e.TournamentsNavigation="TournamentsNavigation",e.TournamentsOpen="TournamentsOpen",e.TournamentsOptInFailed="TournamentsOptInFailed",e.TournamentsOptInSuccess="TournamentsOptInSuccess",e.TournamentsTabNavigation="TournamentsTabNavigation",e.TrustlyClose="TrustlyClose",e.TrustlyOpen="TrustlyOpen",e.TwoFADisableConfirmationCancel="TwoFADisableConfirmationCancel",e.TwoFADisableConfirmationOpen="TwoFADisableConfirmationOpen",e.TwoFADisableConfirmationTurnoff="TwoFADisableConfirmationTurnoff",e.TwoFALoginPasswordCancel="TwoFALoginPasswordCancel",e.TwoFALoginPasswordFailed="TwoFALoginPasswordFailed",e.TwoFALoginPasswordSubmit="TwoFALoginPasswordSubmit",e.TwoFALoginPasswordSuccess="TwoFALoginPasswordSuccess",e.TwoFAMobileSMSAuthCancel="TwoFAMobileSMSAuthCancel",e.TwoFAMobileSMSAuthChange="TwoFAMobileSMSAuthChange",e.TwoFAMobileSMSAuthContinue="TwoFAMobileSMSAuthContinue",e.TwoFAMobileSMSAuthOpen="TwoFAMobileSMSAuthOpen",e.TwoFANotificationClick="TwoFANotificationClick",e.TwoFANotificationOpen="TwoFANotificationOpen",e.TwoFASetupClick="TwoFASetupClick",e.TwoFASetupDisabled="TwoFASetupDisabled",e.TwoFASetupOpen="TwoFASetupOpen",e.TwoFASetupSuccess="TwoFASetupSuccess",e.TwoFASetupTurnOffClick="TwoFASetupTurnOffClick",e.TwoFASMSVerificationCode="TwoFASMSVerificationCode",e.VerificationBarShown="VerificationBarShown",e.VerificationStartClick="VerificationStartClick",e.VerifiedRegistration="VerifiedRegistration",e.VerifyAccountClick="VerifyAccountClick",e.VerifyAccountOpen="VerifyAccountOpen",e.ViewAllHeaderClick="ViewAllHeaderClick",e.VirtualPageView="VirtualPageView",e.WebsiteToggle="WebsiteToggle",e.WelcomeMessageClick="WelcomeMessageClick",e.WelcomeMessageOpen="WelcomeMessageOpen",e.WidgetClick="WidgetClick"}(t.GtmEventAction||(t.GtmEventAction={})),function(e){e.Action="Action",e.ActiveGameFrames="ActiveGameFrames",e.ActivityName="ActivityName",e.Age="Age",e.Amount="Amount",e.Area="Area",e.BackgroundState="BackgroundState",e.BalanceAmount="BalanceAmount",e.BannerName="BannerName",e.BannerPosition="BannerPosition",e.BetMarket="BetMarket",e.BetType="BetType",e.Bonus_EventPhase="Bonus_EventPhase",e.Bonus_ID="Bonus_ID",e.BonusTitle="BonusTitle",e.BonusType="BonusType",e.CampaignClicked="CampaignClicked",e.CardClicked="CardClicked",e.CategoryClicked="CategoryClicked",e.CategoryID="CategoryID",e.CategoryName="CategoryName",e.CD_ClickType="CD_ClickType",e.ClickArea="ClickArea",e.ClickUrl="ClickUrl",e.CompetitionID="CompetitionID",e.CompetitionName="CompetitionName",e.ConsentFields="ConsentFields",e.Country="Country",e.CouponID="CouponID",e.Currency="Currency",e.DepositLimitAmount="DepositLimitAmount",e.DepositType="DepositType",e.Destination="Destination",e.Direction="Direction",e.ecommerce_items="ecommerce.items",e.ElementClicked="ElementClicked",e.ElementID="ElementID",e.ElementName="ElementName",e.ElementTotal="ElementTotal",e.ElementType="ElementType",e.Error="Error",e.EventID="EventID",e.EventLabel="EventLabel",e.EventName="EventName",e.EventPhase="EventPhase",e.FavArea="FavArea",e.FieldCount="FieldCount",e.FieldName="FieldName",e.FilterEnabled="FilterEnabled",e.FilterItem="FilterItem",e.FormName="FormName",e.GAEventName="GAEventName",e.GameCategory="GameCategory",e.GameName="GameName",e.gdpr_performance_enabled="gdpr_performance_enabled",e.gdpr_targeting_enabled="gdpr_targeting_enabled",e.GDPRFunctionalAccepted="GDPRFunctionalAccepted",e.GDPRPerformanceAccepted="GDPRPerformanceAccepted",e.GDPRTargetingAccepted="GDPRTargetingAccepted",e.gtm_init_brand="gtm_init_brand",e.gtm_init_environment="gtm_init_environment",e.gtm_init_platform="gtm_init_platform",e.gtm_init_traffic="gtm_init_traffic",e.gtm_is_cookie_consent_disabled="gtm_is_cookie_consent_disabled",e.gtm_static="gtm_static",e.GUID="GUID",e.ItemClicked="ItemClicked",e.Journey="Journey",e.Jurisdiction="Jurisdiction",e.KYCStatus="KYCStatus",e.Label="Label",e.Language="Language",e.Level="Level",e.LobbyName="LobbyName",e.Location="Location",e.LoginMethod="LoginMethod",e.LoginStatus="LoginStatus",e.LoginType="LoginType",e.MarketTemplateID="MarketTemplateID",e.MenuClicked="MenuClicked",e.Method="Method",e.Native_App_Name="Native_App_Name",e.Native_App_Version="Native_App_Version",e.OMStitle="OMStitle",e.PageType="PageType",e.ParentMenu="ParentMenu",e.PartnerID="PartnerID",e.ProductName="ProductName",e.PromotionName="PromotionName",e.providers="providers",e.PublicPaymentId="PublicPaymentId",e.RegistrationCountry="RegistrationCountry",e.RegistrationMethod="RegistrationMethod",e.RegistrationStep="RegistrationStep",e.RegistrationType="RegistrationType",e.ReleaseName="ReleaseName",e.ReleaseVersion="ReleaseVersion",e.RememberStakeFlag="RememberStakeFlag",e.ResponseMessage="ResponseMessage",e.SearchTerm="SearchTerm",e.searchterm="searchterm",e.SearchType="SearchType",e.SectionName="SectionName",e.Sex="Sex",e.Slide_Number="Slide_Number",e.SmartBannerClickType="SmartBannerClickType",e.Sportsbook_EventPhase="Sportsbook_EventPhase",e.Sportsbook_MarketName="Sportsbook_MarketName",e.StakeForReview="StakeForReview",e.StartType="StartType",e.Status="Status",e.SubArea="SubArea",e.TabName="TabName",e.TargetUrl="TargetUrl",e.ToggleField="ToggleField",e.TotalResults="TotalResults",e.TotalStake="TotalStake",e.TournamentID="TournamentID",e.TournamentType="TournamentType",e.TriggerType="TriggerType",e.TypeSearchResults="TypeSearchResults",e.ViewType="ViewType",e.WidgetClicked="WidgetClicked",e.WidgetEvent="WidgetEvent",e.WidgetName="WidgetName"}(t.GtmDataLayerVar||(t.GtmDataLayerVar={})),function(e){e.Admin="ADMIN",e.ActivateAccount="ACTIVATE_ACCOUNT",e.Blog="BLOG",e.BetGames="BET_GAMES",e.Bingo="BINGO",e.Bonuses="BONUSES",e.Casino="CASINO",e.Content="CONTENT",e.CookiePolicy="COOKIE_POLICY",e.CustomerService="CUSTOMER_SERVICE",e.Deposit="DEPOSIT",e.DepositCalculator="DEPOSIT_CALCULATOR",e.FantasyGames="FANTASY_GAMES",e.ForgottenPassword="FORGOTTEN_PASSWORD",e.GameRules="GAME_RULES",e.Generic="GENERIC",e.Home="HOME",e.HorseRacing="HORSE_RACING",e.Info="INFO",e.InternalError="INTERNAL_ERROR",e.Jackpots="JACKPOTS",e.KycBar="KYC_BAR",e.LiveCasino="LIVE_CASINO",e.LiveSportsbook="LIVE_SPORTSBOOK",e.Login="LOGIN",e.MarketSelector="MARKET_SELECTOR",e.MyAccount="MY_ACCOUNT",e.Oms="OMS",e.PageNotFound="PAGE_NOT_FOUND",e.PersonalData="PERSONAL_DATA",e.Poker="POKER",e.PrivacyPolicy="PRIVACY_POLICY",e.Promotions="PROMOTIONS",e.PromotionsBingo="PROMOTIONS_BINGO",e.PromotionsCasino="PROMOTIONS_CASINO",e.PromotionsLiveCasino="PROMOTIONS_LIVE_CASINO",e.PromotionsLiveSportsbook="PROMOTIONS_LIVE_SPORTSBOOK",e.PromotionsMixed="PROMOTIONS_MIXED",e.PromotionsPoker="PROMOTIONS_POKER",e.PromotionsSportsbook="PROMOTIONS_SPORTSBOOK",e.Register="REGISTER",e.ResetPassword="RESET_PASSWORD",e.ResponsibleGaming="RESPONSIBLE_GAMING",e.Sportsbook="SPORTSBOOK",e.SportsbookRules="SPORTSBOOK_RULES",e.TermsAndConditions="TERMS_AND_CONDITIONS",e.TwoFA="TWOFA",e.VerifyPopup="VERIFY_POPUP",e.VirtualSports="VIRTUAL_SPORTS",e.WelcomeBonus="WELCOME_BONUS",e.Withdraw="WITHDRAW"}(t.GtmLobbyName||(t.GtmLobbyName={})),function(e){e.BankId="BankID",e.Credentials="Credentials",e.Facebook="Facebook",e.FaceID="FaceID",e.Google="Google",e.MobileID="MobileID",e.MitID="MitID",e.NemId="NemID",e.OTP="OTP",e.SmartID="SmartID",e.Trustly="Trustly"}(t.GtmLoginMethod||(t.GtmLoginMethod={})),function(e){e.GameFrame="GameFrame",e.Normal="Normal",e.QuickDeposit="QuickDeposit"}(t.GtmDepositType||(t.GtmDepositType={})),function(e){e.Desktop="desktop",e.Mobile="mobile",e.Native="native",e.Tablet="tablet"}(t.GtmInitPlatform||(t.GtmInitPlatform={})),function(e){e.BannerFlow="BannerFlow",e.Brand="Brand",e.Froyo="Froyo",e.Echo="Echo",e.Blog="Blog"}(t.GtmPageType||(t.GtmPageType={})),function(e){e.Cgl="CGL",e.Dga="DGA",e.Georgia="Georgia",e.Iaui="IAUI",e.Iplyc="IPLYC",e.Hgc="HGC",e.Lotba="LOTBA",e.Mga="MGA",e.Mta="Mta",e.Sga="SGA",e.SmartID="SmartID",e.Swish="SWISH",e.Trustly="Trustly",e.Ukgc="UKGC",e.MobileID="MobileID",e.Reda="Reda",e.Regular="Regular"}(t.GtmRegistrationType||(t.GtmRegistrationType={})),function(e){e.LoggedIn="LoggedIn",e.LoggedOut="LoggedOut"}(t.GtmLoginStatus||(t.GtmLoginStatus={})),function(e){e.FirstLogin="FirstLogin",e.LoggedInExisting="LoggedInExisting"}(t.GtmLoginType||(t.GtmLoginType={})),function(e){e.Targeting="gdpr_targeting_enabled",e.Performance="gdpr_performance_enabled",e.Functional="gdpr_functional_enabled"}(t.GDPRGroups||(t.GDPRGroups={})),function(e){e.Enabled="1",e.Disabled="0"}(t.GDPRGroupState||(t.GDPRGroupState={})),function(e){e.NewTargeting="GDPRTargetingAccepted",e.NewPerformance="GDPRPerformanceAccepted",e.NewFunctional="GDPRFunctionalAccepted"}(t.GDPRNewGroups||(t.GDPRNewGroups={})),function(e){e.EnableNow="1",e.DoNothing="0"}(t.GDPRNewGroupStatus||(t.GDPRNewGroupStatus={})),function(e){e.JallaCasino="jallacasino"}(t.GtmInitBrand||(t.GtmInitBrand={}))})(N);function K(t){return function(e){return t===0?Wo():e.lift(new kc(t))}}var kc=function(){function t(e){if(this.total=e,this.total<0)throw new Jo}return t.prototype.call=function(e,r){return r.subscribe(new wc(e,this.total))},t}(),wc=function(t){ct(e,t);function e(r,n){var i=t.call(this,r)||this;return i.total=n,i.count=0,i}return e.prototype._next=function(r){var n=this.total,i=++this.count;i<=n&&(this.destination.next(r),i===n&&(this.destination.complete(),this.unsubscribe()))},e}(Se);function Nr(t,e,r){return function(i){return i.lift(new Tc(t,e,r))}}var Tc=function(){function t(e,r,n){this.nextOrObserver=e,this.error=r,this.complete=n}return t.prototype.call=function(e,r){return r.subscribe(new Ec(e,this.nextOrObserver,this.error,this.complete))},t}(),Ec=function(t){ct(e,t);function e(r,n,i,s){var a=t.call(this,r)||this;return a._tapNext=Te,a._tapError=Te,a._tapComplete=Te,a._tapError=i||Te,a._tapComplete=s||Te,nr(n)?(a._context=a,a._tapNext=n):n&&(a._context=n,a._tapNext=n.next||Te,a._tapError=n.error||Te,a._tapComplete=n.complete||Te),a}return e.prototype._next=function(r){try{this._tapNext.call(this._context,r)}catch(n){this.destination.error(n);return}this.destination.next(r)},e.prototype._error=function(r){try{this._tapError.call(this._context,r)}catch(n){this.destination.error(n);return}this.destination.error(r)},e.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(r){this.destination.error(r);return}return this.destination.complete()},e}(Se);function Oc(t,e,r=!0){const n=new URL(t.href);return Object.entries(e).forEach(([i,s])=>{s==null?n.searchParams.delete(i):n.searchParams.has(i)?n.searchParams.has(i)&&n.searchParams.set(i,s):r&&n.searchParams.append(i,s)}),n}const xc="0";class Ue{constructor(){this.isGtmEnabled=!1,this.isGtmInstalled=!1,this.experimentResolvePool={},this.experimentVariants={},new F(document.obgEventBus.retrieve(Q.Config)).pipe(K(1)).pipe(Nr(e=>{var r;this.isGtmEnabled=!!((r=e["svc-telemetry"])!=null&&r.isGtmEnabled)})).subscribe(),this.isGtmEnabled&&(window.dataLayer=this.isGtmEnabled&&(window.dataLayer||[]),this.dataLayer=window.dataLayer,this.isGtmInstalled=Array.isArray(this.dataLayer),this.isGtmInstalled||this.sendLogErrorEvent({message:"Google Tag Manager not detected.",method:"constructor"}),document.obgEventBus.listen(_e.Track,e=>this.track(e)),document.obgEventBus.listen(_e.TrackWithCallback,e=>this.trackWithCallback(e)),document.obgEventBus.listen(ne.TrackVirtualPageView,e=>this.trackVirtualPageView(e)),document.obgEventBus.listen(ne.ExperimentActivation,e=>this.setVariant(e)),document.obgEventBus.listen(ne.GetExperimentVariant,e=>this.getExperimentVariant(e)),new F(document.obgEventBus.retrieve(Sr.RouteUrl)).pipe(Nr(e=>{this.trackVirtualPageView({Lobby:!1,LobbyName:void 0,VirtualUrl:e,VirtualTitle:document.title})})).subscribe(),this.initializeGTM())}static get Instance(){return Ue._instance||(Ue._instance=new Ue),Ue._instance}track(e){this.isGtmInstalled?this.dataLayer.push(e):this.sendLogErrorEvent({message:"Tracking was requested but Google Tag Manager has not been detected.",method:"track"})}trackWithCallback(e){this.track(e.event),e.callback()}trackVirtualPageView(e){const r={name:"name",username:"user",email:"user@email.com",token:"00000-00000-0000"},n=Oc(new URL(e.VirtualUrl,window.location.origin),r,!1);this.track({...e,VirtualUrl:n.pathname+n.search,event:"VirtualPageView"})}getExperimentVariant(e){var s;const{experimentName:r,waitFor:n=2e3,onSuccess:i}=e;if(this.experimentVariants[r]){i(this.experimentVariants[r]);return}((s=this.dataLayer)==null?void 0:s.filter(a=>a.event===`ExperimentActivate_${r}`).length)===0&&this.track({event:`ExperimentActivate_${r}`}),this.experimentResolvePool[r]||(this.experimentResolvePool[r]=[]),this.experimentResolvePool[r].push(i),setTimeout(()=>{i(xc)},n)}setVariant(e){if(!(!e.detail||!e.detail.expName||!e.detail.variation)&&(this.experimentVariants[e.detail.expName]=e.detail.variation,!!this.experimentResolvePool[e.detail.expName]))for(const r of this.experimentResolvePool[e.detail.expName])r(this.experimentVariants[e.detail.expName])}sendLogErrorEvent(e){document.obgEventBus.dispatch(_e.LogError,{sourceId:Ue.name,method:e.method??"",message:e.message,data:e.error})}getConsents(e){const r=decodeURIComponent(document.cookie).split(";");let n={functional:0,performance:1,targeting:0};e==="DE"&&(n.performance=0);for(const i of r)if(i.includes("CONSENT")){const s=i.indexOf("=")+1,a=JSON.parse(i.substring(s));a.marketing&&!a.targeting?(e==="DE"&&(n.performance=a.marketing),n.functional=a.marketing,n.targeting=a.marketing):n=Object.assign(n,a)}return n}initializeGTM(){du({isAuthenticated$:new F(document.obgEventBus.retrieve(Gt.IsAuthenticated)).pipe(K(1)),customerId$:new F(document.obgEventBus.retrieve(Gt.SessionCustomerId)).pipe(K(1)),customerCountry$:new F(document.obgEventBus.retrieve(Gt.CustomerRegCountry)).pipe(K(1)),countryCode$:new F(document.obgEventBus.retrieve(Q.CountryCode)).pipe(K(1)),jurisdiction$:new F(document.obgEventBus.retrieve(Q.Jurisdiction)).pipe(K(1)),marketCode$:new F(document.obgEventBus.retrieve(Q.MarketCode)).pipe(K(1)),appVersion$:new F(document.obgEventBus.retrieve(Q.AppVersion)).pipe(K(1)),deviceType$:new F(document.obgEventBus.retrieve(Q.DeviceType)).pipe(K(1)),brandName$:new F(document.obgEventBus.retrieve(Q.BrandName)).pipe(K(1)),isInternal$:new F(document.obgEventBus.retrieve(Q.IsInternal)).pipe(K(1)),environment$:new F(document.obgEventBus.retrieve(Q.Environment)).pipe(K(1)),config$:new F(document.obgEventBus.retrieve(Q.Config)).pipe(K(1)),isBrowser$:new F(document.obgEventBus.retrieve(Q.IsBrowser)).pipe(K(1))}).pipe(fu(({isBrowser$:e,brandName$:r})=>Object.keys(N.GtmInitBrand).includes(r)&&e),Nr(({isAuthenticated$:e,customerId$:r,customerCountry$:n,countryCode$:i,jurisdiction$:s,marketCode$:a,appVersion$:o,deviceType$:u,brandName$:c,isInternal$:l,environment$:d,config$:p})=>{var q;const v=Object.keys(N.GtmInitBrand).indexOf(c),T=Object.keys(N.GtmInitPlatform).indexOf(u),x=this.getConsents(i);this.track({[N.GtmDataLayerVar.LoginStatus]:e?N.GtmLoginStatus.LoggedIn:N.GtmLoginStatus.LoggedOut,[N.GtmDataLayerVar.GUID]:e?r:"00000000-0000-0000-0000-000000000000",[N.GtmDataLayerVar.Journey]:"0",[N.GtmDataLayerVar.Language]:a,[N.GtmDataLayerVar.Country]:i,Engine:"Fabric",Lobby:"false",[N.GtmDataLayerVar.Jurisdiction]:s,[N.GtmDataLayerVar.Native_App_Name]:void 0,[N.GtmDataLayerVar.Native_App_Version]:void 0,[N.GtmDataLayerVar.PageType]:N.GtmPageType.Brand,[N.GtmDataLayerVar.RegistrationCountry]:n,[N.GtmDataLayerVar.ReleaseName]:"Fabric.Site.Deploy",[N.GtmDataLayerVar.ReleaseVersion]:o,[N.GtmDataLayerVar.gtm_init_brand]:Object.values(N.GtmInitBrand)[v],[N.GtmDataLayerVar.gtm_is_cookie_consent_disabled]:p["svc-telemetry"].isCookieConsentDisabled?"1":"0",[N.GtmDataLayerVar.gtm_init_platform]:Object.values(N.GtmInitPlatform)[T],[N.GtmDataLayerVar.gtm_init_environment]:d,[N.GtmDataLayerVar.gtm_init_traffic]:l?"internal":"external",[N.GtmDataLayerVar.gdpr_performance_enabled]:x.performance.toString(),[N.GtmDataLayerVar.gdpr_targeting_enabled]:x.targeting.toString(),gdpr_functional_enabled:x.functional.toString()}),this.track({"gtm.start":new Date().getTime(),event:"gtm.js"});const P=(q=p["svc-telemetry"])==null?void 0:q.gtmContainerId;P&&document.obgEventBus.dispatch($i.LoadScript,{params:{id:"gtm",src:"//www.googletagmanager.com/gtm.js?id="+P,attributes:{async:"true"}},onSuccess:()=>{}})})).subscribe()}}document.obgEventBus&&(qi.Instance,Qr.Instance,gu.Instance,Ue.Instance)});export default Cc();
